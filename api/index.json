{"repository_name":"nglib","body":"# compe library for crystal\n\n[![Actions Status](https://github.com/ngng628/compe-library.cr/workflows/verify/badge.svg)](https://github.com/ngng628/compe-library.cr/actions) \n[![GitHub Pages](https://img.shields.io/static/v1?label=GitHub+Pages&message=+&color=brightgreen&logo=github)](https://ngng628.github.io/compe-library.cr/)\n[![License: CC0-1.0](https://img.shields.io/badge/License-CC0_1.0-lightgrey.svg)](http://creativecommons.org/publicdomain/zero/1.0/)\n\n\n\n## これはなに？\n競技プログラミング用の Crystal ライブラリです。\n\n[google/ac-library.cr](https://github.com/google/ac-library.cr) に依存しています。\n\nまた、Crystal のバージョンは `1.7` を想定しています。`0.33.0` だと動かないコードが一部あるので注意してください。\n\n\n## Link\n\n**Verify** : [https://ngng628.github.io/compe-library.cr/docs](https://ngng628.github.io/compe-library.cr/docs)\n\n**API Reference** : [https://ngng628.github.io/compe-library.cr/api](https://ngng628.github.io/compe-library.cr/api)\n","program":{"html_id":"nglib/toplevel","path":"toplevel.html","kind":"module","full_name":"Top Level Namespace","name":"Top Level Namespace","abstract":false,"locations":[],"repository_name":"nglib","program":true,"enum":false,"alias":false,"const":false,"constants":[{"id":"OO","name":"OO","value":"(1_i64 << 62) - (1_i64 << 31)"}],"macros":[{"html_id":"chmax(a,b)-macro","name":"chmax","abstract":false,"args":[{"name":"a","external_name":"a","restriction":""},{"name":"b","external_name":"b","restriction":""}],"args_string":"(a, b)","args_html":"(a, b)","location":{"filename":"src/nglib/utils/utils.cr","line_number":2,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/utils/utils.cr#L2"},"def":{"name":"chmax","args":[{"name":"a","external_name":"a","restriction":""},{"name":"b","external_name":"b","restriction":""}],"visibility":"Public","body":" (\n{{ a }}\n < \n{{ b }}\n && (\n{{ a }}\n = \n{{ b }}\n)) \n"}},{"html_id":"chmin(a,b)-macro","name":"chmin","abstract":false,"args":[{"name":"a","external_name":"a","restriction":""},{"name":"b","external_name":"b","restriction":""}],"args_string":"(a, b)","args_html":"(a, b)","location":{"filename":"src/nglib/utils/utils.cr","line_number":3,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/utils/utils.cr#L3"},"def":{"name":"chmin","args":[{"name":"a","external_name":"a","restriction":""},{"name":"b","external_name":"b","restriction":""}],"visibility":"Public","body":" (\n{{ a }}\n > \n{{ b }}\n && (\n{{ a }}\n = \n{{ b }}\n)) \n"}}],"types":[{"html_id":"nglib/Char","path":"Char.html","kind":"struct","full_name":"Char","name":"Char","abstract":false,"superclass":{"html_id":"nglib/Value","kind":"struct","full_name":"Value","name":"Value"},"ancestors":[{"html_id":"nglib/Steppable","kind":"module","full_name":"Steppable","name":"Steppable"},{"html_id":"nglib/Comparable","kind":"module","full_name":"Comparable","name":"Comparable"},{"html_id":"nglib/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"nglib/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/nglib/grid/grid.cr","line_number":9,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L9"}],"repository_name":"nglib","program":false,"enum":false,"alias":false,"const":false,"included_modules":[{"html_id":"nglib/Comparable","kind":"module","full_name":"Comparable","name":"Comparable"},{"html_id":"nglib/Steppable","kind":"module","full_name":"Steppable","name":"Steppable"}],"doc":"A `Char` represents a [Unicode](http://en.wikipedia.org/wiki/Unicode) [code point](http://en.wikipedia.org/wiki/Code_point).\nIt occupies 32 bits.\n\nIt is created by enclosing an UTF-8 character in single quotes.\n\n```\n'a'\n'z'\n'0'\n'_'\n'あ'\n```\n\nYou can use a backslash to denote some characters:\n\n```\n'\\'' # single quote\n'\\\\' # backslash\n'\\e' # escape\n'\\f' # form feed\n'\\n' # newline\n'\\r' # carriage return\n'\\t' # tab\n'\\v' # vertical tab\n```\n\nYou can use a backslash followed by an *u* and four hexadecimal characters to denote a unicode codepoint written:\n\n```\n'\\u0041' # == 'A'\n```\n\nOr you can use curly braces and specify up to four hexadecimal numbers:\n\n```\n'\\u{41}' # == 'A'\n```\n\nSee [`Char` literals](https://crystal-lang.org/reference/syntax_and_semantics/literals/char.html) in the language reference.","summary":"<p>A <code><a href=\"Char.html\">Char</a></code> represents a <a href=\"http://en.wikipedia.org/wiki/Unicode\">Unicode</a> <a href=\"http://en.wikipedia.org/wiki/Code_point\">code point</a>.</p>","class_methods":[{"html_id":"bar-class-method","name":"bar","abstract":false,"location":{"filename":"src/nglib/grid/grid.cr","line_number":10,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L10"},"def":{"name":"bar","visibility":"Public","body":"'#'"}}]},{"html_id":"nglib/Int","path":"Int.html","kind":"struct","full_name":"Int","name":"Int","abstract":true,"superclass":{"html_id":"nglib/Number","kind":"struct","full_name":"Number","name":"Number"},"ancestors":[{"html_id":"nglib/Number","kind":"struct","full_name":"Number","name":"Number"},{"html_id":"nglib/Steppable","kind":"module","full_name":"Steppable","name":"Steppable"},{"html_id":"nglib/Comparable","kind":"module","full_name":"Comparable","name":"Comparable"},{"html_id":"nglib/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"nglib/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/nglib/grid/grid.cr","line_number":3,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L3"}],"repository_name":"nglib","program":false,"enum":false,"alias":false,"const":false,"doc":"Int is the base type of all integer types.\n\nThere are four signed integer types: `Int8`, `Int16`, `Int32` and `Int64`,\nbeing able to represent numbers of 8, 16, 32 and 64 bits respectively.\nThere are four unsigned integer types: `UInt8`, `UInt16`, `UInt32` and `UInt64`.\n\nAn integer literal is an optional `+` or `-` sign, followed by\na sequence of digits and underscores, optionally followed by a suffix.\nIf no suffix is present, the literal's type is `Int32`, or `Int64` if the\nnumber doesn't fit into an `Int32`:\n\n```\n1 # Int32\n\n1_i8  # Int8\n1_i16 # Int16\n1_i32 # Int32\n1_i64 # Int64\n\n1_u8  # UInt8\n1_u16 # UInt16\n1_u32 # UInt32\n1_u64 # UInt64\n\n+10 # Int32\n-20 # Int32\n\n2147483648 # Int64\n```\n\nLiterals without a suffix that are larger than `Int64::MAX` represent a\n`UInt64` if the number fits, e.g. `9223372036854775808` and\n`0x80000000_00000000`. This behavior is deprecated and will become an error in\nthe future.\n\nThe underscore `_` before the suffix is optional.\n\nUnderscores can be used to make some numbers more readable:\n\n```\n1_000_000 # better than 1000000\n```\n\nBinary numbers start with `0b`:\n\n```\n0b1101 # == 13\n```\n\nOctal numbers start with `0o`:\n\n```\n0o123 # == 83\n```\n\nHexadecimal numbers start with `0x`:\n\n```\n0xFE012D # == 16646445\n0xfe012d # == 16646445\n```\n\nSee [`Integer` literals](https://crystal-lang.org/reference/syntax_and_semantics/literals/integers.html) in the language reference.","summary":"<p>Int is the base type of all integer types.</p>","class_methods":[{"html_id":"bar-class-method","name":"bar","abstract":false,"location":{"filename":"src/nglib/grid/grid.cr","line_number":4,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L4"},"def":{"name":"bar","visibility":"Public","body":"-1"}}]},{"html_id":"nglib/NgLib","path":"NgLib.html","kind":"module","full_name":"NgLib","name":"NgLib","abstract":false,"locations":[{"filename":"src/nglib/data_structure/aatree_map.cr","line_number":1,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_map.cr#L1"},{"filename":"src/nglib/data_structure/aatree_multiset.cr","line_number":1,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_multiset.cr#L1"},{"filename":"src/nglib/data_structure/aatree_set.cr","line_number":1,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_set.cr#L1"},{"filename":"src/nglib/data_structure/dynamic_range_sum.cr","line_number":1,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/dynamic_range_sum.cr#L1"},{"filename":"src/nglib/data_structure/dynamic_rectangle_sum.cr","line_number":1,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/dynamic_rectangle_sum.cr#L1"},{"filename":"src/nglib/data_structure/mex_set.cr","line_number":4,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/mex_set.cr#L4"},{"filename":"src/nglib/data_structure/potentialized_disjoint_set.cr","line_number":1,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/potentialized_disjoint_set.cr#L1"},{"filename":"src/nglib/data_structure/priority_sum.cr","line_number":3,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/priority_sum.cr#L3"},{"filename":"src/nglib/data_structure/slide_minmax.cr","line_number":1,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/slide_minmax.cr#L1"},{"filename":"src/nglib/data_structure/sparse_table.cr","line_number":1,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/sparse_table.cr#L1"},{"filename":"src/nglib/data_structure/static_range_frequency.cr","line_number":1,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/static_range_frequency.cr#L1"},{"filename":"src/nglib/data_structure/static_range_sum.cr","line_number":1,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/static_range_sum.cr#L1"},{"filename":"src/nglib/data_structure/static_rectangle_sum.cr","line_number":1,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/static_rectangle_sum.cr#L1"},{"filename":"src/nglib/data_structure/succinct_bit_vector.cr","line_number":1,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/succinct_bit_vector.cr#L1"},{"filename":"src/nglib/data_structure/wavelet_matrix.cr","line_number":3,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/wavelet_matrix.cr#L3"},{"filename":"src/nglib/graph/bfs.cr","line_number":3,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/bfs.cr#L3"},{"filename":"src/nglib/graph/binary_bfs.cr","line_number":3,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/binary_bfs.cr#L3"},{"filename":"src/nglib/graph/dijkstra.cr","line_number":3,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/dijkstra.cr#L3"},{"filename":"src/nglib/graph/euler_tour_tree.cr","line_number":3,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/euler_tour_tree.cr#L3"},{"filename":"src/nglib/graph/floyd_warshall.cr","line_number":1,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/floyd_warshall.cr#L1"},{"filename":"src/nglib/graph/lca.cr","line_number":3,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/lca.cr#L3"},{"filename":"src/nglib/graph/max_flow.cr","line_number":1,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/max_flow.cr#L1"},{"filename":"src/nglib/graph/mst.cr","line_number":3,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/mst.cr#L3"},{"filename":"src/nglib/graph/radix_dijkstra.cr","line_number":3,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/radix_dijkstra.cr#L3"},{"filename":"src/nglib/graph/scc.cr","line_number":1,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/scc.cr#L1"},{"filename":"src/nglib/graph/tsp.cr","line_number":1,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/tsp.cr#L1"},{"filename":"src/nglib/graph/weighted_edge.cr","line_number":1,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/weighted_edge.cr#L1"},{"filename":"src/nglib/grid/grid.cr","line_number":15,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L15"},{"filename":"src/nglib/string/rolling_hash.cr","line_number":1,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/string/rolling_hash.cr#L1"},{"filename":"src/nglib/utils/fastin.cr","line_number":1,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/utils/fastin.cr#L1"}],"repository_name":"nglib","program":false,"enum":false,"alias":false,"const":false,"types":[{"html_id":"nglib/NgLib/AATreeMap","path":"NgLib/AATreeMap.html","kind":"class","full_name":"NgLib::AATreeMap(K, V)","name":"AATreeMap","abstract":false,"superclass":{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"nglib/Enumerable","kind":"module","full_name":"Enumerable","name":"Enumerable"},{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"nglib/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/nglib/data_structure/aatree_map.cr","line_number":8,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_map.cr#L8"}],"repository_name":"nglib","program":false,"enum":false,"alias":false,"const":false,"included_modules":[{"html_id":"nglib/Enumerable","kind":"module","full_name":"Enumerable","name":"Enumerable"}],"namespace":{"html_id":"nglib/NgLib","kind":"module","full_name":"NgLib","name":"NgLib"},"doc":"順序付き連想配列です。\n\n平衡二分探索木として [AA木](https://ja.wikipedia.org/wiki/AA%E6%9C%A8) を使用しています。\n性能は赤黒木の方が良いことが多い気がします。\n\nC++の標準ライブラリの `multiset` と違って、$k$ 番目の値が取り出せることなどが魅力的です。","summary":"<p>順序付き連想配列です。</p>","constructors":[{"html_id":"new(enumerable:Enumerable(Tuple(K,V)))-class-method","name":"new","abstract":false,"args":[{"name":"enumerable","external_name":"enumerable","restriction":"Enumerable(::Tuple(K, V))"}],"args_string":"(enumerable : Enumerable(Tuple(K, V)))","args_html":"(enumerable : Enumerable(Tuple(K, V)))","location":{"filename":"src/nglib/data_structure/aatree_map.cr","line_number":195,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_map.cr#L195"},"def":{"name":"new","args":[{"name":"enumerable","external_name":"enumerable","restriction":"Enumerable(::Tuple(K, V))"}],"visibility":"Public","body":"_ = AATreeMap(K, V).allocate\n_.initialize(enumerable)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"html_id":"new(default:V)-class-method","name":"new","abstract":false,"args":[{"name":"default","external_name":"default","restriction":"V"}],"args_string":"(default : V)","args_html":"(default : V)","location":{"filename":"src/nglib/data_structure/aatree_map.cr","line_number":190,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_map.cr#L190"},"def":{"name":"new","args":[{"name":"default","external_name":"default","restriction":"V"}],"visibility":"Public","body":"_ = AATreeMap(K, V).allocate\n_.initialize(default)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"html_id":"new-class-method","name":"new","abstract":false,"location":{"filename":"src/nglib/data_structure/aatree_map.cr","line_number":184,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_map.cr#L184"},"def":{"name":"new","visibility":"Public","body":"_ = AATreeMap(K, V).allocate\n_.initialize\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"<<(item:Tuple(K,V)):Nil-instance-method","name":"<<","abstract":false,"args":[{"name":"item","external_name":"item","restriction":"::Tuple(K, V)"}],"args_string":"(item : Tuple(K, V)) : Nil","args_html":"(item : Tuple(K, V)) : Nil","location":{"filename":"src/nglib/data_structure/aatree_map.cr","line_number":439,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_map.cr#L439"},"def":{"name":"<<","args":[{"name":"item","external_name":"item","restriction":"::Tuple(K, V)"}],"return_type":"Nil","visibility":"Public","body":"upsert(item[0], item[1])"}},{"html_id":"[](key:K):V-instance-method","name":"[]","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"K"}],"args_string":"(key : K) : V","args_html":"(key : K) : V","location":{"filename":"src/nglib/data_structure/aatree_map.cr","line_number":443,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_map.cr#L443"},"def":{"name":"[]","args":[{"name":"key","external_name":"key","restriction":"K"}],"return_type":"V","visibility":"Public","body":"if @root.nil? && (!@default.nil?)\n  return @default.not_nil!\nend\nif @root\nelse\n  raise(KeyError.new(\"Missing key: #{key.inspect}\"))\nend\nnode = find_node(@root, key)\nif (node.not_nil!.key != key) && (!@default.nil?)\n  return @default.not_nil!\nend\nif node.not_nil!.key != key\n  raise(KeyError.new(\"Missing key: #{key.inspect}\"))\nend\nnode.not_nil!.value\n"}},{"html_id":"[]=(key:K,value:V):V-instance-method","name":"[]=","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"K"},{"name":"value","external_name":"value","restriction":"V"}],"args_string":"(key : K, value : V) : V","args_html":"(key : K, value : V) : V","location":{"filename":"src/nglib/data_structure/aatree_map.cr","line_number":459,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_map.cr#L459"},"def":{"name":"[]=","args":[{"name":"key","external_name":"key","restriction":"K"},{"name":"value","external_name":"value","restriction":"V"}],"return_type":"V","visibility":"Public","body":"upsert(key, value)\nvalue\n"}},{"html_id":"[]?(key:K):V|Nil-instance-method","name":"[]?","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"K"}],"args_string":"(key : K) : V | Nil","args_html":"(key : K) : V | Nil","location":{"filename":"src/nglib/data_structure/aatree_map.cr","line_number":452,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_map.cr#L452"},"def":{"name":"[]?","args":[{"name":"key","external_name":"key","restriction":"K"}],"return_type":"V | ::Nil","visibility":"Public","body":"if @root.nil?\n  return @default\nend\nnode = find_node(@root, key)\nif node.not_nil!.key != key\n  return @default\nend\nnode.not_nil!.value\n"}},{"html_id":"at(k:Int):Tuple(K,V)-instance-method","name":"at","abstract":false,"args":[{"name":"k","external_name":"k","restriction":"Int"}],"args_string":"(k : Int) : Tuple(K, V)","args_html":"(k : <a href=\"../Int.html\">Int</a>) : Tuple(K, V)","location":{"filename":"src/nglib/data_structure/aatree_map.cr","line_number":219,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_map.cr#L219"},"def":{"name":"at","args":[{"name":"k","external_name":"k","restriction":"Int"}],"return_type":"::Tuple(K, V)","visibility":"Public","body":"if k < 0\n  k = k + size\nend\nif 0 <= k && k < size\nelse\n  raise(IndexError.new)\nend\nnode = @root\nk = k + 1\nloop do\n  left_size = (node.not_nil!.left ? node.not_nil!.left.not_nil!.size : 0) + 1\n  if left_size == k\n    break\n  end\n  if k < left_size\n    node = node.not_nil!.left\n  else\n    node = node.not_nil!.right\n    k = k - left_size\n  end\nend\n{node.not_nil!.key, node.not_nil!.value}\n"}},{"html_id":"at?(k:Int):Tuple(K,V)|Nil-instance-method","name":"at?","abstract":false,"args":[{"name":"k","external_name":"k","restriction":"Int"}],"args_string":"(k : Int) : Tuple(K, V) | Nil","args_html":"(k : <a href=\"../Int.html\">Int</a>) : Tuple(K, V) | Nil","location":{"filename":"src/nglib/data_structure/aatree_map.cr","line_number":238,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_map.cr#L238"},"def":{"name":"at?","args":[{"name":"k","external_name":"k","restriction":"Int"}],"return_type":"::Tuple(K, V) | ::Nil","visibility":"Public","body":"if k < 0\n  k = k + size\nend\nif 0 <= k && k < size\nelse\n  return nil\nend\nat(k)\n"}},{"html_id":"clear-instance-method","name":"clear","abstract":false,"location":{"filename":"src/nglib/data_structure/aatree_map.cr","line_number":211,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_map.cr#L211"},"def":{"name":"clear","visibility":"Public","body":"@root = nil"}},{"html_id":"concat(elems):self-instance-method","name":"concat","abstract":false,"args":[{"name":"elems","external_name":"elems","restriction":""}],"args_string":"(elems) : self","args_html":"(elems) : <span class=\"k\">self</span>","location":{"filename":"src/nglib/data_structure/aatree_map.cr","line_number":201,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_map.cr#L201"},"def":{"name":"concat","args":[{"name":"elems","external_name":"elems","restriction":""}],"return_type":"self","visibility":"Public","body":"elems.each do |elem|\n  self << elem\nend\nself\n"}},{"html_id":"delete_at(k:Int)-instance-method","name":"delete_at","abstract":false,"args":[{"name":"k","external_name":"k","restriction":"Int"}],"args_string":"(k : Int)","args_html":"(k : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/data_structure/aatree_map.cr","line_number":351,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_map.cr#L351"},"def":{"name":"delete_at","args":[{"name":"k","external_name":"k","restriction":"Int"}],"visibility":"Public","body":"key = key_at?(k)\nif key.nil?\n  return\nend\ndelete_key(key)\n"}},{"html_id":"delete_key(key:K):Bool-instance-method","name":"delete_key","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"K"}],"args_string":"(key : K) : Bool","args_html":"(key : K) : Bool","location":{"filename":"src/nglib/data_structure/aatree_map.cr","line_number":297,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_map.cr#L297"},"def":{"name":"delete_key","args":[{"name":"key","external_name":"key","restriction":"K"}],"return_type":"Bool","visibility":"Public","body":"if @root\nelse\n  return false\nend\nnode = find_node(@root, key)\nif node.not_nil!.key == key\nelse\n  return false\nend\nif node.not_nil!.left || node.not_nil!.right\n  child = find_node(node.not_nil!.left ? node.not_nil!.left : node.not_nil!.right, key)\n  node.not_nil!.assign(child.not_nil!)\n  node = child\nend\npar = node.not_nil!.parent\nif par\n  if par.not_nil!.left_side?(node)\n    par.left = nil\n  else\n    par.right = nil\n  end\nelse\n  @root = nil\nend\nnode = par\nwhile node\n  new_level = {level(node.left), level(node.right)}.min + 1\n  if new_level < node.level\n    node.level = new_level\n    if new_level < (level(node.right))\n      node.right.not_nil!.level = new_level\n    end\n  end\n  node.size = node.size - 1\n  node = (skew(node)).not_nil!\n  if skew(node.right)\n    skew(node.right.not_nil!.right)\n  end\n  node = split(node)\n  split(node.not_nil!.right)\n  if node.not_nil!.parent\n  else\n    @root = node\n    break\n  end\n  node = node.not_nil!.parent\nend\ntrue\n"}},{"html_id":"each(&:Tuple(K,V)->)-instance-method","name":"each","doc":"Must yield this collection's elements to the block.","summary":"<p>Must yield this collection's elements to the block.</p>","abstract":false,"location":{"filename":"src/nglib/data_structure/aatree_map.cr","line_number":272,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_map.cr#L272"},"def":{"name":"each","yields":1,"block_arity":1,"block_arg":{"name":"","external_name":"","restriction":"(::Tuple(K, V) ->)"},"visibility":"Public","body":"node = begin_node\nwhile node\n  pr = {node.not_nil!.key, node.not_nil!.value}\n  yield pr\n  node = next_node(node.not_nil!)\nend\n"}},{"html_id":"each_key(&:K->)-instance-method","name":"each_key","abstract":false,"location":{"filename":"src/nglib/data_structure/aatree_map.cr","line_number":260,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_map.cr#L260"},"def":{"name":"each_key","yields":1,"block_arity":1,"block_arg":{"name":"","external_name":"","restriction":"(K ->)"},"visibility":"Public","body":"each do |key, _|\n  yield key\nend"}},{"html_id":"each_value(&:V->)-instance-method","name":"each_value","abstract":false,"location":{"filename":"src/nglib/data_structure/aatree_map.cr","line_number":266,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_map.cr#L266"},"def":{"name":"each_value","yields":1,"block_arity":1,"block_arg":{"name":"","external_name":"","restriction":"(V ->)"},"visibility":"Public","body":"each do |_, value|\n  yield value\nend"}},{"html_id":"empty?:Bool-instance-method","name":"empty?","doc":"Returns `true` if `self` is empty, `false` otherwise.\n\n```\n([] of Int32).empty? # => true\n([1]).empty?         # => false\n```","summary":"<p>Returns <code>true</code> if <code>self</code> is empty, <code>false</code> otherwise.</p>","abstract":false,"location":{"filename":"src/nglib/data_structure/aatree_map.cr","line_number":215,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_map.cr#L215"},"def":{"name":"empty?","return_type":"Bool","visibility":"Public","body":"@root.nil?"}},{"html_id":"greater_equal_index(key:K):Int32|Nil-instance-method","name":"greater_equal_index","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"K"}],"args_string":"(key : K) : Int32 | Nil","args_html":"(key : K) : Int32 | Nil","location":{"filename":"src/nglib/data_structure/aatree_map.cr","line_number":408,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_map.cr#L408"},"def":{"name":"greater_equal_index","args":[{"name":"key","external_name":"key","restriction":"K"}],"return_type":"Int32 | ::Nil","visibility":"Public","body":"index = lower_bound_index(key)\nindex == size ? nil : index\n"}},{"html_id":"greater_index(key:K):Int32|Nil-instance-method","name":"greater_index","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"K"}],"args_string":"(key : K) : Int32 | Nil","args_html":"(key : K) : Int32 | Nil","location":{"filename":"src/nglib/data_structure/aatree_map.cr","line_number":403,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_map.cr#L403"},"def":{"name":"greater_index","args":[{"name":"key","external_name":"key","restriction":"K"}],"return_type":"Int32 | ::Nil","visibility":"Public","body":"index = upper_bound_index(key)\nindex == size ? nil : index\n"}},{"html_id":"has_key?(key:K):Bool-instance-method","name":"has_key?","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"K"}],"args_string":"(key : K) : Bool","args_html":"(key : K) : Bool","location":{"filename":"src/nglib/data_structure/aatree_map.cr","line_number":357,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_map.cr#L357"},"def":{"name":"has_key?","args":[{"name":"key","external_name":"key","restriction":"K"}],"return_type":"Bool","visibility":"Public","body":"if @root\nelse\n  return false\nend\nnode = find_node(@root, key)\nnode.nil? ? false : node.key == key\n"}},{"html_id":"includes?(key:K,value:V):Bool-instance-method","name":"includes?","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"K"},{"name":"value","external_name":"value","restriction":"V"}],"args_string":"(key : K, value : V) : Bool","args_html":"(key : K, value : V) : Bool","location":{"filename":"src/nglib/data_structure/aatree_map.cr","line_number":206,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_map.cr#L206"},"def":{"name":"includes?","args":[{"name":"key","external_name":"key","restriction":"K"},{"name":"value","external_name":"value","restriction":"V"}],"return_type":"Bool","visibility":"Public","body":"node = find_node(@root, key)\nnode.nil? ? false : (node.key == key) && (node.value == value)\n"}},{"html_id":"inspect(io:IO)-instance-method","name":"inspect","doc":"Appends a String representation of this object\nwhich includes its class name, its object address\nand the values of all instance variables.\n\n```\nclass Person\n  def initialize(@name : String, @age : Int32)\n  end\nend\n\nPerson.new(\"John\", 32).inspect # => #<Person:0x10fd31f20 @name=\"John\", @age=32>\n```","summary":"<p>Appends a String representation of this object which includes its class name, its object address and the values of all instance variables.</p>","abstract":false,"args":[{"name":"io","external_name":"io","restriction":"IO"}],"args_string":"(io : IO)","args_html":"(io : IO)","location":{"filename":"src/nglib/data_structure/aatree_map.cr","line_number":435,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_map.cr#L435"},"def":{"name":"inspect","args":[{"name":"io","external_name":"io","restriction":"IO"}],"visibility":"Public","body":"to_s(io)"}},{"html_id":"key_at(k:Int):K-instance-method","name":"key_at","abstract":false,"args":[{"name":"k","external_name":"k","restriction":"Int"}],"args_string":"(k : Int) : K","args_html":"(k : <a href=\"../Int.html\">Int</a>) : K","location":{"filename":"src/nglib/data_structure/aatree_map.cr","line_number":244,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_map.cr#L244"},"def":{"name":"key_at","args":[{"name":"k","external_name":"k","restriction":"Int"}],"return_type":"K","visibility":"Public","body":"(at(k))[0]"}},{"html_id":"key_at?(k:Int):K|Nil-instance-method","name":"key_at?","abstract":false,"args":[{"name":"k","external_name":"k","restriction":"Int"}],"args_string":"(k : Int) : K | Nil","args_html":"(k : <a href=\"../Int.html\">Int</a>) : K | Nil","location":{"filename":"src/nglib/data_structure/aatree_map.cr","line_number":248,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_map.cr#L248"},"def":{"name":"key_at?","args":[{"name":"k","external_name":"k","restriction":"Int"}],"return_type":"K | ::Nil","visibility":"Public","body":"t = at?(k)\nt ? t[0] : nil\n"}},{"html_id":"keys:Array(K)-instance-method","name":"keys","abstract":false,"location":{"filename":"src/nglib/data_structure/aatree_map.cr","line_number":281,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_map.cr#L281"},"def":{"name":"keys","return_type":"Array(K)","visibility":"Public","body":"res = Array(K).new\neach do |key, _|\n  res << key\nend\nres\n"}},{"html_id":"less_equal_index(key:K):Int32|Nil-instance-method","name":"less_equal_index","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"K"}],"args_string":"(key : K) : Int32 | Nil","args_html":"(key : K) : Int32 | Nil","location":{"filename":"src/nglib/data_structure/aatree_map.cr","line_number":398,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_map.cr#L398"},"def":{"name":"less_equal_index","args":[{"name":"key","external_name":"key","restriction":"K"}],"return_type":"Int32 | ::Nil","visibility":"Public","body":"index = lower_bound_index(key)\nkey == (at?(index)) ? index : (index == 0 ? nil : index - 1)\n"}},{"html_id":"less_index(key:K):Int32|Nil-instance-method","name":"less_index","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"K"}],"args_string":"(key : K) : Int32 | Nil","args_html":"(key : K) : Int32 | Nil","location":{"filename":"src/nglib/data_structure/aatree_map.cr","line_number":393,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_map.cr#L393"},"def":{"name":"less_index","args":[{"name":"key","external_name":"key","restriction":"K"}],"return_type":"Int32 | ::Nil","visibility":"Public","body":"index = lower_bound_index(key)\nindex == 0 ? nil : index - 1\n"}},{"html_id":"lower_bound_index(key:K):Int32-instance-method","name":"lower_bound_index","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"K"}],"args_string":"(key : K) : Int32","args_html":"(key : K) : Int32","location":{"filename":"src/nglib/data_structure/aatree_map.cr","line_number":363,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_map.cr#L363"},"def":{"name":"lower_bound_index","args":[{"name":"key","external_name":"key","restriction":"K"}],"return_type":"Int32","visibility":"Public","body":"node = @root\nif node\nelse\n  return 0\nend\nindex = 0\nwhile node\n  if key <= node.not_nil!.key\n    node = node.not_nil!.left\n  else\n    index = index + ((node.not_nil!.left ? node.not_nil!.left.not_nil!.size : 0) + 1)\n    node = node.not_nil!.right\n  end\nend\nindex\n"}},{"html_id":"size:Int32-instance-method","name":"size","doc":"Returns the number of elements in the collection.\n\n```\n[1, 2, 3, 4].size # => 4\n```","summary":"<p>Returns the number of elements in the collection.</p>","abstract":false,"location":{"filename":"src/nglib/data_structure/aatree_map.cr","line_number":413,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_map.cr#L413"},"def":{"name":"size","return_type":"Int32","visibility":"Public","body":"@root ? @root.not_nil!.size : 0"}},{"html_id":"to_a:Array(Tuple(K,V))-instance-method","name":"to_a","doc":"Returns an `Array` with all the elements in the collection.\n\n```\n(1..5).to_a # => [1, 2, 3, 4, 5]\n```","summary":"<p>Returns an <code>Array</code> with all the elements in the collection.</p>","abstract":false,"location":{"filename":"src/nglib/data_structure/aatree_map.cr","line_number":417,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_map.cr#L417"},"def":{"name":"to_a","return_type":"Array(::Tuple(K, V))","visibility":"Public","body":"res = Array(::Tuple(K, V)).new\nif @root\nelse\n  return res\nend\ndfs = uninitialized (Node(K, V) -> Nil)\ndfs = ->(node : Node(K, V)) do\n  if node.left\n    dfs.call(node.left.not_nil!)\n  end\n  res << {node.key, node.value}\n  if node.right\n    dfs.call(node.right.not_nil!)\n  end\n  nil\nend\ndfs.call(@root.not_nil!)\nres\n"}},{"html_id":"to_s(io:IO):Nil-instance-method","name":"to_s","doc":"Appends a short String representation of this object\nwhich includes its class name and its object address.\n\n```\nclass Person\n  def initialize(@name : String, @age : Int32)\n  end\nend\n\nPerson.new(\"John\", 32).to_s # => #<Person:0x10a199f20>\n```","summary":"<p>Appends a short String representation of this object which includes its class name and its object address.</p>","abstract":false,"args":[{"name":"io","external_name":"io","restriction":"IO"}],"args_string":"(io : IO) : Nil","args_html":"(io : IO) : Nil","location":{"filename":"src/nglib/data_structure/aatree_map.cr","line_number":431,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_map.cr#L431"},"def":{"name":"to_s","args":[{"name":"io","external_name":"io","restriction":"IO"}],"return_type":"Nil","visibility":"Public","body":"io << ((\"{\" + (to_a.map do |key, value|\n  \"#{key} => #{value}\"\nend.join(\", \"))) + \"}\")"}},{"html_id":"upper_bound_index(key:K):Int32-instance-method","name":"upper_bound_index","abstract":false,"args":[{"name":"key","external_name":"key","restriction":"K"}],"args_string":"(key : K) : Int32","args_html":"(key : K) : Int32","location":{"filename":"src/nglib/data_structure/aatree_map.cr","line_number":378,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_map.cr#L378"},"def":{"name":"upper_bound_index","args":[{"name":"key","external_name":"key","restriction":"K"}],"return_type":"Int32","visibility":"Public","body":"node = @root\nif node\nelse\n  return 0\nend\nindex = 0\nwhile node\n  if key < node.not_nil!.key\n    node = node.not_nil!.left\n  else\n    index = index + ((node.not_nil!.left ? node.not_nil!.left.not_nil!.size : 0) + 1)\n    node = node.not_nil!.right\n  end\nend\nindex\n"}},{"html_id":"value_at(k:Int):V-instance-method","name":"value_at","abstract":false,"args":[{"name":"k","external_name":"k","restriction":"Int"}],"args_string":"(k : Int) : V","args_html":"(k : <a href=\"../Int.html\">Int</a>) : V","location":{"filename":"src/nglib/data_structure/aatree_map.cr","line_number":252,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_map.cr#L252"},"def":{"name":"value_at","args":[{"name":"k","external_name":"k","restriction":"Int"}],"return_type":"V","visibility":"Public","body":"(at(k))[1]"}},{"html_id":"value_at?(k:Int):V|Nil-instance-method","name":"value_at?","abstract":false,"args":[{"name":"k","external_name":"k","restriction":"Int"}],"args_string":"(k : Int) : V | Nil","args_html":"(k : <a href=\"../Int.html\">Int</a>) : V | Nil","location":{"filename":"src/nglib/data_structure/aatree_map.cr","line_number":256,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_map.cr#L256"},"def":{"name":"value_at?","args":[{"name":"k","external_name":"k","restriction":"Int"}],"return_type":"V | ::Nil","visibility":"Public","body":"t = at?(k)\nt ? t[1] : nil\n"}},{"html_id":"values:Array(V)-instance-method","name":"values","abstract":false,"location":{"filename":"src/nglib/data_structure/aatree_map.cr","line_number":289,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_map.cr#L289"},"def":{"name":"values","return_type":"Array(V)","visibility":"Public","body":"res = Array(V).new\neach do |_, value|\n  res << value\nend\nres\n"}}]},{"html_id":"nglib/NgLib/AATreeMultiset","path":"NgLib/AATreeMultiset.html","kind":"class","full_name":"NgLib::AATreeMultiset(T)","name":"AATreeMultiset","abstract":false,"superclass":{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"nglib/Enumerable","kind":"module","full_name":"Enumerable","name":"Enumerable"},{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"nglib/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/nglib/data_structure/aatree_multiset.cr","line_number":8,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_multiset.cr#L8"}],"repository_name":"nglib","program":false,"enum":false,"alias":false,"const":false,"included_modules":[{"html_id":"nglib/Enumerable","kind":"module","full_name":"Enumerable","name":"Enumerable"}],"namespace":{"html_id":"nglib/NgLib","kind":"module","full_name":"NgLib","name":"NgLib"},"doc":"順序付き多重集合です。\n\n平衡二分探索木として [AA木](https://ja.wikipedia.org/wiki/AA%E6%9C%A8) を使用しています。\n性能は赤黒木の方が良いことが多い気がします。\n\nC++の標準ライブラリの `multiset` と違って、$k$ 番目の値が取り出せることなどが魅力的です。","summary":"<p>順序付き多重集合です。</p>","constructors":[{"html_id":"new(enumerable:Enumerable(T))-class-method","name":"new","abstract":false,"args":[{"name":"enumerable","external_name":"enumerable","restriction":"Enumerable(T)"}],"args_string":"(enumerable : Enumerable(T))","args_html":"(enumerable : Enumerable(T))","location":{"filename":"src/nglib/data_structure/aatree_multiset.cr","line_number":176,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_multiset.cr#L176"},"def":{"name":"new","args":[{"name":"enumerable","external_name":"enumerable","restriction":"Enumerable(T)"}],"visibility":"Public","body":"_ = AATreeMultiset(T).allocate\n_.initialize(enumerable)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"html_id":"new-class-method","name":"new","abstract":false,"location":{"filename":"src/nglib/data_structure/aatree_multiset.cr","line_number":171,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_multiset.cr#L171"},"def":{"name":"new","visibility":"Public","body":"_ = AATreeMultiset(T).allocate\n_.initialize\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"<<(val:T):Bool-instance-method","name":"<<","abstract":false,"args":[{"name":"val","external_name":"val","restriction":"T"}],"args_string":"(val : T) : Bool","args_html":"(val : T) : Bool","location":{"filename":"src/nglib/data_structure/aatree_multiset.cr","line_number":427,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_multiset.cr#L427"},"def":{"name":"<<","args":[{"name":"val","external_name":"val","restriction":"T"}],"return_type":"Bool","visibility":"Public","body":"add?(val)"}},{"html_id":"==(other:AATreeSet(T)):Bool-instance-method","name":"==","abstract":false,"args":[{"name":"other","external_name":"other","restriction":"AATreeSet(T)"}],"args_string":"(other : AATreeSet(T)) : Bool","args_html":"(other : <a href=\"../NgLib/AATreeSet.html\">AATreeSet</a>(T)) : Bool","location":{"filename":"src/nglib/data_structure/aatree_multiset.cr","line_number":423,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_multiset.cr#L423"},"def":{"name":"==","args":[{"name":"other","external_name":"other","restriction":"AATreeSet(T)"}],"return_type":"Bool","visibility":"Public","body":"self.to_a == other.to_a"}},{"html_id":"[](k:Int):T-instance-method","name":"[]","abstract":false,"args":[{"name":"k","external_name":"k","restriction":"Int"}],"args_string":"(k : Int) : T","args_html":"(k : <a href=\"../Int.html\">Int</a>) : T","location":{"filename":"src/nglib/data_structure/aatree_multiset.cr","line_number":431,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_multiset.cr#L431"},"def":{"name":"[]","args":[{"name":"k","external_name":"k","restriction":"Int"}],"return_type":"T","visibility":"Public","body":"at(k)"}},{"html_id":"[]?(k:Int):T|Nil-instance-method","name":"[]?","abstract":false,"args":[{"name":"k","external_name":"k","restriction":"Int"}],"args_string":"(k : Int) : T | Nil","args_html":"(k : <a href=\"../Int.html\">Int</a>) : T | Nil","location":{"filename":"src/nglib/data_structure/aatree_multiset.cr","line_number":435,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_multiset.cr#L435"},"def":{"name":"[]?","args":[{"name":"k","external_name":"k","restriction":"Int"}],"return_type":"T | Nil","visibility":"Public","body":"at?(k)"}},{"html_id":"add(val:T):Nil-instance-method","name":"add","abstract":false,"args":[{"name":"val","external_name":"val","restriction":"T"}],"args_string":"(val : T) : Nil","args_html":"(val : T) : Nil","location":{"filename":"src/nglib/data_structure/aatree_multiset.cr","line_number":231,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_multiset.cr#L231"},"def":{"name":"add","args":[{"name":"val","external_name":"val","restriction":"T"}],"return_type":"Nil","visibility":"Public","body":"add?(val)\nnil\n"}},{"html_id":"add?(val:T):Bool-instance-method","name":"add?","abstract":false,"args":[{"name":"val","external_name":"val","restriction":"T"}],"args_string":"(val : T) : Bool","args_html":"(val : T) : Bool","location":{"filename":"src/nglib/data_structure/aatree_multiset.cr","line_number":236,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_multiset.cr#L236"},"def":{"name":"add?","args":[{"name":"val","external_name":"val","restriction":"T"}],"return_type":"Bool","visibility":"Public","body":"if @root\nelse\n  @root = Node.new(val)\n  return true\nend\nnode = find_node2(@root, val)\nnew_node = Node.new(val)\nif val <= node.not_nil!.key\n  node.not_nil!.left = new_node\nelse\n  node.not_nil!.right = new_node\nend\nnew_node.not_nil!.parent = node\nnode = new_node\nwhile node\n  node = split(skew(node))\n  if node.not_nil!.parent\n  else\n    @root = node\n    break\n  end\n  node = node.not_nil!.parent\n  __temp_50 = node.not_nil!\n  __temp_50.size = __temp_50.size + 1\nend\ntrue\n"}},{"html_id":"at(k:Int):T-instance-method","name":"at","abstract":false,"args":[{"name":"k","external_name":"k","restriction":"Int"}],"args_string":"(k : Int) : T","args_html":"(k : <a href=\"../Int.html\">Int</a>) : T","location":{"filename":"src/nglib/data_structure/aatree_multiset.cr","line_number":200,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_multiset.cr#L200"},"def":{"name":"at","args":[{"name":"k","external_name":"k","restriction":"Int"}],"return_type":"T","visibility":"Public","body":"if 0 <= k && k < size\nelse\n  raise(IndexError.new)\nend\nnode = @root\nk = k + 1\nloop do\n  left_size = (node.not_nil!.left ? node.not_nil!.left.not_nil!.size : 0) + 1\n  if left_size == k\n    break\n  end\n  if k < left_size\n    node = node.not_nil!.left\n  else\n    node = node.not_nil!.right\n    k = k - left_size\n  end\nend\nnode.not_nil!.key\n"}},{"html_id":"at?(k:Int):T|Nil-instance-method","name":"at?","abstract":false,"args":[{"name":"k","external_name":"k","restriction":"Int"}],"args_string":"(k : Int) : T | Nil","args_html":"(k : <a href=\"../Int.html\">Int</a>) : T | Nil","location":{"filename":"src/nglib/data_structure/aatree_multiset.cr","line_number":218,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_multiset.cr#L218"},"def":{"name":"at?","args":[{"name":"k","external_name":"k","restriction":"Int"}],"return_type":"T | ::Nil","visibility":"Public","body":"if 0 <= k && k < size\nelse\n  return nil\nend\nat(k)\n"}},{"html_id":"clear-instance-method","name":"clear","abstract":false,"location":{"filename":"src/nglib/data_structure/aatree_multiset.cr","line_number":192,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_multiset.cr#L192"},"def":{"name":"clear","visibility":"Public","body":"@root = nil"}},{"html_id":"concat(elems):self-instance-method","name":"concat","abstract":false,"args":[{"name":"elems","external_name":"elems","restriction":""}],"args_string":"(elems) : self","args_html":"(elems) : <span class=\"k\">self</span>","location":{"filename":"src/nglib/data_structure/aatree_multiset.cr","line_number":182,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_multiset.cr#L182"},"def":{"name":"concat","args":[{"name":"elems","external_name":"elems","restriction":""}],"return_type":"self","visibility":"Public","body":"elems.each do |elem|\n  self << elem\nend\nself\n"}},{"html_id":"count(val:T):Int32-instance-method","name":"count","abstract":false,"args":[{"name":"val","external_name":"val","restriction":"T"}],"args_string":"(val : T) : Int32","args_html":"(val : T) : Int32","location":{"filename":"src/nglib/data_structure/aatree_multiset.cr","line_number":393,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_multiset.cr#L393"},"def":{"name":"count","args":[{"name":"val","external_name":"val","restriction":"T"}],"return_type":"Int32","visibility":"Public","body":"(upper_bound_index(val)) - (lower_bound_index(val))"}},{"html_id":"delete(val:T):Bool-instance-method","name":"delete","abstract":false,"args":[{"name":"val","external_name":"val","restriction":"T"}],"args_string":"(val : T) : Bool","args_html":"(val : T) : Bool","location":{"filename":"src/nglib/data_structure/aatree_multiset.cr","line_number":265,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_multiset.cr#L265"},"def":{"name":"delete","args":[{"name":"val","external_name":"val","restriction":"T"}],"return_type":"Bool","visibility":"Public","body":"if @root\nelse\n  return false\nend\nnode = find_node(@root, val)\nif node.not_nil!.key == val\nelse\n  return false\nend\nif node.not_nil!.left || node.not_nil!.right\n  child = find_node(node.not_nil!.left ? node.not_nil!.left : node.not_nil!.right, val)\n  node.not_nil!.assign(child.not_nil!)\n  node = child\nend\npar = node.not_nil!.parent\nif par\n  if par.not_nil!.left_side?(node)\n    par.left = nil\n  else\n    par.right = nil\n  end\nelse\n  @root = nil\nend\nnode = par\nwhile node\n  new_level = {level(node.left), level(node.right)}.min + 1\n  if new_level < node.level\n    node.level = new_level\n    if new_level < (level(node.right))\n      node.right.not_nil!.level = new_level\n    end\n  end\n  node.size = node.size - 1\n  node = (skew(node)).not_nil!\n  if skew(node.right)\n    skew(node.right.not_nil!.right)\n  end\n  node = split(node)\n  split(node.not_nil!.right)\n  if node.not_nil!.parent\n  else\n    @root = node\n    break\n  end\n  node = node.not_nil!.parent\nend\ntrue\n"}},{"html_id":"delete_at(k:Int):Bool-instance-method","name":"delete_at","abstract":false,"args":[{"name":"k","external_name":"k","restriction":"Int"}],"args_string":"(k : Int) : Bool","args_html":"(k : <a href=\"../Int.html\">Int</a>) : Bool","location":{"filename":"src/nglib/data_structure/aatree_multiset.cr","line_number":314,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_multiset.cr#L314"},"def":{"name":"delete_at","args":[{"name":"k","external_name":"k","restriction":"Int"}],"return_type":"Bool","visibility":"Public","body":"delete(at(k))"}},{"html_id":"delete_at?(k:Int):Bool-instance-method","name":"delete_at?","abstract":false,"args":[{"name":"k","external_name":"k","restriction":"Int"}],"args_string":"(k : Int) : Bool","args_html":"(k : <a href=\"../Int.html\">Int</a>) : Bool","location":{"filename":"src/nglib/data_structure/aatree_multiset.cr","line_number":318,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_multiset.cr#L318"},"def":{"name":"delete_at?","args":[{"name":"k","external_name":"k","restriction":"Int"}],"return_type":"Bool","visibility":"Public","body":"val = at?(k)\nif val\n  delete(val)\nelse\n  false\nend\n"}},{"html_id":"each(&:T->)-instance-method","name":"each","doc":"Must yield this collection's elements to the block.","summary":"<p>Must yield this collection's elements to the block.</p>","abstract":false,"location":{"filename":"src/nglib/data_structure/aatree_multiset.cr","line_number":223,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_multiset.cr#L223"},"def":{"name":"each","yields":1,"block_arity":1,"block_arg":{"name":"","external_name":"","restriction":"(T ->)"},"visibility":"Public","body":"node = begin_node\nwhile node\n  yield node.not_nil!.key\n  node = next_node(node.not_nil!)\nend\n"}},{"html_id":"empty?:Bool-instance-method","name":"empty?","doc":"Returns `true` if `self` is empty, `false` otherwise.\n\n```\n([] of Int32).empty? # => true\n([1]).empty?         # => false\n```","summary":"<p>Returns <code>true</code> if <code>self</code> is empty, <code>false</code> otherwise.</p>","abstract":false,"location":{"filename":"src/nglib/data_structure/aatree_multiset.cr","line_number":196,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_multiset.cr#L196"},"def":{"name":"empty?","return_type":"Bool","visibility":"Public","body":"@root.nil?"}},{"html_id":"first:T-instance-method","name":"first","doc":"Returns the first element in the collection. Raises `Enumerable::EmptyError`\nif the collection is empty.\n\n```\n([1, 2, 3]).first   # => 1\n([] of Int32).first # raises Enumerable::EmptyError\n```","summary":"<p>Returns the first element in the collection.</p>","abstract":false,"location":{"filename":"src/nglib/data_structure/aatree_multiset.cr","line_number":377,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_multiset.cr#L377"},"def":{"name":"first","return_type":"T","visibility":"Public","body":"at(0)"}},{"html_id":"first?:T|Nil-instance-method","name":"first?","doc":"Returns the first element in the collection.\nWhen the collection is empty, returns `nil`.\n\n```\n([1, 2, 3]).first?   # => 1\n([] of Int32).first? # => nil\n```","summary":"<p>Returns the first element in the collection.</p>","abstract":false,"location":{"filename":"src/nglib/data_structure/aatree_multiset.cr","line_number":381,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_multiset.cr#L381"},"def":{"name":"first?","return_type":"T | ::Nil","visibility":"Public","body":"at?(0)"}},{"html_id":"greater_equal_index(val:T):Int32|Nil-instance-method","name":"greater_equal_index","abstract":false,"args":[{"name":"val","external_name":"val","restriction":"T"}],"args_string":"(val : T) : Int32 | Nil","args_html":"(val : T) : Int32 | Nil","location":{"filename":"src/nglib/data_structure/aatree_multiset.cr","line_number":372,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_multiset.cr#L372"},"def":{"name":"greater_equal_index","args":[{"name":"val","external_name":"val","restriction":"T"}],"return_type":"Int32 | ::Nil","visibility":"Public","body":"index = lower_bound_index(val)\nindex == size ? nil : index\n"}},{"html_id":"greater_index(val:T):Int32|Nil-instance-method","name":"greater_index","abstract":false,"args":[{"name":"val","external_name":"val","restriction":"T"}],"args_string":"(val : T) : Int32 | Nil","args_html":"(val : T) : Int32 | Nil","location":{"filename":"src/nglib/data_structure/aatree_multiset.cr","line_number":367,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_multiset.cr#L367"},"def":{"name":"greater_index","args":[{"name":"val","external_name":"val","restriction":"T"}],"return_type":"Int32 | ::Nil","visibility":"Public","body":"index = upper_bound_index(val)\nindex == size ? nil : index\n"}},{"html_id":"includes?(val:T):Bool-instance-method","name":"includes?","abstract":false,"args":[{"name":"val","external_name":"val","restriction":"T"}],"args_string":"(val : T) : Bool","args_html":"(val : T) : Bool","location":{"filename":"src/nglib/data_structure/aatree_multiset.cr","line_number":187,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_multiset.cr#L187"},"def":{"name":"includes?","args":[{"name":"val","external_name":"val","restriction":"T"}],"return_type":"Bool","visibility":"Public","body":"node = find_node(@root, val)\nnode.nil? ? false : node.key == val\n"}},{"html_id":"inspect(io:IO):Nil-instance-method","name":"inspect","doc":"Appends a String representation of this object\nwhich includes its class name, its object address\nand the values of all instance variables.\n\n```\nclass Person\n  def initialize(@name : String, @age : Int32)\n  end\nend\n\nPerson.new(\"John\", 32).inspect # => #<Person:0x10fd31f20 @name=\"John\", @age=32>\n```","summary":"<p>Appends a String representation of this object which includes its class name, its object address and the values of all instance variables.</p>","abstract":false,"args":[{"name":"io","external_name":"io","restriction":"IO"}],"args_string":"(io : IO) : Nil","args_html":"(io : IO) : Nil","location":{"filename":"src/nglib/data_structure/aatree_multiset.cr","line_number":419,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_multiset.cr#L419"},"def":{"name":"inspect","args":[{"name":"io","external_name":"io","restriction":"IO"}],"return_type":"Nil","visibility":"Public","body":"to_s(io)"}},{"html_id":"last:T-instance-method","name":"last","abstract":false,"location":{"filename":"src/nglib/data_structure/aatree_multiset.cr","line_number":385,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_multiset.cr#L385"},"def":{"name":"last","return_type":"T","visibility":"Public","body":"at(size - 1)"}},{"html_id":"last?:T|Nil-instance-method","name":"last?","abstract":false,"location":{"filename":"src/nglib/data_structure/aatree_multiset.cr","line_number":389,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_multiset.cr#L389"},"def":{"name":"last?","return_type":"T | ::Nil","visibility":"Public","body":"at?(size - 1)"}},{"html_id":"less_equal_index(val:T):Int32|Nil-instance-method","name":"less_equal_index","abstract":false,"args":[{"name":"val","external_name":"val","restriction":"T"}],"args_string":"(val : T) : Int32 | Nil","args_html":"(val : T) : Int32 | Nil","location":{"filename":"src/nglib/data_structure/aatree_multiset.cr","line_number":362,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_multiset.cr#L362"},"def":{"name":"less_equal_index","args":[{"name":"val","external_name":"val","restriction":"T"}],"return_type":"Int32 | ::Nil","visibility":"Public","body":"index = lower_bound_index(val)\nval == (at?(index)) ? index : (index == 0 ? nil : index - 1)\n"}},{"html_id":"less_index(val:T):Int32|Nil-instance-method","name":"less_index","abstract":false,"args":[{"name":"val","external_name":"val","restriction":"T"}],"args_string":"(val : T) : Int32 | Nil","args_html":"(val : T) : Int32 | Nil","location":{"filename":"src/nglib/data_structure/aatree_multiset.cr","line_number":357,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_multiset.cr#L357"},"def":{"name":"less_index","args":[{"name":"val","external_name":"val","restriction":"T"}],"return_type":"Int32 | ::Nil","visibility":"Public","body":"index = lower_bound_index(val)\nindex == 0 ? nil : index - 1\n"}},{"html_id":"lower_bound_index(val:T):Int32-instance-method","name":"lower_bound_index","abstract":false,"args":[{"name":"val","external_name":"val","restriction":"T"}],"args_string":"(val : T) : Int32","args_html":"(val : T) : Int32","location":{"filename":"src/nglib/data_structure/aatree_multiset.cr","line_number":327,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_multiset.cr#L327"},"def":{"name":"lower_bound_index","args":[{"name":"val","external_name":"val","restriction":"T"}],"return_type":"Int32","visibility":"Public","body":"node = @root\nif node\nelse\n  return 0\nend\nindex = 0\nwhile node\n  if val <= node.not_nil!.key\n    node = node.not_nil!.left\n  else\n    index = index + ((node.not_nil!.left ? node.not_nil!.left.not_nil!.size : 0) + 1)\n    node = node.not_nil!.right\n  end\nend\nindex\n"}},{"html_id":"size:Int32-instance-method","name":"size","doc":"Returns the number of elements in the collection.\n\n```\n[1, 2, 3, 4].size # => 4\n```","summary":"<p>Returns the number of elements in the collection.</p>","abstract":false,"location":{"filename":"src/nglib/data_structure/aatree_multiset.cr","line_number":397,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_multiset.cr#L397"},"def":{"name":"size","return_type":"Int32","visibility":"Public","body":"@root ? @root.not_nil!.size : 0"}},{"html_id":"to_a:Array(T)-instance-method","name":"to_a","doc":"Returns an `Array` with all the elements in the collection.\n\n```\n(1..5).to_a # => [1, 2, 3, 4, 5]\n```","summary":"<p>Returns an <code>Array</code> with all the elements in the collection.</p>","abstract":false,"location":{"filename":"src/nglib/data_structure/aatree_multiset.cr","line_number":401,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_multiset.cr#L401"},"def":{"name":"to_a","return_type":"Array(T)","visibility":"Public","body":"res = Array(T).new\nif @root\nelse\n  return res\nend\ndfs = uninitialized (Node(T) -> Nil)\ndfs = ->(node : Node(T)) do\n  if node.left\n    dfs.call(node.left.not_nil!)\n  end\n  res << node.key\n  if node.right\n    dfs.call(node.right.not_nil!)\n  end\n  nil\nend\ndfs.call(@root.not_nil!)\nres\n"}},{"html_id":"to_s(io:IO):Nil-instance-method","name":"to_s","doc":"Appends a short String representation of this object\nwhich includes its class name and its object address.\n\n```\nclass Person\n  def initialize(@name : String, @age : Int32)\n  end\nend\n\nPerson.new(\"John\", 32).to_s # => #<Person:0x10a199f20>\n```","summary":"<p>Appends a short String representation of this object which includes its class name and its object address.</p>","abstract":false,"args":[{"name":"io","external_name":"io","restriction":"IO"}],"args_string":"(io : IO) : Nil","args_html":"(io : IO) : Nil","location":{"filename":"src/nglib/data_structure/aatree_multiset.cr","line_number":415,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_multiset.cr#L415"},"def":{"name":"to_s","args":[{"name":"io","external_name":"io","restriction":"IO"}],"return_type":"Nil","visibility":"Public","body":"io << ((\"{\" + (to_a.join(\", \"))) + \"}\")"}},{"html_id":"upper_bound_index(val:T):Int32-instance-method","name":"upper_bound_index","abstract":false,"args":[{"name":"val","external_name":"val","restriction":"T"}],"args_string":"(val : T) : Int32","args_html":"(val : T) : Int32","location":{"filename":"src/nglib/data_structure/aatree_multiset.cr","line_number":342,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_multiset.cr#L342"},"def":{"name":"upper_bound_index","args":[{"name":"val","external_name":"val","restriction":"T"}],"return_type":"Int32","visibility":"Public","body":"node = @root\nif node\nelse\n  return 0\nend\nindex = 0\nwhile node\n  if val < node.not_nil!.key\n    node = node.not_nil!.left\n  else\n    index = index + ((node.not_nil!.left ? node.not_nil!.left.not_nil!.size : 0) + 1)\n    node = node.not_nil!.right\n  end\nend\nindex\n"}}]},{"html_id":"nglib/NgLib/AATreeSet","path":"NgLib/AATreeSet.html","kind":"class","full_name":"NgLib::AATreeSet(T)","name":"AATreeSet","abstract":false,"superclass":{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"nglib/Enumerable","kind":"module","full_name":"Enumerable","name":"Enumerable"},{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"nglib/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/nglib/data_structure/aatree_set.cr","line_number":8,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_set.cr#L8"}],"repository_name":"nglib","program":false,"enum":false,"alias":false,"const":false,"included_modules":[{"html_id":"nglib/Enumerable","kind":"module","full_name":"Enumerable","name":"Enumerable"}],"namespace":{"html_id":"nglib/NgLib","kind":"module","full_name":"NgLib","name":"NgLib"},"doc":"順序付き集合です。\n\n平衡二分探索木として [AA木](https://ja.wikipedia.org/wiki/AA%E6%9C%A8) を使用しています。\n性能は赤黒木の方が良いことが多い気がします。\n\nC++の標準ライブラリの `multiset` と違って、$k$ 番目の値が取り出せることなどが魅力的です。","summary":"<p>順序付き集合です。</p>","constructors":[{"html_id":"new(enumerable:Enumerable(T))-class-method","name":"new","abstract":false,"args":[{"name":"enumerable","external_name":"enumerable","restriction":"Enumerable(T)"}],"args_string":"(enumerable : Enumerable(T))","args_html":"(enumerable : Enumerable(T))","location":{"filename":"src/nglib/data_structure/aatree_set.cr","line_number":153,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_set.cr#L153"},"def":{"name":"new","args":[{"name":"enumerable","external_name":"enumerable","restriction":"Enumerable(T)"}],"visibility":"Public","body":"_ = AATreeSet(T).allocate\n_.initialize(enumerable)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"html_id":"new-class-method","name":"new","abstract":false,"location":{"filename":"src/nglib/data_structure/aatree_set.cr","line_number":148,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_set.cr#L148"},"def":{"name":"new","visibility":"Public","body":"_ = AATreeSet(T).allocate\n_.initialize\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"<<(val:T):Bool-instance-method","name":"<<","abstract":false,"args":[{"name":"val","external_name":"val","restriction":"T"}],"args_string":"(val : T) : Bool","args_html":"(val : T) : Bool","location":{"filename":"src/nglib/data_structure/aatree_set.cr","line_number":407,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_set.cr#L407"},"def":{"name":"<<","args":[{"name":"val","external_name":"val","restriction":"T"}],"return_type":"Bool","visibility":"Public","body":"add?(val)"}},{"html_id":"==(other:AATreeSet(T)):Bool-instance-method","name":"==","abstract":false,"args":[{"name":"other","external_name":"other","restriction":"AATreeSet(T)"}],"args_string":"(other : AATreeSet(T)) : Bool","args_html":"(other : <a href=\"../NgLib/AATreeSet.html\">AATreeSet</a>(T)) : Bool","location":{"filename":"src/nglib/data_structure/aatree_set.cr","line_number":403,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_set.cr#L403"},"def":{"name":"==","args":[{"name":"other","external_name":"other","restriction":"AATreeSet(T)"}],"return_type":"Bool","visibility":"Public","body":"self.to_a == other.to_a"}},{"html_id":"[](k:Int):T-instance-method","name":"[]","abstract":false,"args":[{"name":"k","external_name":"k","restriction":"Int"}],"args_string":"(k : Int) : T","args_html":"(k : <a href=\"../Int.html\">Int</a>) : T","location":{"filename":"src/nglib/data_structure/aatree_set.cr","line_number":411,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_set.cr#L411"},"def":{"name":"[]","args":[{"name":"k","external_name":"k","restriction":"Int"}],"return_type":"T","visibility":"Public","body":"at(k)"}},{"html_id":"[]?(k:Int):T|Nil-instance-method","name":"[]?","abstract":false,"args":[{"name":"k","external_name":"k","restriction":"Int"}],"args_string":"(k : Int) : T | Nil","args_html":"(k : <a href=\"../Int.html\">Int</a>) : T | Nil","location":{"filename":"src/nglib/data_structure/aatree_set.cr","line_number":415,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_set.cr#L415"},"def":{"name":"[]?","args":[{"name":"k","external_name":"k","restriction":"Int"}],"return_type":"T | Nil","visibility":"Public","body":"at?(k)"}},{"html_id":"add(val:T):Nil-instance-method","name":"add","abstract":false,"args":[{"name":"val","external_name":"val","restriction":"T"}],"args_string":"(val : T) : Nil","args_html":"(val : T) : Nil","location":{"filename":"src/nglib/data_structure/aatree_set.cr","line_number":208,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_set.cr#L208"},"def":{"name":"add","args":[{"name":"val","external_name":"val","restriction":"T"}],"return_type":"Nil","visibility":"Public","body":"add?(val)\nnil\n"}},{"html_id":"add?(val:T):Bool-instance-method","name":"add?","abstract":false,"args":[{"name":"val","external_name":"val","restriction":"T"}],"args_string":"(val : T) : Bool","args_html":"(val : T) : Bool","location":{"filename":"src/nglib/data_structure/aatree_set.cr","line_number":213,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_set.cr#L213"},"def":{"name":"add?","args":[{"name":"val","external_name":"val","restriction":"T"}],"return_type":"Bool","visibility":"Public","body":"if @root\nelse\n  @root = Node.new(val)\n  return true\nend\nnode = find_node(@root, val)\nif node.not_nil!.key == val\n  return false\nend\nnew_node = Node.new(val)\nif val <= node.not_nil!.key\n  node.not_nil!.left = new_node\nelse\n  node.not_nil!.right = new_node\nend\nnew_node.not_nil!.parent = node\nnode = new_node\nwhile node\n  node = split(skew(node))\n  if node.not_nil!.parent\n  else\n    @root = node\n    break\n  end\n  node = node.not_nil!.parent\n  __temp_51 = node.not_nil!\n  __temp_51.size = __temp_51.size + 1\nend\ntrue\n"}},{"html_id":"at(k:Int):T-instance-method","name":"at","abstract":false,"args":[{"name":"k","external_name":"k","restriction":"Int"}],"args_string":"(k : Int) : T","args_html":"(k : <a href=\"../Int.html\">Int</a>) : T","location":{"filename":"src/nglib/data_structure/aatree_set.cr","line_number":177,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_set.cr#L177"},"def":{"name":"at","args":[{"name":"k","external_name":"k","restriction":"Int"}],"return_type":"T","visibility":"Public","body":"if 0 <= k && k < size\nelse\n  raise(IndexError.new)\nend\nnode = @root\nk = k + 1\nloop do\n  left_size = (node.not_nil!.left ? node.not_nil!.left.not_nil!.size : 0) + 1\n  if left_size == k\n    break\n  end\n  if k < left_size\n    node = node.not_nil!.left\n  else\n    node = node.not_nil!.right\n    k = k - left_size\n  end\nend\nnode.not_nil!.key\n"}},{"html_id":"at?(k:Int):T|Nil-instance-method","name":"at?","abstract":false,"args":[{"name":"k","external_name":"k","restriction":"Int"}],"args_string":"(k : Int) : T | Nil","args_html":"(k : <a href=\"../Int.html\">Int</a>) : T | Nil","location":{"filename":"src/nglib/data_structure/aatree_set.cr","line_number":195,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_set.cr#L195"},"def":{"name":"at?","args":[{"name":"k","external_name":"k","restriction":"Int"}],"return_type":"T | ::Nil","visibility":"Public","body":"if 0 <= k && k < size\nelse\n  return nil\nend\nat(k)\n"}},{"html_id":"clear-instance-method","name":"clear","abstract":false,"location":{"filename":"src/nglib/data_structure/aatree_set.cr","line_number":169,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_set.cr#L169"},"def":{"name":"clear","visibility":"Public","body":"@root = nil"}},{"html_id":"concat(elems):self-instance-method","name":"concat","abstract":false,"args":[{"name":"elems","external_name":"elems","restriction":""}],"args_string":"(elems) : self","args_html":"(elems) : <span class=\"k\">self</span>","location":{"filename":"src/nglib/data_structure/aatree_set.cr","line_number":159,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_set.cr#L159"},"def":{"name":"concat","args":[{"name":"elems","external_name":"elems","restriction":""}],"return_type":"self","visibility":"Public","body":"elems.each do |elem|\n  self << elem\nend\nself\n"}},{"html_id":"count(val:T):Int32-instance-method","name":"count","abstract":false,"args":[{"name":"val","external_name":"val","restriction":"T"}],"args_string":"(val : T) : Int32","args_html":"(val : T) : Int32","location":{"filename":"src/nglib/data_structure/aatree_set.cr","line_number":371,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_set.cr#L371"},"def":{"name":"count","args":[{"name":"val","external_name":"val","restriction":"T"}],"return_type":"Int32","visibility":"Public","body":"(upper_bound_index(val)) - (lower_bound_index(val))"}},{"html_id":"delete(val:T):Bool-instance-method","name":"delete","abstract":false,"args":[{"name":"val","external_name":"val","restriction":"T"}],"args_string":"(val : T) : Bool","args_html":"(val : T) : Bool","location":{"filename":"src/nglib/data_structure/aatree_set.cr","line_number":243,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_set.cr#L243"},"def":{"name":"delete","args":[{"name":"val","external_name":"val","restriction":"T"}],"return_type":"Bool","visibility":"Public","body":"if @root\nelse\n  return false\nend\nnode = find_node(@root, val)\nif node.not_nil!.key == val\nelse\n  return false\nend\nif node.not_nil!.left || node.not_nil!.right\n  child = find_node(node.not_nil!.left ? node.not_nil!.left : node.not_nil!.right, val)\n  node.not_nil!.assign(child.not_nil!)\n  node = child\nend\npar = node.not_nil!.parent\nif par\n  if par.not_nil!.left_side?(node)\n    par.left = nil\n  else\n    par.right = nil\n  end\nelse\n  @root = nil\nend\nnode = par\nwhile node\n  new_level = {level(node.left), level(node.right)}.min + 1\n  if new_level < node.level\n    node.level = new_level\n    if new_level < (level(node.right))\n      node.right.not_nil!.level = new_level\n    end\n  end\n  node.size = node.size - 1\n  node = (skew(node)).not_nil!\n  if skew(node.right)\n    skew(node.right.not_nil!.right)\n  end\n  node = split(node)\n  split(node.not_nil!.right)\n  if node.not_nil!.parent\n  else\n    @root = node\n    break\n  end\n  node = node.not_nil!.parent\nend\ntrue\n"}},{"html_id":"delete_at(k:Int):Bool-instance-method","name":"delete_at","abstract":false,"args":[{"name":"k","external_name":"k","restriction":"Int"}],"args_string":"(k : Int) : Bool","args_html":"(k : <a href=\"../Int.html\">Int</a>) : Bool","location":{"filename":"src/nglib/data_structure/aatree_set.cr","line_number":292,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_set.cr#L292"},"def":{"name":"delete_at","args":[{"name":"k","external_name":"k","restriction":"Int"}],"return_type":"Bool","visibility":"Public","body":"delete(at(k))"}},{"html_id":"delete_at?(k:Int):Bool-instance-method","name":"delete_at?","abstract":false,"args":[{"name":"k","external_name":"k","restriction":"Int"}],"args_string":"(k : Int) : Bool","args_html":"(k : <a href=\"../Int.html\">Int</a>) : Bool","location":{"filename":"src/nglib/data_structure/aatree_set.cr","line_number":296,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_set.cr#L296"},"def":{"name":"delete_at?","args":[{"name":"k","external_name":"k","restriction":"Int"}],"return_type":"Bool","visibility":"Public","body":"val = at?(k)\nif val\n  delete(val)\nelse\n  false\nend\n"}},{"html_id":"each(&:T->)-instance-method","name":"each","doc":"Must yield this collection's elements to the block.","summary":"<p>Must yield this collection's elements to the block.</p>","abstract":false,"location":{"filename":"src/nglib/data_structure/aatree_set.cr","line_number":200,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_set.cr#L200"},"def":{"name":"each","yields":1,"block_arity":1,"block_arg":{"name":"","external_name":"","restriction":"(T ->)"},"visibility":"Public","body":"node = begin_node\nwhile node\n  yield node.not_nil!.key\n  node = next_node(node.not_nil!)\nend\n"}},{"html_id":"empty?:Bool-instance-method","name":"empty?","doc":"Returns `true` if `self` is empty, `false` otherwise.\n\n```\n([] of Int32).empty? # => true\n([1]).empty?         # => false\n```","summary":"<p>Returns <code>true</code> if <code>self</code> is empty, <code>false</code> otherwise.</p>","abstract":false,"location":{"filename":"src/nglib/data_structure/aatree_set.cr","line_number":173,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_set.cr#L173"},"def":{"name":"empty?","return_type":"Bool","visibility":"Public","body":"@root.nil?"}},{"html_id":"first:T-instance-method","name":"first","doc":"Returns the first element in the collection. Raises `Enumerable::EmptyError`\nif the collection is empty.\n\n```\n([1, 2, 3]).first   # => 1\n([] of Int32).first # raises Enumerable::EmptyError\n```","summary":"<p>Returns the first element in the collection.</p>","abstract":false,"location":{"filename":"src/nglib/data_structure/aatree_set.cr","line_number":355,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_set.cr#L355"},"def":{"name":"first","return_type":"T","visibility":"Public","body":"at(0)"}},{"html_id":"first?:T|Nil-instance-method","name":"first?","doc":"Returns the first element in the collection.\nWhen the collection is empty, returns `nil`.\n\n```\n([1, 2, 3]).first?   # => 1\n([] of Int32).first? # => nil\n```","summary":"<p>Returns the first element in the collection.</p>","abstract":false,"location":{"filename":"src/nglib/data_structure/aatree_set.cr","line_number":359,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_set.cr#L359"},"def":{"name":"first?","return_type":"T | ::Nil","visibility":"Public","body":"at?(0)"}},{"html_id":"greater_equal_index(val:T):Int32|Nil-instance-method","name":"greater_equal_index","abstract":false,"args":[{"name":"val","external_name":"val","restriction":"T"}],"args_string":"(val : T) : Int32 | Nil","args_html":"(val : T) : Int32 | Nil","location":{"filename":"src/nglib/data_structure/aatree_set.cr","line_number":350,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_set.cr#L350"},"def":{"name":"greater_equal_index","args":[{"name":"val","external_name":"val","restriction":"T"}],"return_type":"Int32 | ::Nil","visibility":"Public","body":"index = lower_bound_index(val)\nindex == size ? nil : index\n"}},{"html_id":"greater_index(val:T):Int32|Nil-instance-method","name":"greater_index","abstract":false,"args":[{"name":"val","external_name":"val","restriction":"T"}],"args_string":"(val : T) : Int32 | Nil","args_html":"(val : T) : Int32 | Nil","location":{"filename":"src/nglib/data_structure/aatree_set.cr","line_number":345,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_set.cr#L345"},"def":{"name":"greater_index","args":[{"name":"val","external_name":"val","restriction":"T"}],"return_type":"Int32 | ::Nil","visibility":"Public","body":"index = upper_bound_index(val)\nindex == size ? nil : index\n"}},{"html_id":"includes?(val:T):Bool-instance-method","name":"includes?","abstract":false,"args":[{"name":"val","external_name":"val","restriction":"T"}],"args_string":"(val : T) : Bool","args_html":"(val : T) : Bool","location":{"filename":"src/nglib/data_structure/aatree_set.cr","line_number":164,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_set.cr#L164"},"def":{"name":"includes?","args":[{"name":"val","external_name":"val","restriction":"T"}],"return_type":"Bool","visibility":"Public","body":"node = find_node(@root, val)\nnode.nil? ? false : node.key == val\n"}},{"html_id":"inspect(io:IO):Nil-instance-method","name":"inspect","doc":"Appends a String representation of this object\nwhich includes its class name, its object address\nand the values of all instance variables.\n\n```\nclass Person\n  def initialize(@name : String, @age : Int32)\n  end\nend\n\nPerson.new(\"John\", 32).inspect # => #<Person:0x10fd31f20 @name=\"John\", @age=32>\n```","summary":"<p>Appends a String representation of this object which includes its class name, its object address and the values of all instance variables.</p>","abstract":false,"args":[{"name":"io","external_name":"io","restriction":"IO"}],"args_string":"(io : IO) : Nil","args_html":"(io : IO) : Nil","location":{"filename":"src/nglib/data_structure/aatree_set.cr","line_number":399,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_set.cr#L399"},"def":{"name":"inspect","args":[{"name":"io","external_name":"io","restriction":"IO"}],"return_type":"Nil","visibility":"Public","body":"to_s(io)"}},{"html_id":"last:T-instance-method","name":"last","abstract":false,"location":{"filename":"src/nglib/data_structure/aatree_set.cr","line_number":363,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_set.cr#L363"},"def":{"name":"last","return_type":"T","visibility":"Public","body":"at(size - 1)"}},{"html_id":"last?:T|Nil-instance-method","name":"last?","abstract":false,"location":{"filename":"src/nglib/data_structure/aatree_set.cr","line_number":367,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_set.cr#L367"},"def":{"name":"last?","return_type":"T | ::Nil","visibility":"Public","body":"at?(size - 1)"}},{"html_id":"less_equal_index(val:T):Int32|Nil-instance-method","name":"less_equal_index","abstract":false,"args":[{"name":"val","external_name":"val","restriction":"T"}],"args_string":"(val : T) : Int32 | Nil","args_html":"(val : T) : Int32 | Nil","location":{"filename":"src/nglib/data_structure/aatree_set.cr","line_number":340,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_set.cr#L340"},"def":{"name":"less_equal_index","args":[{"name":"val","external_name":"val","restriction":"T"}],"return_type":"Int32 | ::Nil","visibility":"Public","body":"index = lower_bound_index(val)\nval == (at?(index)) ? index : (index == 0 ? nil : index - 1)\n"}},{"html_id":"less_index(val:T):Int32|Nil-instance-method","name":"less_index","abstract":false,"args":[{"name":"val","external_name":"val","restriction":"T"}],"args_string":"(val : T) : Int32 | Nil","args_html":"(val : T) : Int32 | Nil","location":{"filename":"src/nglib/data_structure/aatree_set.cr","line_number":335,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_set.cr#L335"},"def":{"name":"less_index","args":[{"name":"val","external_name":"val","restriction":"T"}],"return_type":"Int32 | ::Nil","visibility":"Public","body":"index = lower_bound_index(val)\nindex == 0 ? nil : index - 1\n"}},{"html_id":"lower_bound_index(val:T):Int32-instance-method","name":"lower_bound_index","abstract":false,"args":[{"name":"val","external_name":"val","restriction":"T"}],"args_string":"(val : T) : Int32","args_html":"(val : T) : Int32","location":{"filename":"src/nglib/data_structure/aatree_set.cr","line_number":305,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_set.cr#L305"},"def":{"name":"lower_bound_index","args":[{"name":"val","external_name":"val","restriction":"T"}],"return_type":"Int32","visibility":"Public","body":"node = @root\nif node\nelse\n  return 0\nend\nindex = 0\nwhile node\n  if val <= node.not_nil!.key\n    node = node.not_nil!.left\n  else\n    index = index + ((node.not_nil!.left ? node.not_nil!.left.not_nil!.size : 0) + 1)\n    node = node.not_nil!.right\n  end\nend\nindex\n"}},{"html_id":"size:Int32-instance-method","name":"size","doc":"Returns the number of elements in the collection.\n\n```\n[1, 2, 3, 4].size # => 4\n```","summary":"<p>Returns the number of elements in the collection.</p>","abstract":false,"location":{"filename":"src/nglib/data_structure/aatree_set.cr","line_number":375,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_set.cr#L375"},"def":{"name":"size","return_type":"Int32","visibility":"Public","body":"@root.try(&.size) || 0"}},{"html_id":"to_a:Array(T)-instance-method","name":"to_a","doc":"Returns an `Array` with all the elements in the collection.\n\n```\n(1..5).to_a # => [1, 2, 3, 4, 5]\n```","summary":"<p>Returns an <code>Array</code> with all the elements in the collection.</p>","abstract":false,"location":{"filename":"src/nglib/data_structure/aatree_set.cr","line_number":379,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_set.cr#L379"},"def":{"name":"to_a","return_type":"Array(T)","visibility":"Public","body":"res = Array(T).new\nif @root\nelse\n  return res\nend\ndfs = uninitialized (Node(T) -> Nil)\ndfs = ->(node : Node(T)) do\n  left = node.left\n  right = node.right\n  if left\n    dfs.call(left)\n  end\n  res << node.key\n  if right\n    dfs.call(right)\n  end\n  nil\nend\ndfs.call(@root.not_nil!)\nres\n"}},{"html_id":"to_s(io:IO):Nil-instance-method","name":"to_s","doc":"Appends a short String representation of this object\nwhich includes its class name and its object address.\n\n```\nclass Person\n  def initialize(@name : String, @age : Int32)\n  end\nend\n\nPerson.new(\"John\", 32).to_s # => #<Person:0x10a199f20>\n```","summary":"<p>Appends a short String representation of this object which includes its class name and its object address.</p>","abstract":false,"args":[{"name":"io","external_name":"io","restriction":"IO"}],"args_string":"(io : IO) : Nil","args_html":"(io : IO) : Nil","location":{"filename":"src/nglib/data_structure/aatree_set.cr","line_number":395,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_set.cr#L395"},"def":{"name":"to_s","args":[{"name":"io","external_name":"io","restriction":"IO"}],"return_type":"Nil","visibility":"Public","body":"io << ((\"{\" + (to_a.join(\", \"))) + \"}\")"}},{"html_id":"upper_bound_index(val:T):Int32-instance-method","name":"upper_bound_index","abstract":false,"args":[{"name":"val","external_name":"val","restriction":"T"}],"args_string":"(val : T) : Int32","args_html":"(val : T) : Int32","location":{"filename":"src/nglib/data_structure/aatree_set.cr","line_number":320,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/aatree_set.cr#L320"},"def":{"name":"upper_bound_index","args":[{"name":"val","external_name":"val","restriction":"T"}],"return_type":"Int32","visibility":"Public","body":"node = @root\nif node\nelse\n  return 0\nend\nindex = 0\nwhile node\n  if val < node.not_nil!.key\n    node = node.not_nil!.left\n  else\n    index = index + ((node.not_nil!.left ? node.not_nil!.left.not_nil!.size : 0) + 1)\n    node = node.not_nil!.right\n  end\nend\nindex\n"}}]},{"html_id":"nglib/NgLib/BfsGraph","path":"NgLib/BfsGraph.html","kind":"class","full_name":"NgLib::BfsGraph","name":"BfsGraph","abstract":false,"superclass":{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"nglib/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/nglib/graph/bfs.cr","line_number":7,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/bfs.cr#L7"}],"repository_name":"nglib","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"nglib/NgLib","kind":"module","full_name":"NgLib","name":"NgLib"},"doc":"$n$ 頂点 $m$ 辺からなるグラフに対して、幅優先探索によって最短経路を求めます。\n\n経路の復元も可能です。","summary":"<p>$n$ 頂点 $m$ 辺からなるグラフに対して、幅優先探索によって最短経路を求めます。</p>","constructors":[{"html_id":"new(n:Int)-class-method","name":"new","doc":"$n$ 頂点 $0$ 辺からなるグラフを作成します。\n\n```\ngraph = BfsGraph.new(n)\n```","summary":"<p>$n$ 頂点 $0$ 辺からなるグラフを作成します。</p>","abstract":false,"args":[{"name":"n","external_name":"n","restriction":"Int"}],"args_string":"(n : Int)","args_html":"(n : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/graph/bfs.cr","line_number":16,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/bfs.cr#L16"},"def":{"name":"new","args":[{"name":"n","external_name":"n","restriction":"Int"}],"visibility":"Public","body":"_ = allocate\n_.initialize(n)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"add_edge(u:Int,v:Int,directed:Bool=false)-instance-method","name":"add_edge","doc":"辺 $(u, v)$ を追加します。\n\n`directed` が `true` の場合、\n有向辺とみなして、$u$ から $v$ への辺のみ生やします。\n\n```\ngraph = BfsGraph.new(n)\ngraph.add_edge(u, v)                 # => (u) <---w---> (v)\ngraph.add_edge(u, v, directed: true) # => (u) ----w---> (v)\n```","summary":"<p>辺 $(u, v)$ を追加します。</p>","abstract":false,"args":[{"name":"u","external_name":"u","restriction":"Int"},{"name":"v","external_name":"v","restriction":"Int"},{"name":"directed","default_value":"false","external_name":"directed","restriction":"Bool"}],"args_string":"(u : Int, v : Int, directed : Bool = false)","args_html":"(u : <a href=\"../Int.html\">Int</a>, v : <a href=\"../Int.html\">Int</a>, directed : Bool = <span class=\"n\">false</span>)","location":{"filename":"src/nglib/graph/bfs.cr","line_number":31,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/bfs.cr#L31"},"def":{"name":"add_edge","args":[{"name":"u","external_name":"u","restriction":"Int"},{"name":"v","external_name":"v","restriction":"Int"},{"name":"directed","default_value":"false","external_name":"directed","restriction":"Bool"}],"visibility":"Public","body":"@graph[u.to_i32] << v.to_i32\nif directed\nelse\n  @graph[v.to_i32] << u.to_i32\nend\n"}},{"html_id":"graph:Array(Array(Int32))-instance-method","name":"graph","abstract":false,"location":{"filename":"src/nglib/graph/bfs.cr","line_number":9,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/bfs.cr#L9"},"def":{"name":"graph","return_type":"Array(Array(Int32))","visibility":"Public","body":"@graph"}},{"html_id":"shortest_path(start:Int,dest:Int)-instance-method","name":"shortest_path","doc":"始点 `start` から終点 `dest` への最短経路長を返します。\n\n```\ndist = graph.shortest_path(start: 2, dest: 0)\ndist # => 12\n```","summary":"<p>始点 <code>start</code> から終点 <code>dest</code> への最短経路長を返します。</p>","abstract":false,"args":[{"name":"start","external_name":"start","restriction":"Int"},{"name":"dest","external_name":"dest","restriction":"Int"}],"args_string":"(start : Int, dest : Int)","args_html":"(start : <a href=\"../Int.html\">Int</a>, dest : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/graph/bfs.cr","line_number":72,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/bfs.cr#L72"},"def":{"name":"shortest_path","args":[{"name":"start","external_name":"start","restriction":"Int"},{"name":"dest","external_name":"dest","restriction":"Int"}],"visibility":"Public","body":"(shortest_path(start))[dest]"}},{"html_id":"shortest_path(start:Int)-instance-method","name":"shortest_path","doc":"始点 `start` から各頂点への最短経路長を返します。\n\n```\ndist = graph.shortest_path(start: 2)\ndist # => [3, 8, 0, 7, 1]\n```","summary":"<p>始点 <code>start</code> から各頂点への最短経路長を返します。</p>","abstract":false,"args":[{"name":"start","external_name":"start","restriction":"Int"}],"args_string":"(start : Int)","args_html":"(start : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/graph/bfs.cr","line_number":52,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/bfs.cr#L52"},"def":{"name":"shortest_path","args":[{"name":"start","external_name":"start","restriction":"Int"}],"visibility":"Public","body":"queue = Deque.new([start.to_i32])\ndist = Array.new(@size) do |i|\n  i == start ? 0_i64 : OO\nend\nwhile !queue.empty?\n  from = queue.shift\n  @graph[from].each do |adj|\n    if dist[adj] != OO\n      next\n    end\n    dist[adj] = dist[from] + 1\n    queue << adj\n  end\nend\ndist\n"}},{"html_id":"shortest_path-instance-method","name":"shortest_path","doc":"全点対間の最短経路長を返します。\n\n```\ndists = graph.shortest_path\ndists # => [[0, 1, 3], [1, 0, 2], [1, 1, 0]]\n```","summary":"<p>全点対間の最短経路長を返します。</p>","abstract":false,"location":{"filename":"src/nglib/graph/bfs.cr","line_number":42,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/bfs.cr#L42"},"def":{"name":"shortest_path","visibility":"Public","body":"(0...@size).map do |start|\n  shortest_path(start)\nend"}},{"html_id":"size:Int32-instance-method","name":"size","abstract":false,"location":{"filename":"src/nglib/graph/bfs.cr","line_number":8,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/bfs.cr#L8"},"def":{"name":"size","return_type":"Int32","visibility":"Public","body":"@size"}}]},{"html_id":"nglib/NgLib/BinaryBfsGraph","path":"NgLib/BinaryBfsGraph.html","kind":"class","full_name":"NgLib::BinaryBfsGraph","name":"BinaryBfsGraph","abstract":false,"superclass":{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"nglib/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/nglib/graph/binary_bfs.cr","line_number":4,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/binary_bfs.cr#L4"}],"repository_name":"nglib","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"nglib/NgLib","kind":"module","full_name":"NgLib","name":"NgLib"},"constructors":[{"html_id":"new(n:Int)-class-method","name":"new","doc":"$n$ 頂点 $0$ 辺からなるグラフを作成します。\n\n```\ngraph = BfsGraph.new(n)\n```","summary":"<p>$n$ 頂点 $0$ 辺からなるグラフを作成します。</p>","abstract":false,"args":[{"name":"n","external_name":"n","restriction":"Int"}],"args_string":"(n : Int)","args_html":"(n : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/graph/binary_bfs.cr","line_number":23,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/binary_bfs.cr#L23"},"def":{"name":"new","args":[{"name":"n","external_name":"n","restriction":"Int"}],"visibility":"Public","body":"_ = allocate\n_.initialize(n)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"add_edge(u:Int,v:Int,w:Int,directed:Bool=false)-instance-method","name":"add_edge","doc":"辺 $(u, v, w)$ を追加します。\n\n$w$ は $0$ または $1$ である必要があります。\n\n`directed` が `true` の場合、\n有向辺とみなして、$u$ から $v$ への辺のみ生やします。\n\n```\ngraph = BfsGraph.new(n)\ngraph.add_edge(u, v)                 # => (u) <---w---> (v)\ngraph.add_edge(u, v, directed: true) # => (u) ----w---> (v)\n```","summary":"<p>辺 $(u, v, w)$ を追加します。</p>","abstract":false,"args":[{"name":"u","external_name":"u","restriction":"Int"},{"name":"v","external_name":"v","restriction":"Int"},{"name":"w","external_name":"w","restriction":"Int"},{"name":"directed","default_value":"false","external_name":"directed","restriction":"Bool"}],"args_string":"(u : Int, v : Int, w : Int, directed : Bool = false)","args_html":"(u : <a href=\"../Int.html\">Int</a>, v : <a href=\"../Int.html\">Int</a>, w : <a href=\"../Int.html\">Int</a>, directed : Bool = <span class=\"n\">false</span>)","location":{"filename":"src/nglib/graph/binary_bfs.cr","line_number":40,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/binary_bfs.cr#L40"},"def":{"name":"add_edge","args":[{"name":"u","external_name":"u","restriction":"Int"},{"name":"v","external_name":"v","restriction":"Int"},{"name":"w","external_name":"w","restriction":"Int"},{"name":"directed","default_value":"false","external_name":"directed","restriction":"Bool"}],"visibility":"Public","body":"if w.in?({0, 1})\nelse\n  raise(Exception.new(\"w should be 0 or 1\"))\nend\n@graph[u.to_i32] << (Edge.new(v, w))\nif directed\nelse\n  @graph[v.to_i32] << (Edge.new(u, w))\nend\n"}},{"html_id":"graph:Array(Array(Edge))-instance-method","name":"graph","abstract":false,"location":{"filename":"src/nglib/graph/binary_bfs.cr","line_number":16,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/binary_bfs.cr#L16"},"def":{"name":"graph","return_type":"Array(Array(Edge))","visibility":"Public","body":"@graph"}},{"html_id":"shortest_path(start:Int,dest:Int)-instance-method","name":"shortest_path","doc":"始点 `start` から終点 `dest` への最短経路長を返します。\n\n```\ndist = graph.shortest_path(start: 2, dest: 0)\ndist # => 12\n```","summary":"<p>始点 <code>start</code> から終点 <code>dest</code> への最短経路長を返します。</p>","abstract":false,"args":[{"name":"start","external_name":"start","restriction":"Int"},{"name":"dest","external_name":"dest","restriction":"Int"}],"args_string":"(start : Int, dest : Int)","args_html":"(start : <a href=\"../Int.html\">Int</a>, dest : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/graph/binary_bfs.cr","line_number":88,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/binary_bfs.cr#L88"},"def":{"name":"shortest_path","args":[{"name":"start","external_name":"start","restriction":"Int"},{"name":"dest","external_name":"dest","restriction":"Int"}],"visibility":"Public","body":"(shortest_path(start))[dest]"}},{"html_id":"shortest_path(start:Int)-instance-method","name":"shortest_path","doc":"始点 `start` から各頂点への最短経路長を返します。\n\n```\ndist = graph.shortest_path(start: 2)\ndist # => [3, 8, 0, 7, 1]\n```","summary":"<p>始点 <code>start</code> から各頂点への最短経路長を返します。</p>","abstract":false,"args":[{"name":"start","external_name":"start","restriction":"Int"}],"args_string":"(start : Int)","args_html":"(start : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/graph/binary_bfs.cr","line_number":62,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/binary_bfs.cr#L62"},"def":{"name":"shortest_path","args":[{"name":"start","external_name":"start","restriction":"Int"}],"visibility":"Public","body":"deque = Deque.new([start.to_i32])\ndist = Array.new(@size) do |i|\n  i == start ? 0_i64 : OO\nend\nwhile !deque.empty?\n  from = deque.shift\n  @graph[from].each do |e|\n    d = dist[from] + e.weight\n    if d < dist[e.to]\n      dist[e.to] = d\n      if e.weight == 0\n        deque.unshift(e.to)\n      else\n        deque << e.to\n      end\n    end\n  end\nend\ndist\n"}},{"html_id":"shortest_path-instance-method","name":"shortest_path","doc":"全点対間の最短経路長を返します。\n\n```\ndists = graph.shortest_path\ndists # => [[0, 1, 3], [1, 0, 2], [1, 1, 0]]\n```","summary":"<p>全点対間の最短経路長を返します。</p>","abstract":false,"location":{"filename":"src/nglib/graph/binary_bfs.cr","line_number":52,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/binary_bfs.cr#L52"},"def":{"name":"shortest_path","visibility":"Public","body":"(0...@size).map do |start|\n  shortest_path(start)\nend"}},{"html_id":"size:Int32-instance-method","name":"size","abstract":false,"location":{"filename":"src/nglib/graph/binary_bfs.cr","line_number":15,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/binary_bfs.cr#L15"},"def":{"name":"size","return_type":"Int32","visibility":"Public","body":"@size"}}]},{"html_id":"nglib/NgLib/CompressedWaveletMatrix","path":"NgLib/CompressedWaveletMatrix.html","kind":"class","full_name":"NgLib::CompressedWaveletMatrix(T)","name":"CompressedWaveletMatrix","abstract":false,"superclass":{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"nglib/Indexable","kind":"module","full_name":"Indexable","name":"Indexable"},{"html_id":"nglib/Enumerable","kind":"module","full_name":"Enumerable","name":"Enumerable"},{"html_id":"nglib/Iterable","kind":"module","full_name":"Iterable","name":"Iterable"},{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"nglib/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/nglib/data_structure/wavelet_matrix.cr","line_number":212,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/wavelet_matrix.cr#L212"}],"repository_name":"nglib","program":false,"enum":false,"alias":false,"const":false,"included_modules":[{"html_id":"nglib/Indexable","kind":"module","full_name":"Indexable","name":"Indexable"}],"namespace":{"html_id":"nglib/NgLib","kind":"module","full_name":"NgLib","name":"NgLib"},"constructors":[{"html_id":"new(values:Array(T))-class-method","name":"new","abstract":false,"args":[{"name":"values","external_name":"values","restriction":"Array(T)"}],"args_string":"(values : Array(T))","args_html":"(values : Array(T))","location":{"filename":"src/nglib/data_structure/wavelet_matrix.cr","line_number":220,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/wavelet_matrix.cr#L220"},"def":{"name":"new","args":[{"name":"values","external_name":"values","restriction":"Array(T)"}],"visibility":"Public","body":"_ = CompressedWaveletMatrix(T).allocate\n_.initialize(values)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"html_id":"new(n:Int,&:Int32->T)-class-method","name":"new","abstract":false,"args":[{"name":"n","external_name":"n","restriction":"Int"}],"args_string":"(n : Int, & : Int32 -> T)","args_html":"(n : <a href=\"../Int.html\">Int</a>, & : Int32 -> T)","location":{"filename":"src/nglib/data_structure/wavelet_matrix.cr","line_number":225,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/wavelet_matrix.cr#L225"},"def":{"name":"new","args":[{"name":"n","external_name":"n","restriction":"Int"}],"yields":1,"block_arity":1,"block_arg":{"name":"","external_name":"","restriction":"(Int32 -> T)"},"visibility":"Public","body":"CompressedWaveletMatrix.new(Array.new(n) do |i|\n  yield i\nend)"}}],"instance_methods":[{"html_id":"count(range:Range(Int|Nil,Int|Nil),bound:Range(T|Nil,T|Nil)):Int32-instance-method","name":"count","doc":"`range` の表す区間に含まれる要素の中で `bound` が表す範囲の値の個数を返します。","summary":"<p><code>range</code> の表す区間に含まれる要素の中で <code>bound</code> が表す範囲の値の個数を返します。</p>","abstract":false,"args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"bound","external_name":"bound","restriction":"Range(T | ::Nil, T | ::Nil)"}],"args_string":"(range : Range(Int | Nil, Int | Nil), bound : Range(T | Nil, T | Nil)) : Int32","args_html":"(range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil), bound : Range(T | Nil, T | Nil)) : Int32","location":{"filename":"src/nglib/data_structure/wavelet_matrix.cr","line_number":294,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/wavelet_matrix.cr#L294"},"def":{"name":"count","args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"bound","external_name":"bound","restriction":"Range(T | ::Nil, T | ::Nil)"}],"return_type":"Int32","visibility":"Public","body":"lower_bound = (bound.begin || 0)\nupper_bound = (bound.end || T::MAX) + (bound.exclusive? || bound.end.nil? ? 0 : 1)\n(count_less_eq(range, upper_bound)) - (count_less_eq(range, lower_bound))\n"}},{"html_id":"count(range:Range(Int|Nil,Int|Nil),item:T)-instance-method","name":"count","doc":"`range` の表す区間に含まれる要素の中で `item` の個数を返します。","summary":"<p><code>range</code> の表す区間に含まれる要素の中で <code>item</code> の個数を返します。</p>","abstract":false,"args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"item","external_name":"item","restriction":"T"}],"args_string":"(range : Range(Int | Nil, Int | Nil), item : T)","args_html":"(range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil), item : T)","location":{"filename":"src/nglib/data_structure/wavelet_matrix.cr","line_number":289,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/wavelet_matrix.cr#L289"},"def":{"name":"count","args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"item","external_name":"item","restriction":"T"}],"visibility":"Public","body":"count(range, item..item)"}},{"html_id":"count(item:T)-instance-method","name":"count","doc":"`item` の個数を返します。\n\n計算量は対数オーダーです。","summary":"<p><code>item</code> の個数を返します。</p>","abstract":false,"args":[{"name":"item","external_name":"item","restriction":"T"}],"args_string":"(item : T)","args_html":"(item : T)","location":{"filename":"src/nglib/data_structure/wavelet_matrix.cr","line_number":284,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/wavelet_matrix.cr#L284"},"def":{"name":"count","args":[{"name":"item","external_name":"item","restriction":"T"}],"visibility":"Public","body":"count(.., item)"}},{"html_id":"kth_largest(range:Range(Int|Nil,Int|Nil),kth:Int)-instance-method","name":"kth_largest","doc":"`range` の表す区間に含まれる要素のうち、`kth` 番目に大きい値を返します。\n\n```\nwm = WaveletMatrix.new([1, 3, 2, 5])\nwm.kth_largest(1..2, 0) # => 3\nwm.kth_largest(1..2, 1) # => 2\n```","summary":"<p><code>range</code> の表す区間に含まれる要素のうち、<code>kth</code> 番目に大きい値を返します。</p>","abstract":false,"args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"kth","external_name":"kth","restriction":"Int"}],"args_string":"(range : Range(Int | Nil, Int | Nil), kth : Int)","args_html":"(range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil), kth : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/data_structure/wavelet_matrix.cr","line_number":277,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/wavelet_matrix.cr#L277"},"def":{"name":"kth_largest","args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"kth","external_name":"kth","restriction":"Int"}],"visibility":"Public","body":"kth_smallest(range, (range.size - kth) - 1)"}},{"html_id":"kth_largest(kth:Int32)-instance-method","name":"kth_largest","doc":"`kth` 番目に大きい値を返します。\n\n```\nwm = WaveletMatrix.new([1, 3, 2, 5])\nwm.kth_smallest(0) # => 5\nwm.kth_smallest(1) # => 3\nwm.kth_smallest(2) # => 2\nwm.kth_smallest(3) # => 1\n```","summary":"<p><code>kth</code> 番目に大きい値を返します。</p>","abstract":false,"args":[{"name":"kth","external_name":"kth","restriction":"Int32"}],"args_string":"(kth : Int32)","args_html":"(kth : Int32)","location":{"filename":"src/nglib/data_structure/wavelet_matrix.cr","line_number":266,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/wavelet_matrix.cr#L266"},"def":{"name":"kth_largest","args":[{"name":"kth","external_name":"kth","restriction":"Int32"}],"visibility":"Public","body":"kth_largest(.., kth)"}},{"html_id":"kth_smallest(range:Range(Int|Nil,Int|Nil),kth:Int)-instance-method","name":"kth_smallest","doc":"`range` の表す区間に含まれる要素のうち、`kth` 番目に小さい値を返します。\n\n```\nwm = WaveletMatrix.new([1, 3, 2, 5])\nwm.kth_smallest(1..2, 0) # => 2\nwm.kth_smallest(1..2, 1) # => 3\n```","summary":"<p><code>range</code> の表す区間に含まれる要素のうち、<code>kth</code> 番目に小さい値を返します。</p>","abstract":false,"args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"kth","external_name":"kth","restriction":"Int"}],"args_string":"(range : Range(Int | Nil, Int | Nil), kth : Int)","args_html":"(range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil), kth : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/data_structure/wavelet_matrix.cr","line_number":253,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/wavelet_matrix.cr#L253"},"def":{"name":"kth_smallest","args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"kth","external_name":"kth","restriction":"Int"}],"visibility":"Public","body":"@uniqued[@wm.kth_smallest(range, kth)]"}},{"html_id":"kth_smallest(kth:Int32)-instance-method","name":"kth_smallest","doc":"`kth` 番目に小さい値を返します。\n\n```\nwm = WaveletMatrix.new([1, 3, 2, 5])\nwm.kth_smallest(0) # => 1\nwm.kth_smallest(1) # => 2\nwm.kth_smallest(2) # => 3\nwm.kth_smallest(3) # => 5\n```","summary":"<p><code>kth</code> 番目に小さい値を返します。</p>","abstract":false,"args":[{"name":"kth","external_name":"kth","restriction":"Int32"}],"args_string":"(kth : Int32)","args_html":"(kth : Int32)","location":{"filename":"src/nglib/data_structure/wavelet_matrix.cr","line_number":242,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/wavelet_matrix.cr#L242"},"def":{"name":"kth_smallest","args":[{"name":"kth","external_name":"kth","restriction":"Int32"}],"visibility":"Public","body":"kth_smallest(.., kth)"}},{"html_id":"next_value(range:Range(Int|Nil,Int|Nil),lower_bound):T|Nil-instance-method","name":"next_value","doc":"`range` の表す区間に含まれる要素のうち、`lower_bound` **以上** の値の最小値を返します。\n\n存在しない場合は `nil` を返します。","summary":"<p><code>range</code> の表す区間に含まれる要素のうち、<code>lower_bound</code> <strong>以上</strong> の値の最小値を返します。</p>","abstract":false,"args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"lower_bound","external_name":"lower_bound","restriction":""}],"args_string":"(range : Range(Int | Nil, Int | Nil), lower_bound) : T | Nil","args_html":"(range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil), lower_bound) : T | Nil","location":{"filename":"src/nglib/data_structure/wavelet_matrix.cr","line_number":311,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/wavelet_matrix.cr#L311"},"def":{"name":"next_value","args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"lower_bound","external_name":"lower_bound","restriction":""}],"return_type":"T | ::Nil","visibility":"Public","body":"l = (range.begin || 0)\nr = (range.end || size) + (range.exclusive? || range.end.nil? ? 0 : 1)\ncnt = count_less_eq(range, lower_bound)\ncnt == (l...r).size ? nil : kth_smallest(range, cnt)\n"}},{"html_id":"prev_value(range:Range(Int|Nil,Int|Nil),upper_bound):T|Nil-instance-method","name":"prev_value","doc":"`range` の表す区間に含まれる要素のうち、`upper_bound` **未満** の値の最大値を返します。\n\n存在しない場合は `nil` を返します。","summary":"<p><code>range</code> の表す区間に含まれる要素のうち、<code>upper_bound</code> <strong>未満</strong> の値の最大値を返します。</p>","abstract":false,"args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"upper_bound","external_name":"upper_bound","restriction":""}],"args_string":"(range : Range(Int | Nil, Int | Nil), upper_bound) : T | Nil","args_html":"(range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil), upper_bound) : T | Nil","location":{"filename":"src/nglib/data_structure/wavelet_matrix.cr","line_number":303,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/wavelet_matrix.cr#L303"},"def":{"name":"prev_value","args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"upper_bound","external_name":"upper_bound","restriction":""}],"return_type":"T | ::Nil","visibility":"Public","body":"cnt = count_less_eq(range, upper_bound)\ncnt == 0 ? nil : kth_smallest(range, cnt - 1)\n"}},{"html_id":"size(*args,**options)-instance-method","name":"size","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options)","args_html":"(*args, **options)","location":{"filename":"src/nglib/data_structure/wavelet_matrix.cr","line_number":218,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/wavelet_matrix.cr#L218"},"def":{"name":"size","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"visibility":"Public","body":"@wm.size(*args, **options)"}},{"html_id":"size(*args,**options,&)-instance-method","name":"size","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","args_html":"(*args, **options, &)","location":{"filename":"src/nglib/data_structure/wavelet_matrix.cr","line_number":218,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/wavelet_matrix.cr#L218"},"def":{"name":"size","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arity":1,"visibility":"Public","body":"@wm.size(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}},{"html_id":"unsafe_fetch(index:Int)-instance-method","name":"unsafe_fetch","doc":"Returns the element at the given *index*, without doing any bounds check.\n\n`Indexable` makes sure to invoke this method with *index* in `0...size`,\nso converting negative indices to positive ones is not needed here.\n\nClients never invoke this method directly. Instead, they access\nelements with `#[](index)` and `#[]?(index)`.\n\nThis method should only be directly invoked if you are absolutely\nsure the index is in bounds, to avoid a bounds check for a small boost\nof performance.","summary":"<p>Returns the element at the given <em>index</em>, without doing any bounds check.</p>","abstract":false,"args":[{"name":"index","external_name":"index","restriction":"Int"}],"args_string":"(index : Int)","args_html":"(index : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/data_structure/wavelet_matrix.cr","line_number":229,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/wavelet_matrix.cr#L229"},"def":{"name":"unsafe_fetch","args":[{"name":"index","external_name":"index","restriction":"Int"}],"visibility":"Public","body":"@uniqued[@wm.unsafe_fetch(index)]"}}]},{"html_id":"nglib/NgLib/DijkstraGraph","path":"NgLib/DijkstraGraph.html","kind":"class","full_name":"NgLib::DijkstraGraph(Weight)","name":"DijkstraGraph","abstract":false,"superclass":{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"nglib/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/nglib/graph/dijkstra.cr","line_number":25,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/dijkstra.cr#L25"},{"filename":"src/nglib/graph/radix_dijkstra.cr","line_number":10,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/radix_dijkstra.cr#L10"}],"repository_name":"nglib","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"nglib/NgLib","kind":"module","full_name":"NgLib","name":"NgLib"},"doc":"$n$ 頂点 $m$ 辺の重み付きグラフに対して、最短経路を求めます。\n\n経路の復元も可能です。\n\nこのクラスは辺の重みが非負整数であるときのみ使えます。\n辺の重みに非負整数以外を使いたい場合は `nglib/graph/dijkstra` を `require` してください。","summary":"<p>$n$ 頂点 $m$ 辺の重み付きグラフに対して、最短経路を求めます。</p>","constructors":[{"html_id":"new(n:Int)-class-method","name":"new","doc":"$n$ 頂点 $0$ 辺からなるグラフを作成します。\n\n```\ngraph = Dijkstra.new(n)\n```","summary":"<p>$n$ 頂点 $0$ 辺からなるグラフを作成します。</p>","abstract":false,"args":[{"name":"n","external_name":"n","restriction":"Int"}],"args_string":"(n : Int)","args_html":"(n : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/graph/radix_dijkstra.cr","line_number":79,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/radix_dijkstra.cr#L79"},"def":{"name":"new","args":[{"name":"n","external_name":"n","restriction":"Int"}],"visibility":"Public","body":"_ = DijkstraGraph(Weight).allocate\n_.initialize(n)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"add_edge(u:Int,v:Int,w:Int,directed:Bool=false)-instance-method","name":"add_edge","doc":"非負整数の重み $w$ の辺 $(u, v)$ を追加します。\n\n`directed` が `true` の場合、\n有向辺とみなして、$u$ から $v$ への辺のみ生やします。\n\n```\ngraph = Dijkstra.new(n)\ngraph.add_edge(u, v, w)                 # => (u) <---w---> (v)\ngraph.add_edge(u, v, w, directed: true) # => (u) ----w---> (v)\n```","summary":"<p>非負整数の重み $w$ の辺 $(u, v)$ を追加します。</p>","abstract":false,"args":[{"name":"u","external_name":"u","restriction":"Int"},{"name":"v","external_name":"v","restriction":"Int"},{"name":"w","external_name":"w","restriction":"Int"},{"name":"directed","default_value":"false","external_name":"directed","restriction":"Bool"}],"args_string":"(u : Int, v : Int, w : Int, directed : Bool = false)","args_html":"(u : <a href=\"../Int.html\">Int</a>, v : <a href=\"../Int.html\">Int</a>, w : <a href=\"../Int.html\">Int</a>, directed : Bool = <span class=\"n\">false</span>)","location":{"filename":"src/nglib/graph/radix_dijkstra.cr","line_number":94,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/radix_dijkstra.cr#L94"},"def":{"name":"add_edge","args":[{"name":"u","external_name":"u","restriction":"Int"},{"name":"v","external_name":"v","restriction":"Int"},{"name":"w","external_name":"w","restriction":"Int"},{"name":"directed","default_value":"false","external_name":"directed","restriction":"Bool"}],"visibility":"Public","body":"@graph[u.to_i32] << (Edge.new(v.to_i32, w.to_u64))\nif directed\nelse\n  @graph[v.to_i32] << (Edge.new(u.to_i32, w.to_u64))\nend\n"}},{"html_id":"add_edge(u:Int,v:Int,w:Weight,directed:Bool=false)-instance-method","name":"add_edge","doc":"非負整数の重み $w$ の辺 $(u, v)$ を追加します。\n\n`directed` が `true` の場合、\n有向辺とみなして、$u$ から $v$ への辺のみ生やします。\n\n```\ngraph = Dijkstra.new(n)\ngraph.add_edge(u, v, w)                 # => (u) <---w---> (v)\ngraph.add_edge(u, v, w, directed: true) # => (u) ----w---> (v)\n```","summary":"<p>非負整数の重み $w$ の辺 $(u, v)$ を追加します。</p>","abstract":false,"args":[{"name":"u","external_name":"u","restriction":"Int"},{"name":"v","external_name":"v","restriction":"Int"},{"name":"w","external_name":"w","restriction":"Weight"},{"name":"directed","default_value":"false","external_name":"directed","restriction":"Bool"}],"args_string":"(u : Int, v : Int, w : Weight, directed : Bool = false)","args_html":"(u : <a href=\"../Int.html\">Int</a>, v : <a href=\"../Int.html\">Int</a>, w : Weight, directed : Bool = <span class=\"n\">false</span>)","location":{"filename":"src/nglib/graph/dijkstra.cr","line_number":51,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/dijkstra.cr#L51"},"def":{"name":"add_edge","args":[{"name":"u","external_name":"u","restriction":"Int"},{"name":"v","external_name":"v","restriction":"Int"},{"name":"w","external_name":"w","restriction":"Weight"},{"name":"directed","default_value":"false","external_name":"directed","restriction":"Bool"}],"visibility":"Public","body":"@graph[u.to_i32] << (Edge.new(v.to_i32, w))\nif directed\nelse\n  @graph[v.to_i32] << (Edge.new(u.to_i32, w))\nend\n"}},{"html_id":"shortest_path(start:Int,dest:Int)-instance-method","name":"shortest_path","doc":"始点 `start` から終点 `dest` への最短経路長を返します。\n\n```\ndist = graph.shortest_path(start: 2, dest: 0)\ndist # => 12\n```","summary":"<p>始点 <code>start</code> から終点 <code>dest</code> への最短経路長を返します。</p>","abstract":false,"args":[{"name":"start","external_name":"start","restriction":"Int"},{"name":"dest","external_name":"dest","restriction":"Int"}],"args_string":"(start : Int, dest : Int)","args_html":"(start : <a href=\"../Int.html\">Int</a>, dest : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/graph/radix_dijkstra.cr","line_number":142,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/radix_dijkstra.cr#L142"},"def":{"name":"shortest_path","args":[{"name":"start","external_name":"start","restriction":"Int"},{"name":"dest","external_name":"dest","restriction":"Int"}],"visibility":"Public","body":"(shortest_path(start))[dest]"}},{"html_id":"shortest_path(start:Int)-instance-method","name":"shortest_path","doc":"始点 `start` から各頂点への最短経路長を返します。\n\n```\ndist = graph.shortest_path(2)\ndist # => [3, 8, 0, 7, 1]\n```","summary":"<p>始点 <code>start</code> から各頂点への最短経路長を返します。</p>","abstract":false,"args":[{"name":"start","external_name":"start","restriction":"Int"}],"args_string":"(start : Int)","args_html":"(start : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/graph/radix_dijkstra.cr","line_number":115,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/radix_dijkstra.cr#L115"},"def":{"name":"shortest_path","args":[{"name":"start","external_name":"start","restriction":"Int"}],"visibility":"Public","body":"dist = [OO] * @size\ndist[start] = 0_i64\nnext_node = RadixHeap64(Int32).new\nnext_node.push(0_u64, start.to_i32)\nwhile !next_node.empty?\n  d, source = next_node.pop\n  if dist[source] < d\n    next\n  end\n  @graph[source].each do |e|\n    next_cost = dist[source] + e.weight\n    if next_cost < dist[e.target]\n      dist[e.target] = next_cost\n      next_node.push(next_cost.to_u64, e.target)\n    end\n  end\nend\ndist\n"}},{"html_id":"shortest_path-instance-method","name":"shortest_path","doc":"全点対間の最短経路長を返します。\n\n```\ndists = graph.shortest_path\ndists # => [[0, 1, 3], [1, 0, 2], [1, 1, 0]]\n```","summary":"<p>全点対間の最短経路長を返します。</p>","abstract":false,"location":{"filename":"src/nglib/graph/radix_dijkstra.cr","line_number":105,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/radix_dijkstra.cr#L105"},"def":{"name":"shortest_path","visibility":"Public","body":"(0...@size).map do |start|\n  shortest_path(start)\nend"}},{"html_id":"shortest_path_route(start,dest)-instance-method","name":"shortest_path_route","doc":"始点 `start` から終点 `dest` への最短経路の一例を返します。\n\n```\nroute = graph.shortest_path_route(start: 2, dest: 0)\nroute # => [2, 7, 1, 0]\n```","summary":"<p>始点 <code>start</code> から終点 <code>dest</code> への最短経路の一例を返します。</p>","abstract":false,"args":[{"name":"start","external_name":"start","restriction":""},{"name":"dest","external_name":"dest","restriction":""}],"args_string":"(start, dest)","args_html":"(start, dest)","location":{"filename":"src/nglib/graph/radix_dijkstra.cr","line_number":152,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/radix_dijkstra.cr#L152"},"def":{"name":"shortest_path_route","args":[{"name":"start","external_name":"start","restriction":""},{"name":"dest","external_name":"dest","restriction":""}],"visibility":"Public","body":"prev = impl_memo_route(start)\nres = Array(Int32).new\nnow : Int32 | ::Nil = dest.to_i32\nwhile !now.nil?\n  res << now.not_nil!\n  now = prev[now]\nend\nres.reverse\n"}},{"html_id":"shortest_path_tree(start,directed:Bool=true):Array(Array(Int32))-instance-method","name":"shortest_path_tree","doc":"始点 `start` から最短路木を構築します。\n\n最短路木は `start` からの最短経路のみを残した全域木です。\n\n```\nroute = graph.shortest_path_route(start: 2, dest: 0)\nroute # => [2, 7, 1, 0]\n```","summary":"<p>始点 <code>start</code> から最短路木を構築します。</p>","abstract":false,"args":[{"name":"start","external_name":"start","restriction":""},{"name":"directed","default_value":"true","external_name":"directed","restriction":"Bool"}],"args_string":"(start, directed : Bool = true) : Array(Array(Int32))","args_html":"(start, directed : Bool = <span class=\"n\">true</span>) : Array(Array(Int32))","location":{"filename":"src/nglib/graph/radix_dijkstra.cr","line_number":173,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/radix_dijkstra.cr#L173"},"def":{"name":"shortest_path_tree","args":[{"name":"start","external_name":"start","restriction":""},{"name":"directed","default_value":"true","external_name":"directed","restriction":"Bool"}],"return_type":"Array(Array(Int32))","visibility":"Public","body":"dist = [OO] * @size\ndist[start] = 0_i64\nnext_node = RadixHeap64(Int32).new\nnext_node.push(0_u64, start.to_i32)\nbirth = [-1] * @size\nwhile !next_node.empty?\n  d, source = next_node.pop\n  if dist[source] < d\n    next\n  end\n  @graph[source].each do |e|\n    next_cost = dist[source] + e.weight\n    if next_cost < dist[e.target]\n      dist[e.target] = next_cost\n      next_node.push(next_cost.to_u64, e.target)\n      birth[e.target] = source\n    end\n  end\nend\ntree = Array.new(@size) do\n  [] of Int32\nend\n@size.times do |target|\n  source = birth[target]\n  if source == -1\n    next\n  end\n  tree[source] << target\n  if directed\n  else\n    tree[target] << source\n  end\nend\ntree\n"}},{"html_id":"size:Int32-instance-method","name":"size","abstract":false,"location":{"filename":"src/nglib/graph/radix_dijkstra.cr","line_number":71,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/radix_dijkstra.cr#L71"},"def":{"name":"size","return_type":"Int32","visibility":"Public","body":"@size"}}],"types":[{"html_id":"nglib/NgLib/DijkstraGraph/Edge","path":"NgLib/DijkstraGraph/Edge.html","kind":"struct","full_name":"NgLib::DijkstraGraph::Edge(W)","name":"Edge","abstract":false,"superclass":{"html_id":"nglib/Struct","kind":"struct","full_name":"Struct","name":"Struct"},"ancestors":[{"html_id":"nglib/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"nglib/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"nglib/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/nglib/graph/dijkstra.cr","line_number":26,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/dijkstra.cr#L26"},{"filename":"src/nglib/graph/radix_dijkstra.cr","line_number":11,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/radix_dijkstra.cr#L11"}],"repository_name":"nglib","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"nglib/NgLib/DijkstraGraph","kind":"class","full_name":"NgLib::DijkstraGraph(Weight)","name":"DijkstraGraph"},"constructors":[{"html_id":"new(target:Int32,weight:UInt64)-class-method","name":"new","abstract":false,"args":[{"name":"target","external_name":"target","restriction":"Int32"},{"name":"weight","external_name":"weight","restriction":"UInt64"}],"args_string":"(target : Int32, weight : UInt64)","args_html":"(target : Int32, weight : UInt64)","location":{"filename":"src/nglib/graph/radix_dijkstra.cr","line_number":11,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/radix_dijkstra.cr#L11"},"def":{"name":"new","args":[{"name":"target","external_name":"target","restriction":"Int32"},{"name":"weight","external_name":"weight","restriction":"UInt64"}],"visibility":"Public","body":"_ = Edge(W).allocate\n_.initialize(target, weight)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"html_id":"new(target:Int32,weight:W)-class-method","name":"new","abstract":false,"args":[{"name":"target","external_name":"target","restriction":"Int32"},{"name":"weight","external_name":"weight","restriction":"W"}],"args_string":"(target : Int32, weight : W)","args_html":"(target : Int32, weight : W)","location":{"filename":"src/nglib/graph/dijkstra.cr","line_number":26,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/dijkstra.cr#L26"},"def":{"name":"new","args":[{"name":"target","external_name":"target","restriction":"Int32"},{"name":"weight","external_name":"weight","restriction":"W"}],"visibility":"Public","body":"_ = Edge(W).allocate\n_.initialize(target, weight)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"clone-instance-method","name":"clone","abstract":false,"location":{"filename":"src/nglib/graph/radix_dijkstra.cr","line_number":11,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/radix_dijkstra.cr#L11"},"def":{"name":"clone","visibility":"Public","body":"self.class.new(@target.clone, @weight.clone)"}},{"html_id":"copy_with(target_target=@target,weight_weight=@weight)-instance-method","name":"copy_with","abstract":false,"args":[{"name":"_target","default_value":"@target","external_name":"target","restriction":""},{"name":"_weight","default_value":"@weight","external_name":"weight","restriction":""}],"args_string":"(target _target = @target, weight _weight = @weight)","args_html":"(target _target = @target, weight _weight = @weight)","location":{"filename":"src/nglib/graph/radix_dijkstra.cr","line_number":11,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/radix_dijkstra.cr#L11"},"def":{"name":"copy_with","args":[{"name":"_target","default_value":"@target","external_name":"target","restriction":""},{"name":"_weight","default_value":"@weight","external_name":"weight","restriction":""}],"visibility":"Public","body":"self.class.new(_target, _weight)"}},{"html_id":"target:Int32-instance-method","name":"target","abstract":false,"def":{"name":"target","return_type":"Int32","visibility":"Public","body":"@target"}},{"html_id":"weight:UInt64-instance-method","name":"weight","abstract":false,"def":{"name":"weight","return_type":"UInt64","visibility":"Public","body":"@weight"}}]}]},{"html_id":"nglib/NgLib/DynamicRangeSum","path":"NgLib/DynamicRangeSum.html","kind":"class","full_name":"NgLib::DynamicRangeSum(T)","name":"DynamicRangeSum","abstract":false,"superclass":{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"nglib/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/nglib/data_structure/dynamic_range_sum.cr","line_number":7,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/dynamic_range_sum.cr#L7"}],"repository_name":"nglib","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"nglib/NgLib","kind":"module","full_name":"NgLib","name":"NgLib"},"doc":"動的な数列 $a$ に対して累積和を求めます。\n\n累積和クエリは $O(\\log{N})$ で処理することができます。\n\n実装は BIT (Fenwick Tree) です。","summary":"<p>動的な数列 $a$ に対して累積和を求めます。</p>","constructors":[{"html_id":"new(n:Int,val:T)-class-method","name":"new","doc":"長さが $n$ で各要素が $val$ の数列 $a$ を構築します。","summary":"<p>長さが $n$ で各要素が $val$ の数列 $a$ を構築します。</p>","abstract":false,"args":[{"name":"n","external_name":"n","restriction":"Int"},{"name":"val","external_name":"val","restriction":"T"}],"args_string":"(n : Int, val : T)","args_html":"(n : <a href=\"../Int.html\">Int</a>, val : T)","location":{"filename":"src/nglib/data_structure/dynamic_range_sum.cr","line_number":18,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/dynamic_range_sum.cr#L18"},"def":{"name":"new","args":[{"name":"n","external_name":"n","restriction":"Int"},{"name":"val","external_name":"val","restriction":"T"}],"visibility":"Public","body":"_ = DynamicRangeSum(T).allocate\n_.initialize(n, val)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"html_id":"new(elems:Enumerable(T))-class-method","name":"new","doc":"長さが $n$ で $i$ 番目の要素が $elems_i$ の数列 $a$ を構築します。","summary":"<p>長さが $n$ で $i$ 番目の要素が $elems_i$ の数列 $a$ を構築します。</p>","abstract":false,"args":[{"name":"elems","external_name":"elems","restriction":"Enumerable(T)"}],"args_string":"(elems : Enumerable(T))","args_html":"(elems : Enumerable(T))","location":{"filename":"src/nglib/data_structure/dynamic_range_sum.cr","line_number":24,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/dynamic_range_sum.cr#L24"},"def":{"name":"new","args":[{"name":"elems","external_name":"elems","restriction":"Enumerable(T)"}],"visibility":"Public","body":"_ = DynamicRangeSum(T).allocate\n_.initialize(elems)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"html_id":"new(n:Int)-class-method","name":"new","doc":"長さが $n$ で各要素が $0$ の数列 $a$ を構築します。","summary":"<p>長さが $n$ で各要素が $0$ の数列 $a$ を構築します。</p>","abstract":false,"args":[{"name":"n","external_name":"n","restriction":"Int"}],"args_string":"(n : Int)","args_html":"(n : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/data_structure/dynamic_range_sum.cr","line_number":12,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/dynamic_range_sum.cr#L12"},"def":{"name":"new","args":[{"name":"n","external_name":"n","restriction":"Int"}],"visibility":"Public","body":"_ = DynamicRangeSum(T).allocate\n_.initialize(n)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"[](l,r):T-instance-method","name":"[]","doc":"$[l, r)$ 番目までの要素の総和 $\\sum_{i=l}^{r-1} a_i$ を $O(\\log{N})$ で返します。\n\n```\narray = [1, 1, 2, 3, 5, 8, 13]\ncsum = DynamicRangeSum(Int32).new(array)\ncsum[0, 5] # => 1 + 1 + 2 + 3 + 5 = 12\n```","summary":"<p>$[l, r)$ 番目までの要素の総和 $\\sum_{i=l}^{r-1} a_i$ を $O(\\log{N})$ で返します。</p>","abstract":false,"args":[{"name":"l","external_name":"l","restriction":""},{"name":"r","external_name":"r","restriction":""}],"args_string":"(l, r) : T","args_html":"(l, r) : T","location":{"filename":"src/nglib/data_structure/dynamic_range_sum.cr","line_number":49,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/dynamic_range_sum.cr#L49"},"def":{"name":"[]","args":[{"name":"l","external_name":"l","restriction":""},{"name":"r","external_name":"r","restriction":""}],"return_type":"T","visibility":"Public","body":"get(l, r)"}},{"html_id":"[](range:Range(Int|Nil,Int|Nil)):T-instance-method","name":"[]","doc":"`range` の表す範囲の要素の総和 $\\sum_{i \\in range} a_i$ を $O(\\log{N})$ で返します。\n\n```\narray = [1, 1, 2, 3, 5, 8, 13]\ncsum = DynamicRangeSum(Int32).new(array)\ncsum[0...5] # => 1 + 1 + 2 + 3 + 5 = 12\n```","summary":"<p><code>range</code> の表す範囲の要素の総和 $\\sum_{i \\in range} a_i$ を $O(\\log{N})$ で返します。</p>","abstract":false,"args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"args_string":"(range : Range(Int | Nil, Int | Nil)) : T","args_html":"(range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil)) : T","location":{"filename":"src/nglib/data_structure/dynamic_range_sum.cr","line_number":73,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/dynamic_range_sum.cr#L73"},"def":{"name":"[]","args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"return_type":"T","visibility":"Public","body":"l = (range.begin || 0)\nr = (range.end || @size) + (range.exclusive? || range.end.nil? ? 0 : 1)\nget(l, r)\n"}},{"html_id":"[](i):T-instance-method","name":"[]","doc":"$a_i$ を $O(\\log{N})$ で返します。\n\n```\narray = [1, 1, 2, 3, 5, 8, 13]\ncsum = DynamicRangeSum(Int32).new(array)\ncsum[5] # => 8\n```","summary":"<p>$a_i$ を $O(\\log{N})$ で返します。</p>","abstract":false,"args":[{"name":"i","external_name":"i","restriction":""}],"args_string":"(i) : T","args_html":"(i) : T","location":{"filename":"src/nglib/data_structure/dynamic_range_sum.cr","line_number":158,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/dynamic_range_sum.cr#L158"},"def":{"name":"[]","args":[{"name":"i","external_name":"i","restriction":""}],"return_type":"T","visibility":"Public","body":"get(i, i + 1)"}},{"html_id":"[]=(i:Int,x:T):T-instance-method","name":"[]=","doc":"$a_i$ の値を $x$ に更新します。\n\n```\narray = [1, 1, 2, 3, 5, 8, 13]\ncsum = DynamicRangeSum(Int32).new(array)\ncsum.get?(0...5) # => 1 + 1 + 2 + 3 + 5 = 12\ncsum[0] = 100\ncsum.get?(0...5) # => 100 + 1 + 2 + 3 + 5 = 111\n```","summary":"<p>$a_i$ の値を $x$ に更新します。</p>","abstract":false,"args":[{"name":"i","external_name":"i","restriction":"Int"},{"name":"x","external_name":"x","restriction":"T"}],"args_string":"(i : Int, x : T) : T","args_html":"(i : <a href=\"../Int.html\">Int</a>, x : T) : T","location":{"filename":"src/nglib/data_structure/dynamic_range_sum.cr","line_number":199,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/dynamic_range_sum.cr#L199"},"def":{"name":"[]=","args":[{"name":"i","external_name":"i","restriction":"Int"},{"name":"x","external_name":"x","restriction":"T"}],"return_type":"T","visibility":"Public","body":"add(i, x - (get(i)))"}},{"html_id":"[]?(l,r):T|Nil-instance-method","name":"[]?","doc":"$[l, r)$ 番目までの要素の総和 $\\sum_{i=l}^{r-1} a_i$ を $O(\\log{N})$ で返します。\n\n$0 \\leq l \\leq r \\leq n$ を満たさないとき、`nil` を返します。\n\n```\narray = [1, 1, 2, 3, 5, 8, 13]\ncsum = DynamicRangeSum(Int32).new(array)\ncsum[0, 5]? # => 1 + 1 + 2 + 3 + 5 = 12\ncsum[7, 3]? # => nil\n```","summary":"<p>$[l, r)$ 番目までの要素の総和 $\\sum_{i=l}^{r-1} a_i$ を $O(\\log{N})$ で返します。</p>","abstract":false,"args":[{"name":"l","external_name":"l","restriction":""},{"name":"r","external_name":"r","restriction":""}],"args_string":"(l, r) : T | Nil","args_html":"(l, r) : T | Nil","location":{"filename":"src/nglib/data_structure/dynamic_range_sum.cr","line_number":104,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/dynamic_range_sum.cr#L104"},"def":{"name":"[]?","args":[{"name":"l","external_name":"l","restriction":""},{"name":"r","external_name":"r","restriction":""}],"return_type":"T | ::Nil","visibility":"Public","body":"get?(l, r)"}},{"html_id":"[]?(range:Range(Int|Nil,Int|Nil)):T-instance-method","name":"[]?","doc":"`range` の表す範囲の要素の総和 $\\sum_{i \\in range} a_i$ を $O(\\log{N})$ で返します。\n\n$0 \\leq l \\leq r \\leq n$ を満たさないとき、`nil` を返します。\n\n```\narray = [1, 1, 2, 3, 5, 8, 13]\ncsum = DynamicRangeSum(Int32).new(array)\ncsum[0...5]? # => 1 + 1 + 2 + 3 + 5 = 12\ncsum[7...3]? # => nil\n```","summary":"<p><code>range</code> の表す範囲の要素の総和 $\\sum_{i \\in range} a_i$ を $O(\\log{N})$ で返します。</p>","abstract":false,"args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"args_string":"(range : Range(Int | Nil, Int | Nil)) : T","args_html":"(range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil)) : T","location":{"filename":"src/nglib/data_structure/dynamic_range_sum.cr","line_number":134,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/dynamic_range_sum.cr#L134"},"def":{"name":"[]?","args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"return_type":"T","visibility":"Public","body":"l = (range.begin || 0)\nr = (range.end || @size) + (range.exclusive? || range.end.nil? ? 0 : 1)\nget?(l, r)\n"}},{"html_id":"[]?(i):T|Nil-instance-method","name":"[]?","doc":"$a_i$ を $O(\\log{N})$ で返します。\n\n$0 \\leq i \\lt n$ を満たさないとき、`nil` を返します。\n\n```\narray = [1, 1, 2, 3, 5, 8, 13]\ncsum = DynamicRangeSum(Int32).new(array)\ncsum[5]   # => 8\ncsum[10]? # => nil\n```","summary":"<p>$a_i$ を $O(\\log{N})$ で返します。</p>","abstract":false,"args":[{"name":"i","external_name":"i","restriction":""}],"args_string":"(i) : T | Nil","args_html":"(i) : T | Nil","location":{"filename":"src/nglib/data_structure/dynamic_range_sum.cr","line_number":186,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/dynamic_range_sum.cr#L186"},"def":{"name":"[]?","args":[{"name":"i","external_name":"i","restriction":""}],"return_type":"T | ::Nil","visibility":"Public","body":"get?(i, i + 1)"}},{"html_id":"add(i:Int,x:T)-instance-method","name":"add","doc":"$a_i$ に $x$ を加算します。\n\n```\narray = [1, 1, 2, 3, 5, 8, 13]\ncsum = DynamicRangeSum(Int32).new(array)\ncsum.get?(0...5) # => 1 + 1 + 2 + 3 + 5 = 12\ncsum.add(0, 99)\ncsum.get?(0...5) # => 100 + 1 + 2 + 3 + 5 = 111\n```","summary":"<p>$a_i$ に $x$ を加算します。</p>","abstract":false,"args":[{"name":"i","external_name":"i","restriction":"Int"},{"name":"x","external_name":"x","restriction":"T"}],"args_string":"(i : Int, x : T)","args_html":"(i : <a href=\"../Int.html\">Int</a>, x : T)","location":{"filename":"src/nglib/data_structure/dynamic_range_sum.cr","line_number":225,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/dynamic_range_sum.cr#L225"},"def":{"name":"add","args":[{"name":"i","external_name":"i","restriction":"Int"},{"name":"x","external_name":"x","restriction":"T"}],"visibility":"Public","body":"i = i + 1\nwhile i <= @size\n  __temp_52 = i - 1\n  @data[__temp_52] = @data[__temp_52] + x\n  i = i + (i & (-i))\nend\nx\n"}},{"html_id":"get(l,r):T-instance-method","name":"get","doc":"$[l, r)$ 番目までの要素の総和 $\\sum_{i=l}^{r-1} a_i$ を $O(\\log{N})$ で返します。\n\n```\narray = [1, 1, 2, 3, 5, 8, 13]\ncsum = DynamicRangeSum(Int32).new(array)\ncsum.get(0, 5) # => 1 + 1 + 2 + 3 + 5 = 12\n```","summary":"<p>$[l, r)$ 番目までの要素の総和 $\\sum_{i=l}^{r-1} a_i$ を $O(\\log{N})$ で返します。</p>","abstract":false,"args":[{"name":"l","external_name":"l","restriction":""},{"name":"r","external_name":"r","restriction":""}],"args_string":"(l, r) : T","args_html":"(l, r) : T","location":{"filename":"src/nglib/data_structure/dynamic_range_sum.cr","line_number":37,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/dynamic_range_sum.cr#L37"},"def":{"name":"get","args":[{"name":"l","external_name":"l","restriction":""},{"name":"r","external_name":"r","restriction":""}],"return_type":"T","visibility":"Public","body":"if (0 <= l && l <= r) && r <= @size\nelse\n  raise(IndexError.new(\"`l` and `r` must be 0 <= l <= r <= self.size (#{l}, #{r})\"))\nend\n(sum(r)) - (sum(l))\n"}},{"html_id":"get(range:Range(Int|Nil,Int|Nil)):T-instance-method","name":"get","doc":"`range` の表す範囲の要素の総和 $\\sum_{i \\in range} a_i$ を $O(\\log{N})$ で返します。\n\n```\narray = [1, 1, 2, 3, 5, 8, 13]\ncsum = DynamicRangeSum(Int32).new(array)\ncsum.get(0...5) # => 1 + 1 + 2 + 3 + 5 = 12\n```","summary":"<p><code>range</code> の表す範囲の要素の総和 $\\sum_{i \\in range} a_i$ を $O(\\log{N})$ で返します。</p>","abstract":false,"args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"args_string":"(range : Range(Int | Nil, Int | Nil)) : T","args_html":"(range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil)) : T","location":{"filename":"src/nglib/data_structure/dynamic_range_sum.cr","line_number":60,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/dynamic_range_sum.cr#L60"},"def":{"name":"get","args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"return_type":"T","visibility":"Public","body":"l = (range.begin || 0)\nr = (range.end || @size) + (range.exclusive? || range.end.nil? ? 0 : 1)\nget(l, r)\n"}},{"html_id":"get(i):T-instance-method","name":"get","doc":"$a_i$ を $O(\\log{N})$ で返します。\n\n```\narray = [1, 1, 2, 3, 5, 8, 13]\ncsum = DynamicRangeSum(Int32).new(array)\ncsum.get(5) # => 8\n```","summary":"<p>$a_i$ を $O(\\log{N})$ で返します。</p>","abstract":false,"args":[{"name":"i","external_name":"i","restriction":""}],"args_string":"(i) : T","args_html":"(i) : T","location":{"filename":"src/nglib/data_structure/dynamic_range_sum.cr","line_number":147,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/dynamic_range_sum.cr#L147"},"def":{"name":"get","args":[{"name":"i","external_name":"i","restriction":""}],"return_type":"T","visibility":"Public","body":"get(i, i + 1)"}},{"html_id":"get?(l,r):T|Nil-instance-method","name":"get?","doc":"$[l, r)$ 番目までの要素の総和 $\\sum_{i=l}^{r-1} a_i$ を $O(\\log{N})$ で返します。\n\n$0 \\leq l \\leq r \\leq n$ を満たさないとき、`nil` を返します。\n\n```\narray = [1, 1, 2, 3, 5, 8, 13]\ncsum = DynamicRangeSum(Int32).new(array)\ncsum.get?(0, 5) # => 1 + 1 + 2 + 3 + 5 = 12\ncsum.get?(7, 3) # => nil\n```","summary":"<p>$[l, r)$ 番目までの要素の総和 $\\sum_{i=l}^{r-1} a_i$ を $O(\\log{N})$ で返します。</p>","abstract":false,"args":[{"name":"l","external_name":"l","restriction":""},{"name":"r","external_name":"r","restriction":""}],"args_string":"(l, r) : T | Nil","args_html":"(l, r) : T | Nil","location":{"filename":"src/nglib/data_structure/dynamic_range_sum.cr","line_number":89,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/dynamic_range_sum.cr#L89"},"def":{"name":"get?","args":[{"name":"l","external_name":"l","restriction":""},{"name":"r","external_name":"r","restriction":""}],"return_type":"T | ::Nil","visibility":"Public","body":"if (0 <= l && l <= r) && r <= @size\nelse\n  return nil\nend\nget(l, r)\n"}},{"html_id":"get?(range:Range(Int|Nil,Int|Nil)):T-instance-method","name":"get?","doc":"`range` の表す範囲の要素の総和 $\\sum_{i \\in range} a_i$ を $O(\\log{N})$ で返します。\n\n$0 \\leq l \\leq r \\leq n$ を満たさないとき、`nil` を返します。\n\n```\narray = [1, 1, 2, 3, 5, 8, 13]\ncsum = DynamicRangeSum(Int32).new(array)\ncsum.get?(0...5) # => 1 + 1 + 2 + 3 + 5 = 12\ncsum.get?(7...3) # => nil\n```","summary":"<p><code>range</code> の表す範囲の要素の総和 $\\sum_{i \\in range} a_i$ を $O(\\log{N})$ で返します。</p>","abstract":false,"args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"args_string":"(range : Range(Int | Nil, Int | Nil)) : T","args_html":"(range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil)) : T","location":{"filename":"src/nglib/data_structure/dynamic_range_sum.cr","line_number":118,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/dynamic_range_sum.cr#L118"},"def":{"name":"get?","args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"return_type":"T","visibility":"Public","body":"l = (range.begin || 0)\nr = (range.end || @size) + (range.exclusive? || range.end.nil? ? 0 : 1)\nget?(l, r)\n"}},{"html_id":"get?(i):T|Nil-instance-method","name":"get?","doc":"$a_i$ を $O(\\log{N})$ で返します。\n\n$0 \\leq i \\lt n$ を満たさないとき、`nil` を返します。\n\n```\narray = [1, 1, 2, 3, 5, 8, 13]\ncsum = DynamicRangeSum(Int32).new(array)\ncsum.get?(5) # => 8\ncsum.get?(10)? # => nil\n```","summary":"<p>$a_i$ を $O(\\log{N})$ で返します。</p>","abstract":false,"args":[{"name":"i","external_name":"i","restriction":""}],"args_string":"(i) : T | Nil","args_html":"(i) : T | Nil","location":{"filename":"src/nglib/data_structure/dynamic_range_sum.cr","line_number":172,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/dynamic_range_sum.cr#L172"},"def":{"name":"get?","args":[{"name":"i","external_name":"i","restriction":""}],"return_type":"T | ::Nil","visibility":"Public","body":"get?(i, i + 1)"}},{"html_id":"set(i:Int,x:T)-instance-method","name":"set","doc":"$a_i$ の値を $x$ に更新します。\n\n```\narray = [1, 1, 2, 3, 5, 8, 13]\ncsum = DynamicRangeSum(Int32).new(array)\ncsum.get?(0...5) # => 1 + 1 + 2 + 3 + 5 = 12\ncsum.set(0, 100)\ncsum.get?(0...5) # => 100 + 1 + 2 + 3 + 5 = 111\n```","summary":"<p>$a_i$ の値を $x$ に更新します。</p>","abstract":false,"args":[{"name":"i","external_name":"i","restriction":"Int"},{"name":"x","external_name":"x","restriction":"T"}],"args_string":"(i : Int, x : T)","args_html":"(i : <a href=\"../Int.html\">Int</a>, x : T)","location":{"filename":"src/nglib/data_structure/dynamic_range_sum.cr","line_number":212,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/dynamic_range_sum.cr#L212"},"def":{"name":"set","args":[{"name":"i","external_name":"i","restriction":"Int"},{"name":"x","external_name":"x","restriction":"T"}],"visibility":"Public","body":"self[i] = x"}},{"html_id":"size:Int32-instance-method","name":"size","abstract":false,"location":{"filename":"src/nglib/data_structure/dynamic_range_sum.cr","line_number":8,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/dynamic_range_sum.cr#L8"},"def":{"name":"size","return_type":"Int32","visibility":"Public","body":"@size"}}]},{"html_id":"nglib/NgLib/DynamicRectangleSum","path":"NgLib/DynamicRectangleSum.html","kind":"class","full_name":"NgLib::DynamicRectangleSum(T)","name":"DynamicRectangleSum","abstract":false,"superclass":{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"nglib/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/nglib/data_structure/dynamic_rectangle_sum.cr","line_number":3,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/dynamic_rectangle_sum.cr#L3"}],"repository_name":"nglib","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"nglib/NgLib","kind":"module","full_name":"NgLib","name":"NgLib"},"doc":"変更されうる二次元配列 $A$ に対して、累積和 $\\sum_{i=l_i}^{r_i-1} \\sum_{j=l_j}^{r_j-1} A_i$ を計算します。","summary":"<p>変更されうる二次元配列 $A$ に対して、累積和 $\\sum_{i=l_i}^{r_i-1} \\sum_{j=l_j}^{r_j-1} A_i$ を計算します。</p>","constructors":[{"html_id":"new(h:Int,w:Int)-class-method","name":"new","abstract":false,"args":[{"name":"h","external_name":"h","restriction":"Int"},{"name":"w","external_name":"w","restriction":"Int"}],"args_string":"(h : Int, w : Int)","args_html":"(h : <a href=\"../Int.html\">Int</a>, w : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/data_structure/dynamic_rectangle_sum.cr","line_number":8,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/dynamic_rectangle_sum.cr#L8"},"def":{"name":"new","args":[{"name":"h","external_name":"h","restriction":"Int"},{"name":"w","external_name":"w","restriction":"Int"}],"visibility":"Public","body":"_ = DynamicRectangleSum(T).allocate\n_.initialize(h, w)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"html_id":"new(grid:Array(Array(T)))-class-method","name":"new","abstract":false,"args":[{"name":"grid","external_name":"grid","restriction":"Array(Array(T))"}],"args_string":"(grid : Array(Array(T)))","args_html":"(grid : Array(Array(T)))","location":{"filename":"src/nglib/data_structure/dynamic_rectangle_sum.cr","line_number":14,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/dynamic_rectangle_sum.cr#L14"},"def":{"name":"new","args":[{"name":"grid","external_name":"grid","restriction":"Array(Array(T))"}],"visibility":"Public","body":"_ = DynamicRectangleSum(T).allocate\n_.initialize(grid)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"[](y_range:Range(Int|Nil,Int|Nil),x_range:Range(Int|Nil,Int|Nil)):T-instance-method","name":"[]","abstract":false,"args":[{"name":"y_range","external_name":"y_range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"x_range","external_name":"x_range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"args_string":"(y_range : Range(Int | Nil, Int | Nil), x_range : Range(Int | Nil, Int | Nil)) : T","args_html":"(y_range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil), x_range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil)) : T","location":{"filename":"src/nglib/data_structure/dynamic_rectangle_sum.cr","line_number":132,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/dynamic_rectangle_sum.cr#L132"},"def":{"name":"[]","args":[{"name":"y_range","external_name":"y_range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"x_range","external_name":"x_range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"return_type":"T","visibility":"Public","body":"get(y_range, x_range)"}},{"html_id":"[]=(i:Int,j:Int,val:T)-instance-method","name":"[]=","abstract":false,"args":[{"name":"i","external_name":"i","restriction":"Int"},{"name":"j","external_name":"j","restriction":"Int"},{"name":"val","external_name":"val","restriction":"T"}],"args_string":"(i : Int, j : Int, val : T)","args_html":"(i : <a href=\"../Int.html\">Int</a>, j : <a href=\"../Int.html\">Int</a>, val : T)","location":{"filename":"src/nglib/data_structure/dynamic_rectangle_sum.cr","line_number":140,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/dynamic_rectangle_sum.cr#L140"},"def":{"name":"[]=","args":[{"name":"i","external_name":"i","restriction":"Int"},{"name":"j","external_name":"j","restriction":"Int"},{"name":"val","external_name":"val","restriction":"T"}],"visibility":"Public","body":"add(i, j, val - (get(i..i, j..j)))"}},{"html_id":"[]?(y_range:Range(Int|Nil,Int|Nil),x_range:Range(Int|Nil,Int|Nil)):T|Nil-instance-method","name":"[]?","abstract":false,"args":[{"name":"y_range","external_name":"y_range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"x_range","external_name":"x_range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"args_string":"(y_range : Range(Int | Nil, Int | Nil), x_range : Range(Int | Nil, Int | Nil)) : T | Nil","args_html":"(y_range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil), x_range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil)) : T | Nil","location":{"filename":"src/nglib/data_structure/dynamic_rectangle_sum.cr","line_number":136,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/dynamic_rectangle_sum.cr#L136"},"def":{"name":"[]?","args":[{"name":"y_range","external_name":"y_range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"x_range","external_name":"x_range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"return_type":"T | ::Nil","visibility":"Public","body":"get?(y_range, x_range)"}},{"html_id":"add(y:Int,x:Int,val:T):T-instance-method","name":"add","doc":"(y, x) の要素に val を足します。\n\n添字は 0-index です。\n\n```\ncsum = DynamicRectangleSum.new(a)\ncsum.add(y, x, val) # => val\n```","summary":"<p>(y, x) の要素に val を足します。</p>","abstract":false,"args":[{"name":"y","external_name":"y","restriction":"Int"},{"name":"x","external_name":"x","restriction":"Int"},{"name":"val","external_name":"val","restriction":"T"}],"args_string":"(y : Int, x : Int, val : T) : T","args_html":"(y : <a href=\"../Int.html\">Int</a>, x : <a href=\"../Int.html\">Int</a>, val : T) : T","location":{"filename":"src/nglib/data_structure/dynamic_rectangle_sum.cr","line_number":33,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/dynamic_rectangle_sum.cr#L33"},"def":{"name":"add","args":[{"name":"y","external_name":"y","restriction":"Int"},{"name":"x","external_name":"x","restriction":"Int"},{"name":"val","external_name":"val","restriction":"T"}],"return_type":"T","visibility":"Public","body":"if y < 0 || y >= @height\n  raise(IndexError.new(\"y = #{y} が配列外参照しています。 (@height = #{@height}\"))\nend\nif x < 0 || x >= @width\n  raise(IndexError.new(\"x = #{x} が配列外参照しています。 (@height = #{@width}\"))\nend\ni = y + 1\nwhile i <= @height\n  j = x + 1\n  while j <= @width\n    __temp_54 = j\n    __temp_55 = @csum[i]\n    __temp_55[__temp_54] = __temp_55[__temp_54] + val\n    j = j + (j & (-j))\n  end\n  i = i + (i & (-i))\nend\nval\n"}},{"html_id":"add?(y:Int,x:Int,val:T):Bool-instance-method","name":"add?","doc":"(y, x) の要素に val を足します。\n\n添字は 0-index です。\n\n加算に成功した場合 `true` を返します。\n\n```\ncsum = DynamicRectangleSum.new(a)\ncsum.add?(y, x, x) # => true\n```","summary":"<p>(y, x) の要素に val を足します。</p>","abstract":false,"args":[{"name":"y","external_name":"y","restriction":"Int"},{"name":"x","external_name":"x","restriction":"Int"},{"name":"val","external_name":"val","restriction":"T"}],"args_string":"(y : Int, x : Int, val : T) : Bool","args_html":"(y : <a href=\"../Int.html\">Int</a>, x : <a href=\"../Int.html\">Int</a>, val : T) : Bool","location":{"filename":"src/nglib/data_structure/dynamic_rectangle_sum.cr","line_number":58,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/dynamic_rectangle_sum.cr#L58"},"def":{"name":"add?","args":[{"name":"y","external_name":"y","restriction":"Int"},{"name":"x","external_name":"x","restriction":"Int"},{"name":"val","external_name":"val","restriction":"T"}],"return_type":"Bool","visibility":"Public","body":"if y < 0 || y >= @height\n  return false\nend\nif x < 0 || x >= @width\n  return false\nend\ni = y + 1\nwhile i <= @height\n  j = x + 1\n  while j <= @width\n    __temp_56 = j\n    __temp_57 = @csum[i]\n    __temp_57[__temp_56] = __temp_57[__temp_56] + val\n    j = j + (j & (-j))\n  end\n  i = i + (i & (-i))\nend\ntrue\n"}},{"html_id":"csum:Array(Array(T))-instance-method","name":"csum","abstract":false,"location":{"filename":"src/nglib/data_structure/dynamic_rectangle_sum.cr","line_number":6,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/dynamic_rectangle_sum.cr#L6"},"def":{"name":"csum","return_type":"Array(Array(T))","visibility":"Public","body":"@csum"}},{"html_id":"get(y_begin:Int,y_end:Int,x_begin:Int,x_end:Int):T-instance-method","name":"get","doc":"累積和を返します。\n\n[y_begin, y_end), [x_begin, x_end) で指定します。\n\nNOTE: このAPIは非推奨です。Rangeで指定することが推奨されます。","summary":"<p>累積和を返します。</p>","abstract":false,"args":[{"name":"y_begin","external_name":"y_begin","restriction":"Int"},{"name":"y_end","external_name":"y_end","restriction":"Int"},{"name":"x_begin","external_name":"x_begin","restriction":"Int"},{"name":"x_end","external_name":"x_end","restriction":"Int"}],"args_string":"(y_begin : Int, y_end : Int, x_begin : Int, x_end : Int) : T","args_html":"(y_begin : <a href=\"../Int.html\">Int</a>, y_end : <a href=\"../Int.html\">Int</a>, x_begin : <a href=\"../Int.html\">Int</a>, x_end : <a href=\"../Int.html\">Int</a>) : T","location":{"filename":"src/nglib/data_structure/dynamic_rectangle_sum.cr","line_number":78,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/dynamic_rectangle_sum.cr#L78"},"def":{"name":"get","args":[{"name":"y_begin","external_name":"y_begin","restriction":"Int"},{"name":"y_end","external_name":"y_end","restriction":"Int"},{"name":"x_begin","external_name":"x_begin","restriction":"Int"},{"name":"x_end","external_name":"x_end","restriction":"Int"}],"return_type":"T","visibility":"Public","body":"if y_begin <= y_end\nelse\n  raise(IndexError.new(\"`y_begin` must be less than or equal to `y_end` (#{y_begin}, #{y_end})\"))\nend\nif x_begin <= x_end\nelse\n  raise(IndexError.new(\"`x_begin` must be less than or equal to `x_end` (#{x_begin}, #{x_end})\"))\nend\n(((query(y_end, x_end)) - (query(y_end, x_begin))) - (query(y_begin, x_end))) + (query(y_begin, x_begin))\n"}},{"html_id":"get(y_range:Range(Int|Nil,Int|Nil),x_range:Range(Int|Nil,Int|Nil)):T-instance-method","name":"get","doc":"累積和を取得します。\n\nRange(y_begin, y_end), Range(x_begin, x_end) で指定します。\n\n```\ncsum = DynamicRectangleSum.new(a)\ncsum.get(0...h, j..j + 2) # => 28\n```","summary":"<p>累積和を取得します。</p>","abstract":false,"args":[{"name":"y_range","external_name":"y_range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"x_range","external_name":"x_range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"args_string":"(y_range : Range(Int | Nil, Int | Nil), x_range : Range(Int | Nil, Int | Nil)) : T","args_html":"(y_range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil), x_range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil)) : T","location":{"filename":"src/nglib/data_structure/dynamic_rectangle_sum.cr","line_number":105,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/dynamic_rectangle_sum.cr#L105"},"def":{"name":"get","args":[{"name":"y_range","external_name":"y_range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"x_range","external_name":"x_range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"return_type":"T","visibility":"Public","body":"y_begin = (y_range.begin || 0)\ny_end = (y_range.end || @height) + (y_range.exclusive? || y_range.end.nil? ? 0 : 1)\nx_begin = (x_range.begin || 0)\nx_end = (x_range.end || @height) + (x_range.exclusive? || x_range.end.nil? ? 0 : 1)\nget(y_begin, y_end, x_begin, x_end)\n"}},{"html_id":"get?(y_begin:Int,y_end:Int,x_begin:Int,x_end:Int):T|Nil-instance-method","name":"get?","doc":"累積和を返します。\n\n[y_begin, y_end), [x_begin, x_end) で指定します。\n\n範囲内に要素が存在しない場合 nil を返します。\n\nNOTE: このAPIは非推奨です。Rangeで指定することが推奨されます。","summary":"<p>累積和を返します。</p>","abstract":false,"args":[{"name":"y_begin","external_name":"y_begin","restriction":"Int"},{"name":"y_end","external_name":"y_end","restriction":"Int"},{"name":"x_begin","external_name":"x_begin","restriction":"Int"},{"name":"x_end","external_name":"x_end","restriction":"Int"}],"args_string":"(y_begin : Int, y_end : Int, x_begin : Int, x_end : Int) : T | Nil","args_html":"(y_begin : <a href=\"../Int.html\">Int</a>, y_end : <a href=\"../Int.html\">Int</a>, x_begin : <a href=\"../Int.html\">Int</a>, x_end : <a href=\"../Int.html\">Int</a>) : T | Nil","location":{"filename":"src/nglib/data_structure/dynamic_rectangle_sum.cr","line_number":91,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/dynamic_rectangle_sum.cr#L91"},"def":{"name":"get?","args":[{"name":"y_begin","external_name":"y_begin","restriction":"Int"},{"name":"y_end","external_name":"y_end","restriction":"Int"},{"name":"x_begin","external_name":"x_begin","restriction":"Int"},{"name":"x_end","external_name":"x_end","restriction":"Int"}],"return_type":"T | ::Nil","visibility":"Public","body":"if y_begin <= y_end\nelse\n  return nil\nend\nif x_begin <= x_end\nelse\n  return nil\nend\n(((query(y_end, x_end)) - (query(y_end, x_begin))) - (query(y_begin, x_end))) + (query(y_begin, x_end))\n"}},{"html_id":"get?(y_range:Range(Int|Nil,Int|Nil),x_range:Range(Int|Nil,Int|Nil)):T|Nil-instance-method","name":"get?","doc":"累積和を返します。\n\n[y_begin, y_end), [x_begin, x_end) で指定します。\n\n範囲内に要素が存在しない場合 nil を返します。\n\n```\ncsum = DynamicRectangleSum.new(a)\ncsum.get?(0...h, j..j + 2)     # => 28\ncsum.get?(0...100*h, j..j + 2) # => nil\n```","summary":"<p>累積和を返します。</p>","abstract":false,"args":[{"name":"y_range","external_name":"y_range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"x_range","external_name":"x_range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"args_string":"(y_range : Range(Int | Nil, Int | Nil), x_range : Range(Int | Nil, Int | Nil)) : T | Nil","args_html":"(y_range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil), x_range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil)) : T | Nil","location":{"filename":"src/nglib/data_structure/dynamic_rectangle_sum.cr","line_number":124,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/dynamic_rectangle_sum.cr#L124"},"def":{"name":"get?","args":[{"name":"y_range","external_name":"y_range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"x_range","external_name":"x_range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"return_type":"T | ::Nil","visibility":"Public","body":"y_begin = (y_range.begin || 0)\ny_end = (y_range.end || @height) + (y_range.exclusive? || y_range.end.nil? ? 0 : 1)\nx_begin = (x_range.begin || 0)\nx_end = (x_range.end || @height) + (x_range.exclusive? || x_range.end.nil? ? 0 : 1)\nget?(y_begin, y_end, x_begin, x_end)\n"}},{"html_id":"height:Int32-instance-method","name":"height","abstract":false,"location":{"filename":"src/nglib/data_structure/dynamic_rectangle_sum.cr","line_number":4,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/dynamic_rectangle_sum.cr#L4"},"def":{"name":"height","return_type":"Int32","visibility":"Public","body":"@height"}},{"html_id":"width:Int32-instance-method","name":"width","abstract":false,"location":{"filename":"src/nglib/data_structure/dynamic_rectangle_sum.cr","line_number":5,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/dynamic_rectangle_sum.cr#L5"},"def":{"name":"width","return_type":"Int32","visibility":"Public","body":"@width"}}]},{"html_id":"nglib/NgLib/Edge","path":"NgLib/Edge.html","kind":"struct","full_name":"NgLib::Edge","name":"Edge","abstract":false,"superclass":{"html_id":"nglib/Struct","kind":"struct","full_name":"Struct","name":"Struct"},"ancestors":[{"html_id":"nglib/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"nglib/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"nglib/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/nglib/graph/weighted_edge.cr","line_number":2,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/weighted_edge.cr#L2"}],"repository_name":"nglib","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"nglib/NgLib","kind":"module","full_name":"NgLib","name":"NgLib"},"class_methods":[{"html_id":"to-class-method","name":"to","abstract":false,"location":{"filename":"src/nglib/graph/weighted_edge.cr","line_number":9,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/weighted_edge.cr#L9"},"def":{"name":"to","visibility":"Public","body":"@data[0]"}},{"html_id":"weight-class-method","name":"weight","abstract":false,"location":{"filename":"src/nglib/graph/weighted_edge.cr","line_number":13,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/weighted_edge.cr#L13"},"def":{"name":"weight","visibility":"Public","body":"@data[1]"}}],"constructors":[{"html_id":"new(t:Int64,w:Int64)-class-method","name":"new","abstract":false,"args":[{"name":"t","external_name":"t","restriction":"Int64"},{"name":"w","external_name":"w","restriction":"Int64"}],"args_string":"(t : Int64, w : Int64)","args_html":"(t : Int64, w : Int64)","location":{"filename":"src/nglib/graph/weighted_edge.cr","line_number":5,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/weighted_edge.cr#L5"},"def":{"name":"new","args":[{"name":"t","external_name":"t","restriction":"Int64"},{"name":"w","external_name":"w","restriction":"Int64"}],"visibility":"Public","body":"_ = allocate\n_.initialize(t, w)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"[](i:Int)-instance-method","name":"[]","abstract":false,"args":[{"name":"i","external_name":"i","restriction":"Int"}],"args_string":"(i : Int)","args_html":"(i : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/graph/weighted_edge.cr","line_number":17,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/weighted_edge.cr#L17"},"def":{"name":"[]","args":[{"name":"i","external_name":"i","restriction":"Int"}],"visibility":"Public","body":"@data[i]"}}]},{"html_id":"nglib/NgLib/EulerTourTree","path":"NgLib/EulerTourTree.html","kind":"class","full_name":"NgLib::EulerTourTree","name":"EulerTourTree","abstract":false,"superclass":{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"nglib/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/nglib/graph/euler_tour_tree.cr","line_number":4,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/euler_tour_tree.cr#L4"}],"repository_name":"nglib","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"nglib/NgLib","kind":"module","full_name":"NgLib","name":"NgLib"},"constructors":[{"html_id":"new(n:Int)-class-method","name":"new","doc":"n 頂点 0 辺のグラフを生成します。\n\n```\ntree = EulerTourTree.new(n)\n```","summary":"<p>n 頂点 0 辺のグラフを生成します。</p>","abstract":false,"args":[{"name":"n","external_name":"n","restriction":"Int"}],"args_string":"(n : Int)","args_html":"(n : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/graph/euler_tour_tree.cr","line_number":23,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/euler_tour_tree.cr#L23"},"def":{"name":"new","args":[{"name":"n","external_name":"n","restriction":"Int"}],"visibility":"Public","body":"_ = allocate\n_.initialize(n)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"add_edge(u:Int,v:Int)-instance-method","name":"add_edge","doc":"無向辺 (u, v) を追加します。\n\n```\ntree = EulerTourTree.new(n)\ntree.add_edge(u, v)\n```","summary":"<p>無向辺 (u, v) を追加します。</p>","abstract":false,"args":[{"name":"u","external_name":"u","restriction":"Int"},{"name":"v","external_name":"v","restriction":"Int"}],"args_string":"(u : Int, v : Int)","args_html":"(u : <a href=\"../Int.html\">Int</a>, v : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/graph/euler_tour_tree.cr","line_number":43,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/euler_tour_tree.cr#L43"},"def":{"name":"add_edge","args":[{"name":"u","external_name":"u","restriction":"Int"},{"name":"v","external_name":"v","restriction":"Int"}],"visibility":"Public","body":"@graph[u] << v.to_i32\n@graph[v] << u.to_i32\n"}},{"html_id":"build(root:Int=0)-instance-method","name":"build","doc":"実際にオイラーツアーします。\n\nitinerary などが正しく構築されます。\n\n```\ntree = EulerTourTree.new(n)\ntree.build\ntree.build(root: 3)\n```","summary":"<p>実際にオイラーツアーします。</p>","abstract":false,"args":[{"name":"root","default_value":"0","external_name":"root","restriction":"Int"}],"args_string":"(root : Int = 0)","args_html":"(root : <a href=\"../Int.html\">Int</a> = <span class=\"n\">0</span>)","location":{"filename":"src/nglib/graph/euler_tour_tree.cr","line_number":57,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/euler_tour_tree.cr#L57"},"def":{"name":"build","args":[{"name":"root","default_value":"0","external_name":"root","restriction":"Int"}],"visibility":"Public","body":"dfs(root.to_i32, -1, 0)\n@min_depth = SparseTable(Int32).min(@depths)\n"}},{"html_id":"depths:Array(Int32)-instance-method","name":"depths","abstract":false,"location":{"filename":"src/nglib/graph/euler_tour_tree.cr","line_number":14,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/euler_tour_tree.cr#L14"},"def":{"name":"depths","return_type":"Array(Int32)","visibility":"Public","body":"@depths"}},{"html_id":"edge_costs_on_root_path(zero=U.zero,&:Int32,Int32->U)forallU-instance-method","name":"edge_costs_on_root_path","doc":"根からのパスに現れる辺のコストの総和を求めるためのリストを返します。\n\n`zero` には「総和」の単位元を渡してください。\n\nリストの i 番目には時刻 i に訪れた頂点と、\n時刻 i - 1 に訪れた頂点を結ぶ辺のコストが格納されています。\nただし、その辺が時刻 i 以前に訪問済みだった場合は、マイナス倍された値が格納されます。\nまた、時刻 0 と時刻 itinerary.size には zero が格納されます。\n\n辺 (u, v) のコストが w 変更される場合は、\n頂点 u, v のうち、**後に**訪れる方の頂点 bwd をとして、\nこのリストの @login[bwd] 番目を w に、@logout[bwd] 番目を -w にしてください。\n\n```\ntree = EulerTourTree.new(n)\ntree.build\ntree.edge_costs_on_root_path { |u, v| edge_cost[{u, v}] }\n```","summary":"<p>根からのパスに現れる辺のコストの総和を求めるためのリストを返します。</p>","abstract":false,"args":[{"name":"zero","default_value":"U.zero","external_name":"zero","restriction":""}],"args_string":"(zero = U.zero, & : Int32, Int32 -> U) forall U","args_html":"(zero = <span class=\"t\">U</span>.zero, & : Int32, Int32 -> U) forall U","location":{"filename":"src/nglib/graph/euler_tour_tree.cr","line_number":189,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/euler_tour_tree.cr#L189"},"def":{"name":"edge_costs_on_root_path","args":[{"name":"zero","default_value":"U.zero","external_name":"zero","restriction":""}],"yields":2,"block_arity":2,"block_arg":{"name":"","external_name":"","restriction":"(Int32, Int32 -> U)"},"visibility":"Public","body":"costs = Array(U).new(itinerary.size + 1)\ncosts << U.zero\n(itinerary.size - 1).times do |i|\n  s = itinerary[i]\n  t = itinerary[i + 1]\n  if @parents[t] == s\n    costs << (yield s, t)\n  else\n    costs << (-(yield s, t))\n  end\nend\ncosts << U.zero\n"}},{"html_id":"itinerary:Array(Int32)-instance-method","name":"itinerary","abstract":false,"location":{"filename":"src/nglib/graph/euler_tour_tree.cr","line_number":9,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/euler_tour_tree.cr#L9"},"def":{"name":"itinerary","return_type":"Array(Int32)","visibility":"Public","body":"@itinerary"}},{"html_id":"lca(u:Int,v:Int)-instance-method","name":"lca","doc":"頂点 u と頂点 v の最小共通祖先を返します。\n\n```\ntree = EulerTourTree.new(n)\ntree.build\ntree.lca(u, v)\n```","summary":"<p>頂点 u と頂点 v の最小共通祖先を返します。</p>","abstract":false,"args":[{"name":"u","external_name":"u","restriction":"Int"},{"name":"v","external_name":"v","restriction":"Int"}],"args_string":"(u : Int, v : Int)","args_html":"(u : <a href=\"../Int.html\">Int</a>, v : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/graph/euler_tour_tree.cr","line_number":69,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/euler_tour_tree.cr#L69"},"def":{"name":"lca","args":[{"name":"u","external_name":"u","restriction":"Int"},{"name":"v","external_name":"v","restriction":"Int"}],"visibility":"Public","body":"l = {@login[u], @logout[u], @login[v], @logout[v]}.min\nr = {@login[u], @logout[u], @login[v], @logout[v]}.max\nmn = @min_depth[l...r]\nok = r\nng = l\nwhile (ok - ng) > 1\n  mid = (ok + ng) // 2\n  if @min_depth[l...mid] == mn\n    ok = mid\n  else\n    ng = mid\n  end\nend\n@itinerary[ok - 1]\n"}},{"html_id":"login:Array(Int32)-instance-method","name":"login","abstract":false,"location":{"filename":"src/nglib/graph/euler_tour_tree.cr","line_number":10,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/euler_tour_tree.cr#L10"},"def":{"name":"login","return_type":"Array(Int32)","visibility":"Public","body":"@login"}},{"html_id":"logout:Array(Int32)-instance-method","name":"logout","abstract":false,"location":{"filename":"src/nglib/graph/euler_tour_tree.cr","line_number":11,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/euler_tour_tree.cr#L11"},"def":{"name":"logout","return_type":"Array(Int32)","visibility":"Public","body":"@logout"}},{"html_id":"node_costs_on_root_path(&:Int32->U)forallU-instance-method","name":"node_costs_on_root_path","doc":"根からのパスに現れる頂点のコストの総和を求めるためのリストを返します。\n\nリストの i 番目には時刻 i に訪れた頂点のコストが格納されています。\nただし、その頂点が時刻 i 以前に訪問済みだった場合は、マイナス倍された値が格納されます。\n\n頂点 v のコストが w 変更される場合は、\nこのリストの @login[v] 番目を w に、それ以降で v が現れる時刻番目を -w にすると良いです。\n（つまり、計算量がそこそこかかりそう？）\n\n```\ntree = EulerTourTree.new(n)\ntree.build\ntree.node_costs_on_root_path { |v| node_costs[v] }\n```","summary":"<p>根からのパスに現れる頂点のコストの総和を求めるためのリストを返します。</p>","abstract":false,"location":{"filename":"src/nglib/graph/euler_tour_tree.cr","line_number":155,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/euler_tour_tree.cr#L155"},"def":{"name":"node_costs_on_root_path","yields":1,"block_arity":1,"block_arg":{"name":"","external_name":"","restriction":"(Int32 -> U)"},"visibility":"Public","body":"root = itinerary[0]\ncosts = Array(U).new(itinerary.size + 1)\ncosts << (yield root)\n(itinerary.size - 1).times do |i|\n  s = itinerary[i]\n  t = itinerary[i + 1]\n  if @parents[t] == s\n    costs << (yield t)\n  else\n    costs << (-(yield s))\n  end\nend\ncosts << (-(yield root))\n"}},{"html_id":"parents:Array(Int32)-instance-method","name":"parents","abstract":false,"location":{"filename":"src/nglib/graph/euler_tour_tree.cr","line_number":13,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/euler_tour_tree.cr#L13"},"def":{"name":"parents","return_type":"Array(Int32)","visibility":"Public","body":"@parents"}},{"html_id":"subtree_edge_costs(zero=U.zero,&:Int32,Int32->U)forallU-instance-method","name":"subtree_edge_costs","doc":"根を x とする部分木の辺のコストの総和を求めるためのリストを返します。\n\n`zero` には「総和」の単位元を渡してください。\n\nリストの i 番目には時刻 i に訪れた頂点と、\n時刻 i - 1 に訪れた頂点を結ぶ辺のコストが格納されています。\nただし、その辺が時刻 i 以前に訪問済みだった場合は zero が格納されます\n\n無向辺 (u, v) のコストが w に変更される場合は、\n頂点 u, v のうち、**後に**訪れる方の頂点を bwd として、\nこのリストの @login[bwd] 番目を w にすると良いです。\n\n```\ntree = EulerTourTree.new(n)\ntree.build\nedge_cost = Hash({Int32, Int32}, Int64).new\ntree.subtree_edge_costs { |u, v| edge_cost[{u, v}] }\n```","summary":"<p>根を x とする部分木の辺のコストの総和を求めるためのリストを返します。</p>","abstract":false,"args":[{"name":"zero","default_value":"U.zero","external_name":"zero","restriction":""}],"args_string":"(zero = U.zero, & : Int32, Int32 -> U) forall U","args_html":"(zero = <span class=\"t\">U</span>.zero, & : Int32, Int32 -> U) forall U","location":{"filename":"src/nglib/graph/euler_tour_tree.cr","line_number":131,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/euler_tour_tree.cr#L131"},"def":{"name":"subtree_edge_costs","args":[{"name":"zero","default_value":"U.zero","external_name":"zero","restriction":""}],"yields":2,"block_arity":2,"block_arg":{"name":"","external_name":"","restriction":"(Int32, Int32 -> U)"},"visibility":"Public","body":"costs = Array(U).new(itinerary.size) do\n  zero\nend\n@size.times do |v|\n  t = @login[v]\n  if t == 0\n    next\n  end\n  par = @parents[v]\n  costs[t] = yield par, v\nend\n"}},{"html_id":"subtree_node_costs(zero=U.zero,&:Int32->U)forallU-instance-method","name":"subtree_node_costs","doc":"根を x とする部分木の頂点のコストの総和を求めるためのリストを返します。\n\n`zero` には「総和」の単位元を渡してください。\n\nリストの i 番目には時刻 i に訪れた頂点のコストが格納されています。\nただし、その頂点が時刻 i 以前に訪問済みだった場合は zero が格納されます。\n\n頂点 v のコストが w 変更される場合は、\nこのリストの @login[v] 番目を w にすると良いです。\n\n```\ntree = EulerTourTree.new(n)\ntree.build\nnode_cost = Array.new(n)\ntree.subtree_node_costs { |v| node_costs[v] }\n```","summary":"<p>根を x とする部分木の頂点のコストの総和を求めるためのリストを返します。</p>","abstract":false,"args":[{"name":"zero","default_value":"U.zero","external_name":"zero","restriction":""}],"args_string":"(zero = U.zero, & : Int32 -> U) forall U","args_html":"(zero = <span class=\"t\">U</span>.zero, & : Int32 -> U) forall U","location":{"filename":"src/nglib/graph/euler_tour_tree.cr","line_number":104,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/euler_tour_tree.cr#L104"},"def":{"name":"subtree_node_costs","args":[{"name":"zero","default_value":"U.zero","external_name":"zero","restriction":""}],"yields":1,"block_arity":1,"block_arg":{"name":"","external_name":"","restriction":"(Int32 -> U)"},"visibility":"Public","body":"costs = Array(U).new(itinerary.size) do\n  zero\nend\n@size.times do |v|\n  t = @login[v]\n  cost = yield v\n  costs[t] = cost\nend\n"}},{"html_id":"sum_edge_cost_on_path_to(v:Int,&:Int32,Int32->U)forallU-instance-method","name":"sum_edge_cost_on_path_to","doc":"根から頂点 v へのパスに現れる辺のコストの総和を返します。\n\nブロックでは整数 l, r が与えられるので、\nroot_path_edge_costs の [l, r) までの総和を返してください。\n\n```\ntree = EulerTourTree.new(n)\ntree.build\ncosts = tree.root_path_node_costs { |v| node_costs[v] }\ncsum = StaticRangeSum.new(costs)\ntree.sum_edge_cost_on_path_to(v: 3) { |l, r| csum[l...r] }\n```","summary":"<p>根から頂点 v へのパスに現れる辺のコストの総和を返します。</p>","abstract":false,"args":[{"name":"v","external_name":"v","restriction":"Int"}],"args_string":"(v : Int, & : Int32, Int32 -> U) forall U","args_html":"(v : <a href=\"../Int.html\">Int</a>, & : Int32, Int32 -> U) forall U","location":{"filename":"src/nglib/graph/euler_tour_tree.cr","line_number":271,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/euler_tour_tree.cr#L271"},"def":{"name":"sum_edge_cost_on_path_to","args":[{"name":"v","external_name":"v","restriction":"Int"}],"yields":2,"block_arity":2,"block_arg":{"name":"","external_name":"","restriction":"(Int32, Int32 -> U)"},"visibility":"Public","body":"r = @login[v]\nyield 1, r + 1\n"}},{"html_id":"sum_node_cost_on_path_to(v:Int,&:Int32,Int32->U)forallU-instance-method","name":"sum_node_cost_on_path_to","doc":"根から頂点 v へのパスに現れる頂点のコストの総和を返します。\n\nブロックでは整数 l, r が与えられるので、\nroot_path_node_costs の [l, r) までの総和を返してください。\n\n```\ntree = EulerTourTree.new(n)\ntree.build\ncosts = tree.root_path_node_costs { |v| node_costs[v] }\ncsum = StaticRangeSum.new(costs)\ntree.sum_node_cost_on_path_to(v: 3) { |l, r| csum[l...r] }\n```","summary":"<p>根から頂点 v へのパスに現れる頂点のコストの総和を返します。</p>","abstract":false,"args":[{"name":"v","external_name":"v","restriction":"Int"}],"args_string":"(v : Int, & : Int32, Int32 -> U) forall U","args_html":"(v : <a href=\"../Int.html\">Int</a>, & : Int32, Int32 -> U) forall U","location":{"filename":"src/nglib/graph/euler_tour_tree.cr","line_number":254,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/euler_tour_tree.cr#L254"},"def":{"name":"sum_node_cost_on_path_to","args":[{"name":"v","external_name":"v","restriction":"Int"}],"yields":2,"block_arity":2,"block_arg":{"name":"","external_name":"","restriction":"(Int32, Int32 -> U)"},"visibility":"Public","body":"r = @login[v]\nyield 0, r + 1\n"}},{"html_id":"sum_subtree_edge_cost(subroot:Int,&:Int32,Int32->U)forallU-instance-method","name":"sum_subtree_edge_cost","doc":"根を subroot とする部分木の辺のコストの総和を返します。\n\nブロックでは整数 l, r が与えられるので、\nsubtree_edge_costs の [l, r) までの総和を返してください。\n\n```\ntree = EulerTourTree.new(n)\ntree.build\nedge_cost = Hash({Int32, Int32}, Int64).new\ncosts = tree.subtree_node_costs { |u, v| edge_cost[{u, v}] }\ncsum = StaticRangeSum.new(costs)\ntree.sum_subtree_edge_cost(subroot: 3) { |l, r| csum[l...r] }\n```","summary":"<p>根を subroot とする部分木の辺のコストの総和を返します。</p>","abstract":false,"args":[{"name":"subroot","external_name":"subroot","restriction":"Int"}],"args_string":"(subroot : Int, & : Int32, Int32 -> U) forall U","args_html":"(subroot : <a href=\"../Int.html\">Int</a>, & : Int32, Int32 -> U) forall U","location":{"filename":"src/nglib/graph/euler_tour_tree.cr","line_number":236,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/euler_tour_tree.cr#L236"},"def":{"name":"sum_subtree_edge_cost","args":[{"name":"subroot","external_name":"subroot","restriction":"Int"}],"yields":2,"block_arity":2,"block_arg":{"name":"","external_name":"","restriction":"(Int32, Int32 -> U)"},"visibility":"Public","body":"l = @login[subroot]\nr = @logout[subroot]\nyield l + 1, r\n"}},{"html_id":"sum_subtree_node_cost(subroot:Int,&:Int32,Int32->U)forallU-instance-method","name":"sum_subtree_node_cost","doc":"根を subroot とする部分木の頂点のコストの総和を返します。\n\nブロックでは整数 l, r が与えられるので、\nsubtree_node_costs の [l, r) までの総和を返してください。\n\n```\ntree = EulerTourTree.new(n)\ntree.build\nnode_cost = Array.new(n)\ncosts = tree.subtree_node_costs { |v| node_costs[v] }\ncsum = StaticRangeSum.new(costs)\ntree.sum_subtree_node_cost(subroot: 3) { |l, r| csum[l...r] }\n```","summary":"<p>根を subroot とする部分木の頂点のコストの総和を返します。</p>","abstract":false,"args":[{"name":"subroot","external_name":"subroot","restriction":"Int"}],"args_string":"(subroot : Int, & : Int32, Int32 -> U) forall U","args_html":"(subroot : <a href=\"../Int.html\">Int</a>, & : Int32, Int32 -> U) forall U","location":{"filename":"src/nglib/graph/euler_tour_tree.cr","line_number":217,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/euler_tour_tree.cr#L217"},"def":{"name":"sum_subtree_node_cost","args":[{"name":"subroot","external_name":"subroot","restriction":"Int"}],"yields":2,"block_arity":2,"block_arg":{"name":"","external_name":"","restriction":"(Int32, Int32 -> U)"},"visibility":"Public","body":"l = @login[subroot]\nr = @logout[subroot]\nyield l, r\n"}}]},{"html_id":"nglib/NgLib/FastIn","path":"NgLib/FastIn.html","kind":"module","full_name":"NgLib::FastIn","name":"FastIn","abstract":false,"locations":[{"filename":"src/nglib/utils/fastin.cr","line_number":2,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/utils/fastin.cr#L2"}],"repository_name":"nglib","program":false,"enum":false,"alias":false,"const":false,"extended_modules":[{"html_id":"nglib/NgLib/FastIn","kind":"module","full_name":"NgLib::FastIn","name":"FastIn"}],"namespace":{"html_id":"nglib/NgLib","kind":"module","full_name":"NgLib","name":"NgLib"},"types":[{"html_id":"nglib/NgLib/FastIn/Scanner","path":"NgLib/FastIn/Scanner.html","kind":"module","full_name":"NgLib::FastIn::Scanner","name":"Scanner","abstract":false,"locations":[{"filename":"src/nglib/utils/fastin.cr","line_number":9,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/utils/fastin.cr#L9"}],"repository_name":"nglib","program":false,"enum":false,"alias":false,"const":false,"extended_modules":[{"html_id":"nglib/NgLib/FastIn/Scanner","kind":"module","full_name":"NgLib::FastIn::Scanner","name":"Scanner"}],"namespace":{"html_id":"nglib/NgLib/FastIn","kind":"module","full_name":"NgLib::FastIn","name":"FastIn"},"instance_methods":[{"html_id":"read_char:Char-instance-method","name":"read_char","abstract":false,"location":{"filename":"src/nglib/utils/fastin.cr","line_number":38,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/utils/fastin.cr#L38"},"def":{"name":"read_char","return_type":"Char","visibility":"Public","body":"next_char"}},{"html_id":"read_i128(offset=0)-instance-method","name":"read_i128","abstract":false,"args":[{"name":"offset","default_value":"0","external_name":"offset","restriction":""}],"args_string":"(offset = 0)","args_html":"(offset = <span class=\"n\">0</span>)","location":{"filename":"src/nglib/utils/fastin.cr","line_number":12,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/utils/fastin.cr#L12"},"def":{"name":"read_i128","args":[{"name":"offset","default_value":"0","external_name":"offset","restriction":""}],"visibility":"Public","body":"c = next_char\nres = Int128.new(c.ord - '0'.ord)\nsgn = 1\ncase c\nwhen '-'\n  res = Int128.new(LibC.getchar.ord - '0'.ord)\n  sgn = -1\nwhen '+'\n  res = Int128.new(LibC.getchar.ord - '0'.ord)\nend\nwhile !(ascii_voidchar?(c = LibC.getchar))\n  res = (res * 10) + (c.ord - '0'.ord)\nend\n(res * sgn) + offset\n"}},{"html_id":"read_i16(offset=0)-instance-method","name":"read_i16","abstract":false,"args":[{"name":"offset","default_value":"0","external_name":"offset","restriction":""}],"args_string":"(offset = 0)","args_html":"(offset = <span class=\"n\">0</span>)","location":{"filename":"src/nglib/utils/fastin.cr","line_number":12,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/utils/fastin.cr#L12"},"def":{"name":"read_i16","args":[{"name":"offset","default_value":"0","external_name":"offset","restriction":""}],"visibility":"Public","body":"c = next_char\nres = Int16.new(c.ord - '0'.ord)\nsgn = 1\ncase c\nwhen '-'\n  res = Int16.new(LibC.getchar.ord - '0'.ord)\n  sgn = -1\nwhen '+'\n  res = Int16.new(LibC.getchar.ord - '0'.ord)\nend\nwhile !(ascii_voidchar?(c = LibC.getchar))\n  res = (res * 10) + (c.ord - '0'.ord)\nend\n(res * sgn) + offset\n"}},{"html_id":"read_i32(offset=0)-instance-method","name":"read_i32","abstract":false,"args":[{"name":"offset","default_value":"0","external_name":"offset","restriction":""}],"args_string":"(offset = 0)","args_html":"(offset = <span class=\"n\">0</span>)","location":{"filename":"src/nglib/utils/fastin.cr","line_number":12,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/utils/fastin.cr#L12"},"def":{"name":"read_i32","args":[{"name":"offset","default_value":"0","external_name":"offset","restriction":""}],"visibility":"Public","body":"c = next_char\nres = Int32.new(c.ord - '0'.ord)\nsgn = 1\ncase c\nwhen '-'\n  res = Int32.new(LibC.getchar.ord - '0'.ord)\n  sgn = -1\nwhen '+'\n  res = Int32.new(LibC.getchar.ord - '0'.ord)\nend\nwhile !(ascii_voidchar?(c = LibC.getchar))\n  res = (res * 10) + (c.ord - '0'.ord)\nend\n(res * sgn) + offset\n"}},{"html_id":"read_i64(offset=0)-instance-method","name":"read_i64","abstract":false,"args":[{"name":"offset","default_value":"0","external_name":"offset","restriction":""}],"args_string":"(offset = 0)","args_html":"(offset = <span class=\"n\">0</span>)","location":{"filename":"src/nglib/utils/fastin.cr","line_number":12,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/utils/fastin.cr#L12"},"def":{"name":"read_i64","args":[{"name":"offset","default_value":"0","external_name":"offset","restriction":""}],"visibility":"Public","body":"c = next_char\nres = Int64.new(c.ord - '0'.ord)\nsgn = 1\ncase c\nwhen '-'\n  res = Int64.new(LibC.getchar.ord - '0'.ord)\n  sgn = -1\nwhen '+'\n  res = Int64.new(LibC.getchar.ord - '0'.ord)\nend\nwhile !(ascii_voidchar?(c = LibC.getchar))\n  res = (res * 10) + (c.ord - '0'.ord)\nend\n(res * sgn) + offset\n"}},{"html_id":"read_i8(offset=0)-instance-method","name":"read_i8","abstract":false,"args":[{"name":"offset","default_value":"0","external_name":"offset","restriction":""}],"args_string":"(offset = 0)","args_html":"(offset = <span class=\"n\">0</span>)","location":{"filename":"src/nglib/utils/fastin.cr","line_number":12,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/utils/fastin.cr#L12"},"def":{"name":"read_i8","args":[{"name":"offset","default_value":"0","external_name":"offset","restriction":""}],"visibility":"Public","body":"c = next_char\nres = Int8.new(c.ord - '0'.ord)\nsgn = 1\ncase c\nwhen '-'\n  res = Int8.new(LibC.getchar.ord - '0'.ord)\n  sgn = -1\nwhen '+'\n  res = Int8.new(LibC.getchar.ord - '0'.ord)\nend\nwhile !(ascii_voidchar?(c = LibC.getchar))\n  res = (res * 10) + (c.ord - '0'.ord)\nend\n(res * sgn) + offset\n"}},{"html_id":"read_u128(offset=0)-instance-method","name":"read_u128","abstract":false,"args":[{"name":"offset","default_value":"0","external_name":"offset","restriction":""}],"args_string":"(offset = 0)","args_html":"(offset = <span class=\"n\">0</span>)","location":{"filename":"src/nglib/utils/fastin.cr","line_number":12,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/utils/fastin.cr#L12"},"def":{"name":"read_u128","args":[{"name":"offset","default_value":"0","external_name":"offset","restriction":""}],"visibility":"Public","body":"c = next_char\nres = UInt128.new(c.ord - '0'.ord)\nsgn = 1\ncase c\nwhen '-'\n  res = UInt128.new(LibC.getchar.ord - '0'.ord)\n  sgn = -1\nwhen '+'\n  res = UInt128.new(LibC.getchar.ord - '0'.ord)\nend\nwhile !(ascii_voidchar?(c = LibC.getchar))\n  res = (res * 10) + (c.ord - '0'.ord)\nend\n(res * sgn) + offset\n"}},{"html_id":"read_u16(offset=0)-instance-method","name":"read_u16","abstract":false,"args":[{"name":"offset","default_value":"0","external_name":"offset","restriction":""}],"args_string":"(offset = 0)","args_html":"(offset = <span class=\"n\">0</span>)","location":{"filename":"src/nglib/utils/fastin.cr","line_number":12,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/utils/fastin.cr#L12"},"def":{"name":"read_u16","args":[{"name":"offset","default_value":"0","external_name":"offset","restriction":""}],"visibility":"Public","body":"c = next_char\nres = UInt16.new(c.ord - '0'.ord)\nsgn = 1\ncase c\nwhen '-'\n  res = UInt16.new(LibC.getchar.ord - '0'.ord)\n  sgn = -1\nwhen '+'\n  res = UInt16.new(LibC.getchar.ord - '0'.ord)\nend\nwhile !(ascii_voidchar?(c = LibC.getchar))\n  res = (res * 10) + (c.ord - '0'.ord)\nend\n(res * sgn) + offset\n"}},{"html_id":"read_u32(offset=0)-instance-method","name":"read_u32","abstract":false,"args":[{"name":"offset","default_value":"0","external_name":"offset","restriction":""}],"args_string":"(offset = 0)","args_html":"(offset = <span class=\"n\">0</span>)","location":{"filename":"src/nglib/utils/fastin.cr","line_number":12,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/utils/fastin.cr#L12"},"def":{"name":"read_u32","args":[{"name":"offset","default_value":"0","external_name":"offset","restriction":""}],"visibility":"Public","body":"c = next_char\nres = UInt32.new(c.ord - '0'.ord)\nsgn = 1\ncase c\nwhen '-'\n  res = UInt32.new(LibC.getchar.ord - '0'.ord)\n  sgn = -1\nwhen '+'\n  res = UInt32.new(LibC.getchar.ord - '0'.ord)\nend\nwhile !(ascii_voidchar?(c = LibC.getchar))\n  res = (res * 10) + (c.ord - '0'.ord)\nend\n(res * sgn) + offset\n"}},{"html_id":"read_u64(offset=0)-instance-method","name":"read_u64","abstract":false,"args":[{"name":"offset","default_value":"0","external_name":"offset","restriction":""}],"args_string":"(offset = 0)","args_html":"(offset = <span class=\"n\">0</span>)","location":{"filename":"src/nglib/utils/fastin.cr","line_number":12,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/utils/fastin.cr#L12"},"def":{"name":"read_u64","args":[{"name":"offset","default_value":"0","external_name":"offset","restriction":""}],"visibility":"Public","body":"c = next_char\nres = UInt64.new(c.ord - '0'.ord)\nsgn = 1\ncase c\nwhen '-'\n  res = UInt64.new(LibC.getchar.ord - '0'.ord)\n  sgn = -1\nwhen '+'\n  res = UInt64.new(LibC.getchar.ord - '0'.ord)\nend\nwhile !(ascii_voidchar?(c = LibC.getchar))\n  res = (res * 10) + (c.ord - '0'.ord)\nend\n(res * sgn) + offset\n"}},{"html_id":"read_u8(offset=0)-instance-method","name":"read_u8","abstract":false,"args":[{"name":"offset","default_value":"0","external_name":"offset","restriction":""}],"args_string":"(offset = 0)","args_html":"(offset = <span class=\"n\">0</span>)","location":{"filename":"src/nglib/utils/fastin.cr","line_number":12,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/utils/fastin.cr#L12"},"def":{"name":"read_u8","args":[{"name":"offset","default_value":"0","external_name":"offset","restriction":""}],"visibility":"Public","body":"c = next_char\nres = UInt8.new(c.ord - '0'.ord)\nsgn = 1\ncase c\nwhen '-'\n  res = UInt8.new(LibC.getchar.ord - '0'.ord)\n  sgn = -1\nwhen '+'\n  res = UInt8.new(LibC.getchar.ord - '0'.ord)\nend\nwhile !(ascii_voidchar?(c = LibC.getchar))\n  res = (res * 10) + (c.ord - '0'.ord)\nend\n(res * sgn) + offset\n"}},{"html_id":"read_word:String-instance-method","name":"read_word","abstract":false,"location":{"filename":"src/nglib/utils/fastin.cr","line_number":42,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/utils/fastin.cr#L42"},"def":{"name":"read_word","return_type":"String","visibility":"Public","body":"c = next_char\ns = [c]\nwhile !(ascii_voidchar?(c = LibC.getchar))\n  s << c\nend\ns.join\n"}}]}]},{"html_id":"nglib/NgLib/FloydWarshallGraph","path":"NgLib/FloydWarshallGraph.html","kind":"class","full_name":"NgLib::FloydWarshallGraph(T)","name":"FloydWarshallGraph","abstract":false,"superclass":{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"nglib/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/nglib/graph/floyd_warshall.cr","line_number":6,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/floyd_warshall.cr#L6"}],"repository_name":"nglib","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"nglib/NgLib","kind":"module","full_name":"NgLib","name":"NgLib"},"doc":"ワーシャル・フロイド法の実装です。\n\n（負を含む）重み付きグラフに対して、\n全点対最短経路長が $O(V^3)$ で求まります。","summary":"<p>ワーシャル・フロイド法の実装です。</p>","constructors":[{"html_id":"new(matrix:Array(Array(T|Nil)|Array(T)))-class-method","name":"new","doc":"隣接行列に従ってグラフを作ります。\n\n`nil` は辺が存在しないことを表します。\n無限大の重みを持つ辺と捉えても良いです。\n\n```\nmat = [[0, 3, 1], [-2, 0, 4], [nil, nil, 0]]\nNgLib::FloydWarshallGraph(Int32).new(mat)\n```","summary":"<p>隣接行列に従ってグラフを作ります。</p>","abstract":false,"args":[{"name":"matrix","external_name":"matrix","restriction":"Array(Array(T | ::Nil) | Array(T))"}],"args_string":"(matrix : Array(Array(T | Nil) | Array(T)))","args_html":"(matrix : Array(Array(T | Nil) | Array(T)))","location":{"filename":"src/nglib/graph/floyd_warshall.cr","line_number":41,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/floyd_warshall.cr#L41"},"def":{"name":"new","args":[{"name":"matrix","external_name":"matrix","restriction":"Array(Array(T | ::Nil) | Array(T))"}],"visibility":"Public","body":"_ = FloydWarshallGraph(T).allocate\n_.initialize(matrix)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"html_id":"new(mat:Array(Array(T|Nil)))-class-method","name":"new","doc":"隣接行列に従ってグラフを作ります。\n\n`nil` は辺が存在しないことを表します。\n無限大の重みを持つ辺と捉えても良いです。\n\n```\nmat = [[0, 3, 1], [-2, 0, 4], [nil, nil, 0]]\nNgLib::FloydWarshallGraph(Int32).new(mat)\n```","summary":"<p>隣接行列に従ってグラフを作ります。</p>","abstract":false,"args":[{"name":"mat","external_name":"mat","restriction":"Array(Array(T | ::Nil))"}],"args_string":"(mat : Array(Array(T | Nil)))","args_html":"(mat : Array(Array(T | Nil)))","location":{"filename":"src/nglib/graph/floyd_warshall.cr","line_number":33,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/floyd_warshall.cr#L33"},"def":{"name":"new","args":[{"name":"mat","external_name":"mat","restriction":"Array(Array(T | ::Nil))"}],"visibility":"Public","body":"_ = FloydWarshallGraph(T).allocate\n_.initialize(mat)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"html_id":"new(n:Int)-class-method","name":"new","doc":"$n$ 頂点 $0$ 辺のグラフを作ります。\n\n```\nn = 10\nNgLib::FloydWarshallGraph(Int64).new(n)\n```","summary":"<p>$n$ 頂点 $0$ 辺のグラフを作ります。</p>","abstract":false,"args":[{"name":"n","external_name":"n","restriction":"Int"}],"args_string":"(n : Int)","args_html":"(n : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/graph/floyd_warshall.cr","line_number":16,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/floyd_warshall.cr#L16"},"def":{"name":"new","args":[{"name":"n","external_name":"n","restriction":"Int"}],"visibility":"Public","body":"_ = FloydWarshallGraph(T).allocate\n_.initialize(n)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"add_edge(u:Int,v:Int,w:T,directed:Bool=false)-instance-method","name":"add_edge","doc":"重みが $w$ の辺 $(u, v)$ を追加します。\n\n`directed` が `true` である場合、有向辺として追加します。\n\n```\nn, m = read_line.split.map &.to_i\ngraph = NgLib::FloydWarshallGraph.new(n)\nm.times do\n  u, v, w = read_line.split.map &.to_i64\n  u -= 1; v -= 1 # 0-index\n  graph.add_edge(u, v, w, directed: true)\nend\n```","summary":"<p>重みが $w$ の辺 $(u, v)$ を追加します。</p>","abstract":false,"args":[{"name":"u","external_name":"u","restriction":"Int"},{"name":"v","external_name":"v","restriction":"Int"},{"name":"w","external_name":"w","restriction":"T"},{"name":"directed","default_value":"false","external_name":"directed","restriction":"Bool"}],"args_string":"(u : Int, v : Int, w : T, directed : Bool = false)","args_html":"(u : <a href=\"../Int.html\">Int</a>, v : <a href=\"../Int.html\">Int</a>, w : T, directed : Bool = <span class=\"n\">false</span>)","location":{"filename":"src/nglib/graph/floyd_warshall.cr","line_number":62,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/floyd_warshall.cr#L62"},"def":{"name":"add_edge","args":[{"name":"u","external_name":"u","restriction":"Int"},{"name":"v","external_name":"v","restriction":"Int"},{"name":"w","external_name":"w","restriction":"T"},{"name":"directed","default_value":"false","external_name":"directed","restriction":"Bool"}],"visibility":"Public","body":"uv = @mat[u][v]\nif uv.nil?\n  @mat[u][v] = w\nelse\n  @mat[u][v] = {uv, w}.min\nend\nif directed\nelse\n  vu = @mat[v][u]\n  if vu.nil?\n    @mat[v][u] = w\n  else\n    @mat[v][u] = {vu, w}.min\n  end\nend\n"}},{"html_id":"mat:Array(Array(T|Nil))-instance-method","name":"mat","abstract":false,"location":{"filename":"src/nglib/graph/floyd_warshall.cr","line_number":8,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/floyd_warshall.cr#L8"},"def":{"name":"mat","return_type":"Array(Array(T | ::Nil))","visibility":"Public","body":"@mat"}},{"html_id":"shortest_path-instance-method","name":"shortest_path","doc":"全点対最短経路長を返します。\n\nどのような経路を辿っても到達できない場合は `nil` が格納されます。\n\n```\nmat = [[0, 3, 1], [-2, 0, 4], [nil, nil, 0]]\ngraph = NgLib::FloydWarshallGraph.new(mat)\nd = graph.shortest_path # => [[0, 3, 1], [-2, 0, -1], [nil, nil, 0]]\nd[0][1]                 # => 3  (i から j への最短経路長)\n```","summary":"<p>全点対最短経路長を返します。</p>","abstract":false,"location":{"filename":"src/nglib/graph/floyd_warshall.cr","line_number":90,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/floyd_warshall.cr#L90"},"def":{"name":"shortest_path","visibility":"Public","body":"dist = @mat.clone\n@size.times do |via|\n  @size.times do |from|\n    @size.times do |dest|\n      d1 = dist[from][via]\n      d2 = dist[via][dest]\n      if d1.nil?\n        next\n      end\n      if d2.nil?\n        next\n      end\n      d = dist[from][dest]\n      if d.nil? || d > (d1 + d2)\n        dist[from][dest] = d1 + d2\n      end\n    end\n  end\nend\ndist\n"}},{"html_id":"size:Int32-instance-method","name":"size","abstract":false,"location":{"filename":"src/nglib/graph/floyd_warshall.cr","line_number":7,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/floyd_warshall.cr#L7"},"def":{"name":"size","return_type":"Int32","visibility":"Public","body":"@size"}}]},{"html_id":"nglib/NgLib/Grid","path":"NgLib/Grid.html","kind":"class","full_name":"NgLib::Grid(T)","name":"Grid","abstract":false,"superclass":{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"nglib/Enumerable","kind":"module","full_name":"Enumerable","name":"Enumerable"},{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"nglib/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/nglib/grid/grid.cr","line_number":16,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L16"}],"repository_name":"nglib","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"DOWN","name":"DOWN","value":"{1, 0}"},{"id":"DYDX2","name":"DYDX2","value":"[DOWN, RIGHT]"},{"id":"DYDX4","name":"DYDX4","value":"[UP, LEFT, DOWN, RIGHT]"},{"id":"DYDX8","name":"DYDX8","value":"[UP, add(UP, RIGHT), RIGHT, add(DOWN, RIGHT), DOWN, add(DOWN, LEFT), LEFT, add(UP, LEFT)]"},{"id":"LEFT","name":"LEFT","value":"{0, -1}"},{"id":"RIGHT","name":"RIGHT","value":"{0, 1}"},{"id":"UP","name":"UP","value":"{-1, 0}"}],"included_modules":[{"html_id":"nglib/Enumerable","kind":"module","full_name":"Enumerable","name":"Enumerable"}],"namespace":{"html_id":"nglib/NgLib","kind":"module","full_name":"NgLib","name":"NgLib"},"class_methods":[{"html_id":"add(v1:Tuple(Int,Int),v2:Tuple(Int,Int))-class-method","name":"add","abstract":false,"args":[{"name":"v1","external_name":"v1","restriction":"::Tuple(Int, Int)"},{"name":"v2","external_name":"v2","restriction":"::Tuple(Int, Int)"}],"args_string":"(v1 : Tuple(Int, Int), v2 : Tuple(Int, Int))","args_html":"(v1 : Tuple(<a href=\"../Int.html\">Int</a>, <a href=\"../Int.html\">Int</a>), v2 : Tuple(<a href=\"../Int.html\">Int</a>, <a href=\"../Int.html\">Int</a>))","location":{"filename":"src/nglib/grid/grid.cr","line_number":22,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L22"},"def":{"name":"add","args":[{"name":"v1","external_name":"v1","restriction":"::Tuple(Int, Int)"},{"name":"v2","external_name":"v2","restriction":"::Tuple(Int, Int)"}],"visibility":"Public","body":"{v1[0] + v2[0], v1[1] + v2[1]}"}},{"html_id":"dydx2(s:Array(Array(T)))-class-method","name":"dydx2","abstract":false,"args":[{"name":"s","external_name":"s","restriction":"Array(Array(T))"}],"args_string":"(s : Array(Array(T)))","args_html":"(s : Array(Array(T)))","location":{"filename":"src/nglib/grid/grid.cr","line_number":54,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L54"},"def":{"name":"dydx2","args":[{"name":"s","external_name":"s","restriction":"Array(Array(T))"}],"visibility":"Public","body":"new(s, DYDX2)"}},{"html_id":"dydx4(s:Array(Array(T)))-class-method","name":"dydx4","abstract":false,"args":[{"name":"s","external_name":"s","restriction":"Array(Array(T))"}],"args_string":"(s : Array(Array(T)))","args_html":"(s : Array(Array(T)))","location":{"filename":"src/nglib/grid/grid.cr","line_number":58,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L58"},"def":{"name":"dydx4","args":[{"name":"s","external_name":"s","restriction":"Array(Array(T))"}],"visibility":"Public","body":"new(s, DYDX4)"}},{"html_id":"dydx8(s:Array(Array(T)))-class-method","name":"dydx8","abstract":false,"args":[{"name":"s","external_name":"s","restriction":"Array(Array(T))"}],"args_string":"(s : Array(Array(T)))","args_html":"(s : Array(Array(T)))","location":{"filename":"src/nglib/grid/grid.cr","line_number":62,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L62"},"def":{"name":"dydx8","args":[{"name":"s","external_name":"s","restriction":"Array(Array(T))"}],"visibility":"Public","body":"new(s, DYDX8)"}},{"html_id":"sub(v1:Tuple(Int,Int),v2:Tuple(Int,Int))-class-method","name":"sub","abstract":false,"args":[{"name":"v1","external_name":"v1","restriction":"::Tuple(Int, Int)"},{"name":"v2","external_name":"v2","restriction":"::Tuple(Int, Int)"}],"args_string":"(v1 : Tuple(Int, Int), v2 : Tuple(Int, Int))","args_html":"(v1 : Tuple(<a href=\"../Int.html\">Int</a>, <a href=\"../Int.html\">Int</a>), v2 : Tuple(<a href=\"../Int.html\">Int</a>, <a href=\"../Int.html\">Int</a>))","location":{"filename":"src/nglib/grid/grid.cr","line_number":26,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L26"},"def":{"name":"sub","args":[{"name":"v1","external_name":"v1","restriction":"::Tuple(Int, Int)"},{"name":"v2","external_name":"v2","restriction":"::Tuple(Int, Int)"}],"visibility":"Public","body":"{v1[0] - v2[0], v1[1] - v2[1]}"}}],"constructors":[{"html_id":"new(s:Array(Array(T)),delta:Array(Tuple(Int32,Int32)))-class-method","name":"new","abstract":false,"args":[{"name":"s","external_name":"s","restriction":"Array(Array(T))"},{"name":"delta","external_name":"delta","restriction":"::Array(::Tuple(::Int32, ::Int32))"}],"args_string":"(s : Array(Array(T)), delta : Array(Tuple(Int32, Int32)))","args_html":"(s : Array(Array(T)), delta : Array(Tuple(Int32, Int32)))","location":{"filename":"src/nglib/grid/grid.cr","line_number":66,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L66"},"def":{"name":"new","args":[{"name":"s","external_name":"s","restriction":"Array(Array(T))"},{"name":"delta","external_name":"delta","restriction":"::Array(::Tuple(::Int32, ::Int32))"}],"visibility":"Public","body":"_ = Grid(T).allocate\n_.initialize(s, delta)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"[](y:Int,x:Int)-instance-method","name":"[]","abstract":false,"args":[{"name":"y","external_name":"y","restriction":"Int"},{"name":"x","external_name":"x","restriction":"Int"}],"args_string":"(y : Int, x : Int)","args_html":"(y : <a href=\"../Int.html\">Int</a>, x : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/grid/grid.cr","line_number":622,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L622"},"def":{"name":"[]","args":[{"name":"y","external_name":"y","restriction":"Int"},{"name":"x","external_name":"x","restriction":"Int"}],"visibility":"Public","body":"@s[(y * @w) + x]"}},{"html_id":"[](pos:Tuple(Int,Int))-instance-method","name":"[]","abstract":false,"args":[{"name":"pos","external_name":"pos","restriction":"::Tuple(Int, Int)"}],"args_string":"(pos : Tuple(Int, Int))","args_html":"(pos : Tuple(<a href=\"../Int.html\">Int</a>, <a href=\"../Int.html\">Int</a>))","location":{"filename":"src/nglib/grid/grid.cr","line_number":618,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L618"},"def":{"name":"[]","args":[{"name":"pos","external_name":"pos","restriction":"::Tuple(Int, Int)"}],"visibility":"Public","body":"self[pos[0], pos[1]]"}},{"html_id":"[]=(y:Int,x:Int,c:T)-instance-method","name":"[]=","abstract":false,"args":[{"name":"y","external_name":"y","restriction":"Int"},{"name":"x","external_name":"x","restriction":"Int"},{"name":"c","external_name":"c","restriction":"T"}],"args_string":"(y : Int, x : Int, c : T)","args_html":"(y : <a href=\"../Int.html\">Int</a>, x : <a href=\"../Int.html\">Int</a>, c : T)","location":{"filename":"src/nglib/grid/grid.cr","line_number":630,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L630"},"def":{"name":"[]=","args":[{"name":"y","external_name":"y","restriction":"Int"},{"name":"x","external_name":"x","restriction":"Int"},{"name":"c","external_name":"c","restriction":"T"}],"visibility":"Public","body":"@s[(y * @w) + x] = c"}},{"html_id":"[]=(pos:Tuple(Int,Int),c:T)-instance-method","name":"[]=","abstract":false,"args":[{"name":"pos","external_name":"pos","restriction":"::Tuple(Int, Int)"},{"name":"c","external_name":"c","restriction":"T"}],"args_string":"(pos : Tuple(Int, Int), c : T)","args_html":"(pos : Tuple(<a href=\"../Int.html\">Int</a>, <a href=\"../Int.html\">Int</a>), c : T)","location":{"filename":"src/nglib/grid/grid.cr","line_number":626,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L626"},"def":{"name":"[]=","args":[{"name":"pos","external_name":"pos","restriction":"::Tuple(Int, Int)"},{"name":"c","external_name":"c","restriction":"T"}],"visibility":"Public","body":"self[pos[0], pos[1]] = c"}},{"html_id":"barred?(y:Int,x:Int):Bool-instance-method","name":"barred?","doc":"位置 $(y, x)$ が進入禁止なら `true` を返します。\n\n```\ns = [\n  \"..\".chars,\n  \".#\".chars,\n]\n\ngrid.barred?(0, 0) # => false\ngrid.barred?(1, 1) # => true\n```","summary":"<p>位置 $(y, x)$ が進入禁止なら <code>true</code> を返します。</p>","abstract":false,"args":[{"name":"y","external_name":"y","restriction":"Int"},{"name":"x","external_name":"x","restriction":"Int"}],"args_string":"(y : Int, x : Int) : Bool","args_html":"(y : <a href=\"../Int.html\">Int</a>, x : <a href=\"../Int.html\">Int</a>) : Bool","location":{"filename":"src/nglib/grid/grid.cr","line_number":125,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L125"},"def":{"name":"barred?","args":[{"name":"y","external_name":"y","restriction":"Int"},{"name":"x","external_name":"x","restriction":"Int"}],"return_type":"Bool","visibility":"Public","body":"(over?(y, x)) || (self[y, x] == @bar)"}},{"html_id":"barred?(pos):Bool-instance-method","name":"barred?","doc":"位置 `pos` が進入禁止なら `true` を返します。\n\n```\ns = [\n  \"..\".chars,\n  \".#\".chars,\n]\n\ngrid.barred?({0, 0}) # => false\ngrid.barred?({1, 1}) # => true\n```","summary":"<p>位置 <code>pos</code> が進入禁止なら <code>true</code> を返します。</p>","abstract":false,"args":[{"name":"pos","external_name":"pos","restriction":""}],"args_string":"(pos) : Bool","args_html":"(pos) : Bool","location":{"filename":"src/nglib/grid/grid.cr","line_number":109,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L109"},"def":{"name":"barred?","args":[{"name":"pos","external_name":"pos","restriction":""}],"return_type":"Bool","visibility":"Public","body":"barred?(pos[0], pos[1])"}},{"html_id":"delta:Array(Pos)-instance-method","name":"delta","abstract":false,"location":{"filename":"src/nglib/grid/grid.cr","line_number":50,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L50"},"def":{"name":"delta","return_type":"Array(Pos)","visibility":"Public","body":"@delta"}},{"html_id":"each(&:T->)-instance-method","name":"each","doc":"グリッドの値を $(0, 0)$ から $(H, W)$ まで順に列挙します。\n\n```\ns = [\n  \"..#\".chars,\n  \".#.\".chars,\n  \"##.\".chars,\n]\ngrid = Grid(Char).dydx4(s)\ngird.each { |c| puts c } # => '.', '.', '#', '.', ..., '.'\n```","summary":"<p>グリッドの値を $(0, 0)$ から $(H, W)$ まで順に列挙します。</p>","abstract":false,"location":{"filename":"src/nglib/grid/grid.cr","line_number":446,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L446"},"def":{"name":"each","yields":1,"block_arity":1,"block_arg":{"name":"","external_name":"","restriction":"(T ->)"},"visibility":"Public","body":"i = 0\nwhile i < h\n  j = 0\n  while j < w\n    yield self[i, j]\n    j = j + 1\n  end\n  i = i + 1\nend\n"}},{"html_id":"each_neighbor(y:Int,x:Int,&)-instance-method","name":"each_neighbor","doc":"位置 $(y, x)$ の近傍で、侵入可能な位置を列挙します。\n\n```\ngrid = Grid.dydx([\".#.\", \"...\", \"...\"])\n\ngrid.each_neighbor(1, 1) do |ny, nx|\nend\n```","summary":"<p>位置 $(y, x)$ の近傍で、侵入可能な位置を列挙します。</p>","abstract":false,"args":[{"name":"y","external_name":"y","restriction":"Int"},{"name":"x","external_name":"x","restriction":"Int"}],"args_string":"(y : Int, x : Int, &)","args_html":"(y : <a href=\"../Int.html\">Int</a>, x : <a href=\"../Int.html\">Int</a>, &)","location":{"filename":"src/nglib/grid/grid.cr","line_number":561,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L561"},"def":{"name":"each_neighbor","args":[{"name":"y","external_name":"y","restriction":"Int"},{"name":"x","external_name":"x","restriction":"Int"}],"yields":2,"block_arity":2,"visibility":"Public","body":"i = 0\nwhile i < @delta.size\n  ny = y + @delta[i][0]\n  nx = x + @delta[i][1]\n  if free?(ny, nx)\n    yield ny, nx\n  end\n  i = i + 1\nend\n"}},{"html_id":"each_neighbor_with_direction(y:Int,x:Int,&)-instance-method","name":"each_neighbor_with_direction","doc":"位置 $(y, x)$ の近傍で、侵入可能な位置を方向とともに列挙します。\n\n```\ngrid = Grid.dydx4([\".#.\", \"...\", \"...\"])\n\ngrid.each_neighbor(1, 1) do |ny, nx, dir|\nend\n```","summary":"<p>位置 $(y, x)$ の近傍で、侵入可能な位置を方向とともに列挙します。</p>","abstract":false,"args":[{"name":"y","external_name":"y","restriction":"Int"},{"name":"x","external_name":"x","restriction":"Int"}],"args_string":"(y : Int, x : Int, &)","args_html":"(y : <a href=\"../Int.html\">Int</a>, x : <a href=\"../Int.html\">Int</a>, &)","location":{"filename":"src/nglib/grid/grid.cr","line_number":579,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L579"},"def":{"name":"each_neighbor_with_direction","args":[{"name":"y","external_name":"y","restriction":"Int"},{"name":"x","external_name":"x","restriction":"Int"}],"yields":3,"block_arity":3,"visibility":"Public","body":"i = 0\nwhile i < @delta.size\n  ny = y + @delta[i][0]\n  nx = x + @delta[i][1]\n  if free?(ny, nx)\n    yield ny, nx, i\n  end\n  i = i + 1\nend\n"}},{"html_id":"each_with_coord(&)-instance-method","name":"each_with_coord","doc":"グリッドの値を $(0, 0)$ から $(H, W)$ まで順に座標付きで列挙します。\n\n```\ns = [\n  \"..#\".chars,\n  \".#.\".chars,\n  \"##.\".chars,\n]\ngrid = Grid(Char).new(s)\ngird.each { |c, (i, j)| puts c, {i, j} }\n```","summary":"<p>グリッドの値を $(0, 0)$ から $(H, W)$ まで順に座標付きで列挙します。</p>","abstract":false,"location":{"filename":"src/nglib/grid/grid.cr","line_number":484,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L484"},"def":{"name":"each_with_coord","yields":2,"block_arity":2,"visibility":"Public","body":"i = 0\nwhile i < h\n  j = 0\n  while j < w\n    yield self[i, j], {i, j}\n    j = j + 1\n  end\n  i = i + 1\nend\n"}},{"html_id":"each_with_index(&)-instance-method","name":"each_with_index","doc":"グリッドの値を $(0, 0)$ から $(H, W)$ まで順に列挙します。\n\nindex は $Wi + j$ を返します。通常は `each_with_coord` を利用することを推奨します。","summary":"<p>グリッドの値を $(0, 0)$ から $(H, W)$ まで順に列挙します。</p>","abstract":false,"location":{"filename":"src/nglib/grid/grid.cr","line_number":461,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L461"},"def":{"name":"each_with_index","yields":2,"block_arity":2,"visibility":"Public","body":"i = 0\nwhile i < h\n  j = 0\n  while j < w\n    yield self[i, j], (w * i) + j\n    j = j + 1\n  end\n  i = i + 1\nend\n"}},{"html_id":"fetch(y:Int,x:Int,default:T)-instance-method","name":"fetch","abstract":false,"args":[{"name":"y","external_name":"y","restriction":"Int"},{"name":"x","external_name":"x","restriction":"Int"},{"name":"default","external_name":"default","restriction":"T"}],"args_string":"(y : Int, x : Int, default : T)","args_html":"(y : <a href=\"../Int.html\">Int</a>, x : <a href=\"../Int.html\">Int</a>, default : T)","location":{"filename":"src/nglib/grid/grid.cr","line_number":593,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L593"},"def":{"name":"fetch","args":[{"name":"y","external_name":"y","restriction":"Int"},{"name":"x","external_name":"x","restriction":"Int"},{"name":"default","external_name":"default","restriction":"T"}],"visibility":"Public","body":"over?(y, x) ? default : self[y, x]"}},{"html_id":"free?(y:Int,x:Int):Bool-instance-method","name":"free?","doc":"位置 $(y, x)$ が通行可能なら `true` を返します。\n\n```\ns = [\n  \"..\".chars,\n  \".#\".chars,\n]\n\ngrid.free?(0, 0) # => true\ngrid.free?(1, 1) # => false\n```","summary":"<p>位置 $(y, x)$ が通行可能なら <code>true</code> を返します。</p>","abstract":false,"args":[{"name":"y","external_name":"y","restriction":"Int"},{"name":"x","external_name":"x","restriction":"Int"}],"args_string":"(y : Int, x : Int) : Bool","args_html":"(y : <a href=\"../Int.html\">Int</a>, x : <a href=\"../Int.html\">Int</a>) : Bool","location":{"filename":"src/nglib/grid/grid.cr","line_number":157,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L157"},"def":{"name":"free?","args":[{"name":"y","external_name":"y","restriction":"Int"},{"name":"x","external_name":"x","restriction":"Int"}],"return_type":"Bool","visibility":"Public","body":"!(barred?(y, x))"}},{"html_id":"free?(pos):Bool-instance-method","name":"free?","doc":"位置 `pos` が通行可能なら `true` を返します。\n\n```\ns = [\n  \"..\".chars,\n  \".#\".chars,\n]\n\ngrid.free?({0, 0}) # => true\ngrid.free?({1, 1}) # => false\n```","summary":"<p>位置 <code>pos</code> が通行可能なら <code>true</code> を返します。</p>","abstract":false,"args":[{"name":"pos","external_name":"pos","restriction":""}],"args_string":"(pos) : Bool","args_html":"(pos) : Bool","location":{"filename":"src/nglib/grid/grid.cr","line_number":141,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L141"},"def":{"name":"free?","args":[{"name":"pos","external_name":"pos","restriction":""}],"return_type":"Bool","visibility":"Public","body":"!(barred?(pos))"}},{"html_id":"h:Int32-instance-method","name":"h","abstract":false,"location":{"filename":"src/nglib/grid/grid.cr","line_number":49,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L49"},"def":{"name":"h","return_type":"Int32","visibility":"Public","body":"@h"}},{"html_id":"index(offset={0,0},&:T->):Tuple(Int32,Int32)|Nil-instance-method","name":"index","doc":"Returns the index of the first element for which the passed block is truthy.\n\n```\n[\"Alice\", \"Bob\"].index { |name| name.size < 4 } # => 1 (Bob's index)\n```\n\nReturns `nil` if the block is not truthy for any element.","summary":"<p>Returns the index of the first element for which the passed block is truthy.</p>","abstract":false,"args":[{"name":"offset","default_value":"{0, 0}","external_name":"offset","restriction":""}],"args_string":"(offset = {0, 0}, & : T -> ) : Tuple(Int32, Int32) | Nil","args_html":"(offset = {<span class=\"n\">0</span>, <span class=\"n\">0</span>}, & : T -> ) : Tuple(Int32, Int32) | Nil","location":{"filename":"src/nglib/grid/grid.cr","line_number":528,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L528"},"def":{"name":"index","args":[{"name":"offset","default_value":"{0, 0}","external_name":"offset","restriction":""}],"yields":1,"block_arity":1,"block_arg":{"name":"","external_name":"","restriction":"(T ->)"},"return_type":"::Tuple(Int32, Int32) | ::Nil","visibility":"Public","body":"i, j = offset\nwhile i < @h\n  while j < @w\n    if yield self[i, j]\n      return {i, j}\n    end\n    j = j + 1\n  end\n  j = 0\n  i = i + 1\nend\nnil\n"}},{"html_id":"index(obj,offset={0,0}):Tuple(Int32,Int32)|Nil-instance-method","name":"index","doc":"Returns the first index of *obj* in the collection.\n\n```\n[\"Alice\", \"Bob\"].index(\"Alice\") # => 0\n```\n\nReturns `nil` if *obj* is not in the collection.","summary":"<p>Returns the first index of <em>obj</em> in the collection.</p>","abstract":false,"args":[{"name":"obj","external_name":"obj","restriction":""},{"name":"offset","default_value":"{0, 0}","external_name":"offset","restriction":""}],"args_string":"(obj, offset = {0, 0}) : Tuple(Int32, Int32) | Nil","args_html":"(obj, offset = {<span class=\"n\">0</span>, <span class=\"n\">0</span>}) : Tuple(Int32, Int32) | Nil","location":{"filename":"src/nglib/grid/grid.cr","line_number":541,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L541"},"def":{"name":"index","args":[{"name":"obj","external_name":"obj","restriction":""},{"name":"offset","default_value":"{0, 0}","external_name":"offset","restriction":""}],"return_type":"::Tuple(Int32, Int32) | ::Nil","visibility":"Public","body":"index(offset) do |elem|\n  elem == obj\nend"}},{"html_id":"index!(offset={0,0},&:T->):Tuple(Int32,Int32)-instance-method","name":"index!","doc":"Returns the index of the first element for which the passed block is truthy.\n\n```\n[\"Alice\", \"Bob\"].index! { |name| name.size < 4 } # => 1 (Bob's index)\n```\n\nRaises `Enumerable::NotFoundError` if there is no element for which the block is truthy.","summary":"<p>Returns the index of the first element for which the passed block is truthy.</p>","abstract":false,"args":[{"name":"offset","default_value":"{0, 0}","external_name":"offset","restriction":""}],"args_string":"(offset = {0, 0}, & : T -> ) : Tuple(Int32, Int32)","args_html":"(offset = {<span class=\"n\">0</span>, <span class=\"n\">0</span>}, & : T -> ) : Tuple(Int32, Int32)","location":{"filename":"src/nglib/grid/grid.cr","line_number":545,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L545"},"def":{"name":"index!","args":[{"name":"offset","default_value":"{0, 0}","external_name":"offset","restriction":""}],"yields":1,"block_arity":1,"block_arg":{"name":"","external_name":"","restriction":"(T ->)"},"return_type":"::Tuple(Int32, Int32)","visibility":"Public","body":"(index(offset) do |elem|\n  yield elem\nend) || (raise(Exception.new(\"Not found.\")))"}},{"html_id":"index!(obj,offset={0,0}):Tuple(Int32,Int32)|Nil-instance-method","name":"index!","doc":"Returns the first index of *obj* in the collection.\n\n```\n[\"Alice\", \"Bob\"].index!(\"Alice\") # => 0\n```\n\nRaises `Enumerable::NotFoundError` if *obj* is not in the collection.","summary":"<p>Returns the first index of <em>obj</em> in the collection.</p>","abstract":false,"args":[{"name":"obj","external_name":"obj","restriction":""},{"name":"offset","default_value":"{0, 0}","external_name":"offset","restriction":""}],"args_string":"(obj, offset = {0, 0}) : Tuple(Int32, Int32) | Nil","args_html":"(obj, offset = {<span class=\"n\">0</span>, <span class=\"n\">0</span>}) : Tuple(Int32, Int32) | Nil","location":{"filename":"src/nglib/grid/grid.cr","line_number":549,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L549"},"def":{"name":"index!","args":[{"name":"obj","external_name":"obj","restriction":""},{"name":"offset","default_value":"{0, 0}","external_name":"offset","restriction":""}],"return_type":"::Tuple(Int32, Int32) | ::Nil","visibility":"Public","body":"index!(offset) do |elem|\n  elem == obj\nend"}},{"html_id":"label_grid-instance-method","name":"label_grid","doc":"連結する free および bar を塗り分けたグリッドを返します。\nfree のマスは非負整数の連番でラベル付けされ、bar は負の連番でラベル付けされます。\n`label_grid.max` は `(島の数 - 1)` を返すことに注意してください。\n\n```\ns = [\n  \"..#\".chars,\n  \".#.\".chars,\n  \"##.\".chars,\n]\ngrid = Grid(Char).dydx4(s)\ngrid.label_grid # => [[0, 0, -1], [0, -2, 1], [-2, -2, 1]]\n```","summary":"<p>連結する free および bar を塗り分けたグリッドを返します。 free のマスは非負整数の連番でラベル付けされ、bar は負の連番でラベル付けされます。 <code>label_grid.max</code> は <code>(島の数 - 1)</code> を返すことに注意してください。</p>","abstract":false,"location":{"filename":"src/nglib/grid/grid.cr","line_number":397,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L397"},"def":{"name":"label_grid","visibility":"Public","body":"table = Array.new(@h) do\n  [nil.as(Int32 | ::Nil)] * @w\nend\nfree_index, bar_index = 0, -1\n@h.times do |i|\n  @w.times do |j|\n    if table[i][j].nil?\n    else\n      next\n    end\n    label = 0\n    is_bar = barred?(i, j)\n    if is_bar\n      label = bar_index\n      bar_index = bar_index - 1\n    else\n      label = free_index\n      free_index = free_index + 1\n    end\n    queue = Deque(::Tuple(Int32, Int32)).new([{i, j}])\n    table[i][j] = label\n    while !queue.empty?\n      y, x = queue.shift\n      @delta.each do |__temp_76|\n        dy, dx = __temp_76\n        ny = y + dy\n        nx = x + dx\n        if over?(ny, nx)\n          next\n        end\n        if table[ny][nx].nil?\n        else\n          next\n        end\n        if is_bar ^ (barred?(ny, nx))\n          next\n        end\n        table[ny][nx] = label\n        queue << {ny, nx}\n      end\n    end\n  end\nend\nGrid(Int32).new(table.map do |line|\n  line.map(&.not_nil!)\nend, @delta)\n"}},{"html_id":"map(&:T->U):Grid(U)forallU-instance-method","name":"map","doc":"グリッドの各要素に対して、ブロックを実行した結果に変換したグリッドを返します。","summary":"<p>グリッドの各要素に対して、ブロックを実行した結果に変換したグリッドを返します。</p>","abstract":false,"location":{"filename":"src/nglib/grid/grid.cr","line_number":497,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L497"},"def":{"name":"map","yields":1,"block_arity":1,"block_arg":{"name":"","external_name":"","restriction":"(T -> U)"},"return_type":"Grid(U)","visibility":"Public","body":"ret = Array.new(h) do\n  Array(U).new(w)\nend\ni = 0\nwhile i < h\n  j = 0\n  line = Array(U).new(w)\n  while j < w\n    line << (yield self[i, j])\n    j = j + 1\n  end\n  ret[i] = line\n  i = i + 1\nend\nGrid(U).new(ret, @delta)\n"}},{"html_id":"map_with_coord(&:T,Tuple(Int32,Int32)->U):Grid(U)forallU-instance-method","name":"map_with_coord","doc":"グリッドの各要素に対して、ブロックを実行した結果に変換したグリッドを返します。","summary":"<p>グリッドの各要素に対して、ブロックを実行した結果に変換したグリッドを返します。</p>","abstract":false,"location":{"filename":"src/nglib/grid/grid.cr","line_number":514,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L514"},"def":{"name":"map_with_coord","yields":2,"block_arity":2,"block_arg":{"name":"","external_name":"","restriction":"(T, ::Tuple(Int32, Int32) -> U)"},"return_type":"Grid(U)","visibility":"Public","body":"ret = Array.new(h) do\n  Array(U).new(w)\nend\ni = 0\nwhile i < h\n  j = 0\n  line = Array(U).new(w)\n  while j < w\n    line << (yield self[i, j], {i, j})\n  end\n  ret[i] = line\nend\nGrid(U).new(ret, @delta)\n"}},{"html_id":"node_index(y:Int,x:Int)-instance-method","name":"node_index","abstract":false,"args":[{"name":"y","external_name":"y","restriction":"Int"},{"name":"x","external_name":"x","restriction":"Int"}],"args_string":"(y : Int, x : Int)","args_html":"(y : <a href=\"../Int.html\">Int</a>, x : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/grid/grid.cr","line_number":589,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L589"},"def":{"name":"node_index","args":[{"name":"y","external_name":"y","restriction":"Int"},{"name":"x","external_name":"x","restriction":"Int"}],"visibility":"Public","body":"(y * @w) + x"}},{"html_id":"over?(y,x):Bool-instance-method","name":"over?","doc":"位置 $(y, x)$ がグリッドの範囲外なら `true` を返します。\n\n```\ngrid.over?(-1, 0)          # => true\ngrid.over?(h + 10, w + 10) # => true\ngrid.over?(0, 0)           # => false\n```","summary":"<p>位置 $(y, x)$ がグリッドの範囲外なら <code>true</code> を返します。</p>","abstract":false,"args":[{"name":"y","external_name":"y","restriction":""},{"name":"x","external_name":"x","restriction":""}],"args_string":"(y, x) : Bool","args_html":"(y, x) : Bool","location":{"filename":"src/nglib/grid/grid.cr","line_number":93,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L93"},"def":{"name":"over?","args":[{"name":"y","external_name":"y","restriction":""},{"name":"x","external_name":"x","restriction":""}],"return_type":"Bool","visibility":"Public","body":"((y < 0 || y >= @h) || x < 0) || x >= @w"}},{"html_id":"over?(pos):Bool-instance-method","name":"over?","doc":"位置 `pos` がグリッドの範囲外なら `true` を返します。\n\n```\ngrid.over?({-1, 0})          # => true\ngrid.over?({h + 10, w + 10}) # => true\ngrid.over?({0, 0})           # => false\n```","summary":"<p>位置 <code>pos</code> がグリッドの範囲外なら <code>true</code> を返します。</p>","abstract":false,"args":[{"name":"pos","external_name":"pos","restriction":""}],"args_string":"(pos) : Bool","args_html":"(pos) : Bool","location":{"filename":"src/nglib/grid/grid.cr","line_number":81,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L81"},"def":{"name":"over?","args":[{"name":"pos","external_name":"pos","restriction":""}],"return_type":"Bool","visibility":"Public","body":"over?(pos[0], pos[1])"}},{"html_id":"shortest_path(start_i:Int,start_j:Int):Array(Array(Int64|Nil))-instance-method","name":"shortest_path","doc":"始点 $(s_i, s_j)$ から各マスへの最短経路長を返します。\n\n到達できない場合は `nil` が格納されます。\n\n```\ndist = grid.shortest_path(start: {si, sj})\ndist[gi][gj] # => 4\n```","summary":"<p>始点 $(s_i, s_j)$ から各マスへの最短経路長を返します。</p>","abstract":false,"args":[{"name":"start_i","external_name":"start_i","restriction":"Int"},{"name":"start_j","external_name":"start_j","restriction":"Int"}],"args_string":"(start_i : Int, start_j : Int) : Array(Array(Int64 | Nil))","args_html":"(start_i : <a href=\"../Int.html\">Int</a>, start_j : <a href=\"../Int.html\">Int</a>) : Array(Array(Int64 | Nil))","location":{"filename":"src/nglib/grid/grid.cr","line_number":202,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L202"},"def":{"name":"shortest_path","args":[{"name":"start_i","external_name":"start_i","restriction":"Int"},{"name":"start_j","external_name":"start_j","restriction":"Int"}],"return_type":"Array(Array(Int64 | ::Nil))","visibility":"Public","body":"shortest_path({start_i, start_j})"}},{"html_id":"shortest_path(start:Tuple,dest:Tuple):Int64|Nil-instance-method","name":"shortest_path","doc":"始点 $(s_i, s_j)$ から終点 $(g_i, g_j)$ への最短経路長を返します。\n\n```\ngrid.shortest_path(start: {si, sj}, dest: {gi, gj}) # => 4\n```","summary":"<p>始点 $(s_i, s_j)$ から終点 $(g_i, g_j)$ への最短経路長を返します。</p>","abstract":false,"args":[{"name":"start","external_name":"start","restriction":"Tuple"},{"name":"dest","external_name":"dest","restriction":"Tuple"}],"args_string":"(start : Tuple, dest : Tuple) : Int64 | Nil","args_html":"(start : Tuple, dest : Tuple) : Int64 | Nil","location":{"filename":"src/nglib/grid/grid.cr","line_number":211,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L211"},"def":{"name":"shortest_path","args":[{"name":"start","external_name":"start","restriction":"Tuple"},{"name":"dest","external_name":"dest","restriction":"Tuple"}],"return_type":"Int64 | ::Nil","visibility":"Public","body":"(shortest_path(start))[dest[0]][dest[1]]"}},{"html_id":"shortest_path(start:Tuple):Array(Array(Int64|Nil))-instance-method","name":"shortest_path","doc":"始点 $(s_i, s_j)$ から各マスへの最短経路長を返します。\n\n到達できない場合は `nil` が格納されます。\n\n```\ndist = grid.shortest_path(start: {si, sj})\ndist[gi][gj] # => 4\n```","summary":"<p>始点 $(s_i, s_j)$ から各マスへの最短経路長を返します。</p>","abstract":false,"args":[{"name":"start","external_name":"start","restriction":"Tuple"}],"args_string":"(start : Tuple) : Array(Array(Int64 | Nil))","args_html":"(start : Tuple) : Array(Array(Int64 | Nil))","location":{"filename":"src/nglib/grid/grid.cr","line_number":185,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L185"},"def":{"name":"shortest_path","args":[{"name":"start","external_name":"start","restriction":"Tuple"}],"return_type":"Array(Array(Int64 | ::Nil))","visibility":"Public","body":"queue = Deque.new([start])\ndist = Array.new(@h) do\n  Array.new(@w) do\n    nil.as(Int64 | ::Nil)\n  end\nend\ndist[start[0]][start[1]] = 0\nwhile !queue.empty?\n  i, j = queue.shift\n  d = dist[i][j] || (raise(NilAssertionError.new))\n  each_neighbor(i, j) do |i_adj, j_adj|\n    if dist[i_adj][j_adj].nil?\n    else\n      next\n    end\n    dist[i_adj][j_adj] = d + 1\n    queue << {i_adj, j_adj}\n  end\nend\ndist\n"}},{"html_id":"shortest_path:Array(Array(Array(Array(Int64|Nil))))-instance-method","name":"shortest_path","doc":"全マス間の最短経路長を返します。\n\n到達できない場合は `nil` が格納されます。\n\n```\ndist = grid.shortest_path\ndist[si][sj][gi][gj] # => 4\n```","summary":"<p>全マス間の最短経路長を返します。</p>","abstract":false,"location":{"filename":"src/nglib/grid/grid.cr","line_number":169,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L169"},"def":{"name":"shortest_path","return_type":"Array(Array(Array(Array(Int64 | ::Nil))))","visibility":"Public","body":"Array.new(@h) do |start_i|\n  Array.new(@w) do |start_j|\n    shortest_path(start_i, start_j)\n  end\nend"}},{"html_id":"shortest_path(start:Tuple,dest:Tuple,tag=:dijkstra,&:Int32,Int32,Int32,Int32->U):Int64forallU-instance-method","name":"shortest_path","doc":"始点 $(s_i, s_j)$ から終点 $(g_i, g_j)$ への最短経路長を返します。\n\n内部で利用するアルゴリズムをタグで指定します。\n- `:bfs` : 侵入不可能な場合は U::MAX を返してください。\n- `:binary_bfs` : 重みは $0$ または $1$ である必要があります。\n- `:dijkstra` : デフォルト値です。$\\infty = U::MAX$ です。負の数には気をつけてください。\n\n$(i, j)$ から $(i', j')$ への移動時の重みをブロックで指定します。\n\n```\ngrid.shortest_path(start: {si, sj}, dest: {gi, gj}) { |i, j, i_adj, j_adj|\n  f(i, j, i_adj, j_adj)\n} # => 4\n```","summary":"<p>始点 $(s_i, s_j)$ から終点 $(g_i, g_j)$ への最短経路長を返します。</p>","abstract":false,"args":[{"name":"start","external_name":"start","restriction":"Tuple"},{"name":"dest","external_name":"dest","restriction":"Tuple"},{"name":"tag","default_value":":dijkstra","external_name":"tag","restriction":""}],"args_string":"(start : Tuple, dest : Tuple, tag = :dijkstra, & : Int32, Int32, Int32, Int32 -> U) : Int64 forall U","args_html":"(start : Tuple, dest : Tuple, tag = <span class=\"n\">:dijkstra</span>, & : Int32, Int32, Int32, Int32 -> U) : Int64 forall U","location":{"filename":"src/nglib/grid/grid.cr","line_number":334,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L334"},"def":{"name":"shortest_path","args":[{"name":"start","external_name":"start","restriction":"Tuple"},{"name":"dest","external_name":"dest","restriction":"Tuple"},{"name":"tag","default_value":":dijkstra","external_name":"tag","restriction":""}],"yields":4,"block_arity":4,"block_arg":{"name":"","external_name":"","restriction":"(Int32, Int32, Int32, Int32 -> U)"},"return_type":"Int64","visibility":"Public","body":"(shortest_path(start, tag) do |i, j, i_adj, j_adj|\n  yield i, j, i_adj, j_adj\nend)[dest[0]][dest[1]]"}},{"html_id":"shortest_path(start:Tuple,tag=:dijkstra,&:Int32,Int32,Int32,Int32->U):Array(Array(U))forallU-instance-method","name":"shortest_path","doc":"始点 $(s_i, s_j)$ から各マスへの最短経路長を返します。\n\n内部で利用するアルゴリズムをタグで指定します。\n- `:bfs` : 侵入不可能な場合は U::MAX を返してください。\n- `:binary_bfs` : 重みは $0$ または $1$ である必要があります。\n- `:dijkstra` : デフォルト値です。$\\infty = U::MAX$ です。負の数には気をつけてください。\n\n$(i, j)$ から $(i', j')$ への移動時の重みをブロックで指定します。\n\n```\ndist = grid.shortest_path(start: {0, 0}) { |i, j, i_adj, j_adj| f(i, j, i_adj, j_adj) }\ndist[gi][gj] # => 4\n```\nameba:disable Metrics/CyclomaticComplexity","summary":"<p>始点 $(s_i, s_j)$ から各マスへの最短経路長を返します。</p>","abstract":false,"args":[{"name":"start","external_name":"start","restriction":"Tuple"},{"name":"tag","default_value":":dijkstra","external_name":"tag","restriction":""}],"args_string":"(start : Tuple, tag = :dijkstra, & : Int32, Int32, Int32, Int32 -> U) : Array(Array(U)) forall U","args_html":"(start : Tuple, tag = <span class=\"n\">:dijkstra</span>, & : Int32, Int32, Int32, Int32 -> U) : Array(Array(U)) forall U","location":{"filename":"src/nglib/grid/grid.cr","line_number":259,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L259"},"def":{"name":"shortest_path","args":[{"name":"start","external_name":"start","restriction":"Tuple"},{"name":"tag","default_value":":dijkstra","external_name":"tag","restriction":""}],"yields":4,"block_arity":4,"block_arg":{"name":"","external_name":"","restriction":"(Int32, Int32, Int32, Int32 -> U)"},"return_type":"Array(Array(U))","visibility":"Public","body":"case tag\nwhen :bfs\n  next_node = Deque(::Tuple(Int32, Int32)).new([start])\n  dist = Array.new(@h) do\n    Array.new(@w) do\n      U::MAX\n    end\n  end\n  dist[start[0]][start[1]] = U.zero\n  while !next_node.empty?\n    i, j = next_node.shift\n    each_neighbor(i, j) do |i_adj, j_adj|\n      weight = yield i.to_i32, j.to_i32, i_adj.to_i32, j_adj.to_i32\n      if (weight == U.zero.succ) || (weight == U::MAX)\n      else\n        raise(\"Weight error\")\n      end\n      if weight == U::MAX\n        next\n      end\n      if dist[i_adj][j_adj] != U::MAX\n        next\n      end\n      dist[i_adj][j_adj] = dist[i][j] + U.zero.succ\n      next_node << {i_adj, j_adj}\n    end\n  end\n  return dist\nwhen :binary_bfs\n  next_node = Deque(::Tuple(Int32, Int32)).new([start])\n  dist = Array.new(@h) do\n    Array.new(@w) do\n      U::MAX\n    end\n  end\n  dist[start[0]][start[1]] = U.zero\n  while !next_node.empty?\n    i, j = next_node.shift\n    each_neighbor(i, j) do |i_adj, j_adj|\n      weight = yield i.to_i32, j.to_i32, i_adj.to_i32, j_adj.to_i32\n      if weight.in?({U.zero, U.zero.succ})\n      else\n        raise(\"Weight error\")\n      end\n      next_cost = dist[i][j] <= (U::MAX - weight) ? dist[i][j] + weight : U::MAX\n      if next_cost < dist[i_adj][j_adj]\n        dist[i_adj][j_adj] = next_cost\n        if weight == 0\n          next_node.unshift({i_adj.to_i32, j_adj.to_i32})\n        else\n          next_node << {i_adj.to_i32, j_adj.to_i32}\n        end\n      end\n    end\n  end\n  return dist\nwhen :dijkstra\n  next_node = AtCoder::PriorityQueue.new([{U.zero, start}])\n  dist = Array.new(@h) do\n    Array.new(@w) do\n      U::MAX\n    end\n  end\n  dist[start[0]][start[1]] = U.zero\n  while !next_node.empty?\n    d, pos = next_node.pop.not_nil!\n    i, j = pos\n    if dist[i][j] < d\n      next\n    end\n    each_neighbor(i, j) do |i_adj, j_adj|\n      weight = yield i.to_i32, j.to_i32, i_adj.to_i32, j_adj.to_i32\n      next_cost = dist[i][j] <= (U::MAX - weight) ? dist[i][j] + weight : U::MAX\n      if next_cost < dist[i_adj][j_adj]\n        dist[i_adj][j_adj] = next_cost\n        next_node << {next_cost, {i_adj.to_i32, j_adj.to_i32}}\n      end\n    end\n  end\n  return dist\nend\nraise(\"Tag Error\")\n"}},{"html_id":"shortest_path(tag=:dijkstra,&:Int32,Int32,Int32,Int32->U):Array(Array(Int64))forallU-instance-method","name":"shortest_path","doc":"全マス間の最短経路長を返します。\n\n内部で利用するアルゴリズムをタグで指定します。\n- `:bfs` : 侵入不可能な場合は U::MAX を返してください。\n- `:binary_bfs` : 重みは $0$ または $1$ である必要があります。\n- `:dijkstra` : デフォルト値です。$\\infty = U::MAX$ です。負の数には気をつけてください。\n\n$(i, j)$ から $(i', j')$ への移動時の重みをブロックで指定します。\n\n```\ndist = grid.shortest_path { |i, j, i_adj, j_adj| f(i, j, i_adj, j_adj) }\ndist[si][sj][gi][gj] # => 4\n```","summary":"<p>全マス間の最短経路長を返します。</p>","abstract":false,"args":[{"name":"tag","default_value":":dijkstra","external_name":"tag","restriction":""}],"args_string":"(tag = :dijkstra, & : Int32, Int32, Int32, Int32 -> U) : Array(Array(Int64)) forall U","args_html":"(tag = <span class=\"n\">:dijkstra</span>, & : Int32, Int32, Int32, Int32 -> U) : Array(Array(Int64)) forall U","location":{"filename":"src/nglib/grid/grid.cr","line_number":237,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L237"},"def":{"name":"shortest_path","args":[{"name":"tag","default_value":":dijkstra","external_name":"tag","restriction":""}],"yields":4,"block_arity":4,"block_arg":{"name":"","external_name":"","restriction":"(Int32, Int32, Int32, Int32 -> U)"},"return_type":"Array(Array(Int64))","visibility":"Public","body":"Array.new(@h) do |start_i|\n  Array.new(@w) do |start_j|\n    shortest_path(start_i, start_j) do |i, j, i_adj, j_adj|\n      yield i, j, i_adj, j_adj\n    end\n  end\nend"}},{"html_id":"shortest_path!(start:Tuple,dest:Tuple):Int64-instance-method","name":"shortest_path!","doc":"始点 $(s_i, s_j)$ から終点 $(g_i, g_j)$ への最短経路長を返します。\n\n```\ngrid.shortest_path(start: {si, sj}, dest: {gi, gj}) # => 4\n```","summary":"<p>始点 $(s_i, s_j)$ から終点 $(g_i, g_j)$ への最短経路長を返します。</p>","abstract":false,"args":[{"name":"start","external_name":"start","restriction":"Tuple"},{"name":"dest","external_name":"dest","restriction":"Tuple"}],"args_string":"(start : Tuple, dest : Tuple) : Int64","args_html":"(start : Tuple, dest : Tuple) : Int64","location":{"filename":"src/nglib/grid/grid.cr","line_number":220,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L220"},"def":{"name":"shortest_path!","args":[{"name":"start","external_name":"start","restriction":"Tuple"},{"name":"dest","external_name":"dest","restriction":"Tuple"}],"return_type":"Int64","visibility":"Public","body":"(shortest_path(start))[dest[0]][dest[1]] || (raise(UnreachableError.new))"}},{"html_id":"to_a:Array(Array(T))-instance-method","name":"to_a","doc":"Returns an `Array` with all the elements in the collection.\n\n```\n(1..5).to_a # => [1, 2, 3, 4, 5]\n```","summary":"<p>Returns an <code>Array</code> with all the elements in the collection.</p>","abstract":false,"location":{"filename":"src/nglib/grid/grid.cr","line_number":597,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L597"},"def":{"name":"to_a","return_type":"Array(Array(T))","visibility":"Public","body":"a = Array.new(@h) do\n  Array(T).new(@w)\nend\n@h.times do |i|\n  @w.times do |j|\n    a[i] << self[i, j]\n  end\nend\na\n"}},{"html_id":"to_graph(type=:connect_free):Array(Array(Int32))-instance-method","name":"to_graph","doc":"グリッドを隣接リスト形式で無向グラフに変換します。\n\nあるマス $(i, j)$ の頂点番号は $Wi + j$ となります。\n\n- `:connect_free` : free 同士を結びます（デフォルト）\n- `:connect_bar` : bar 同士を結びます\n- `:connect_same_type` : bar 同士、free 同士を結びます\n\n```\ns = [\n  \"..#\".chars,\n  \".#.\".chars,\n  \"##.\".chars,\n]\ngrid = Grid(Char).dydx4(s)\ngrid.to_graph # => [[3, 1], [0], [], [0], [], [8], [], [], [5]]\n```","summary":"<p>グリッドを隣接リスト形式で無向グラフに変換します。</p>","abstract":false,"args":[{"name":"type","default_value":":connect_free","external_name":"type","restriction":""}],"args_string":"(type = :connect_free) : Array(Array(Int32))","args_html":"(type = <span class=\"n\">:connect_free</span>) : Array(Array(Int32))","location":{"filename":"src/nglib/grid/grid.cr","line_number":355,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L355"},"def":{"name":"to_graph","args":[{"name":"type","default_value":":connect_free","external_name":"type","restriction":""}],"return_type":"Array(Array(Int32))","visibility":"Public","body":"graph = Array.new(@w * @h) do\n  [] of Int32\nend\n@h.times do |i|\n  @w.times do |j|\n    node = (@w * i) + j\n    @delta.each do |__temp_75|\n      di, dj = __temp_75\n      i_adj = i + di\n      j_adj = j + dj\n      if over?(i_adj, j_adj)\n        next\n      end\n      node2 = (@w * i_adj) + j_adj\n      both_frees = (free?(i, j)) & (free?(i_adj, j_adj))\n      both_bars = (barred?(i, j)) & (barred?(i_adj, j_adj))\n      case type\n      when :connect_free\n        if both_frees\n          graph[node] << node2\n        end\n      when :connect_bar\n        if both_bars\n          graph[node] << node2\n        end\n      when :connect_same_type\n        if both_frees || both_bars\n          graph[node] << node2\n        end\n      end\n    end\n  end\nend\ngraph\n"}},{"html_id":"to_s(io:IO)-instance-method","name":"to_s","doc":"Appends a short String representation of this object\nwhich includes its class name and its object address.\n\n```\nclass Person\n  def initialize(@name : String, @age : Int32)\n  end\nend\n\nPerson.new(\"John\", 32).to_s # => #<Person:0x10a199f20>\n```","summary":"<p>Appends a short String representation of this object which includes its class name and its object address.</p>","abstract":false,"args":[{"name":"io","external_name":"io","restriction":"IO"}],"args_string":"(io : IO)","args_html":"(io : IO)","location":{"filename":"src/nglib/grid/grid.cr","line_number":607,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L607"},"def":{"name":"to_s","args":[{"name":"io","external_name":"io","restriction":"IO"}],"visibility":"Public","body":"@h.times do |i|\n  @w.times do |j|\n    if j != 0\n      io << ' '\n    end\n    io << self[i, j]\n  end\n  io << '\\n'\nend\nio\n"}},{"html_id":"w:Int32-instance-method","name":"w","abstract":false,"location":{"filename":"src/nglib/grid/grid.cr","line_number":49,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L49"},"def":{"name":"w","return_type":"Int32","visibility":"Public","body":"@w"}}],"types":[{"html_id":"nglib/NgLib/Grid/Pos","path":"NgLib/Grid/Pos.html","kind":"alias","full_name":"NgLib::Grid::Pos","name":"Pos","abstract":false,"locations":[{"filename":"src/nglib/grid/grid.cr","line_number":48,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L48"}],"repository_name":"nglib","program":false,"enum":false,"alias":true,"aliased":"Tuple(Int32, Int32)","aliased_html":"{Int32, Int32}","const":false,"namespace":{"html_id":"nglib/NgLib/Grid","kind":"class","full_name":"NgLib::Grid(T)","name":"Grid"}},{"html_id":"nglib/NgLib/Grid/UnreachableError","path":"NgLib/Grid/UnreachableError.html","kind":"class","full_name":"NgLib::Grid::UnreachableError","name":"UnreachableError","abstract":false,"superclass":{"html_id":"nglib/Exception","kind":"class","full_name":"Exception","name":"Exception"},"ancestors":[{"html_id":"nglib/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"nglib/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/nglib/grid/grid.cr","line_number":17,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/grid/grid.cr#L17"}],"repository_name":"nglib","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"nglib/NgLib/Grid","kind":"class","full_name":"NgLib::Grid(T)","name":"Grid"}}]},{"html_id":"nglib/NgLib/LCA","path":"NgLib/LCA.html","kind":"class","full_name":"NgLib::LCA","name":"LCA","abstract":false,"superclass":{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"nglib/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/nglib/graph/lca.cr","line_number":5,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/lca.cr#L5"}],"repository_name":"nglib","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"nglib/NgLib","kind":"module","full_name":"NgLib","name":"NgLib"},"doc":"最近共通祖先を求めるライブラリです。","summary":"<p>最近共通祖先を求めるライブラリです。</p>","constructors":[{"html_id":"new(graph:Graph,root=0_i64)-class-method","name":"new","doc":"木構造グラフ `graph` に対して、`root` を根とする LCA を構築します。","summary":"<p>木構造グラフ <code>graph</code> に対して、<code>root</code> を根とする LCA を構築します。</p>","abstract":false,"args":[{"name":"graph","external_name":"graph","restriction":"Graph"},{"name":"root","default_value":"0_i64","external_name":"root","restriction":""}],"args_string":"(graph : Graph, root = 0_i64)","args_html":"(graph : <a href=\"../NgLib/LCA/Graph.html\">Graph</a>, root = <span class=\"n\">0_i64</span>)","location":{"filename":"src/nglib/graph/lca.cr","line_number":12,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/lca.cr#L12"},"def":{"name":"new","args":[{"name":"graph","external_name":"graph","restriction":"Graph"},{"name":"root","default_value":"0_i64","external_name":"root","restriction":""}],"visibility":"Public","body":"_ = allocate\n_.initialize(graph, root)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"ancestor(u:Int,v:Int):Int64-instance-method","name":"ancestor","doc":"頂点 $u$ と 頂点 $v$ の最近共通祖先を返します。","summary":"<p>頂点 $u$ と 頂点 $v$ の最近共通祖先を返します。</p>","abstract":false,"args":[{"name":"u","external_name":"u","restriction":"Int"},{"name":"v","external_name":"v","restriction":"Int"}],"args_string":"(u : Int, v : Int) : Int64","args_html":"(u : <a href=\"../Int.html\">Int</a>, v : <a href=\"../Int.html\">Int</a>) : Int64","location":{"filename":"src/nglib/graph/lca.cr","line_number":34,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/lca.cr#L34"},"def":{"name":"ancestor","args":[{"name":"u","external_name":"u","restriction":"Int"},{"name":"v","external_name":"v","restriction":"Int"}],"return_type":"Int64","visibility":"Public","body":"if @dist[u] < @dist[v]\n  u, v = v, u\nend\nn = @parent.size\nn.times do |k|\n  if ((dist[u] - dist[v]).bit(k)) == 1\n    u = @parent[k][u]\n  end\nend\nif u == v\n  return u\nend\n(n - 1).downto(0) do |k|\n  if @parent[k][u] != @parent[k][v]\n    u, v = @parent[k][u], @parent[k][v]\n  end\nend\n@parent[0][u]\n"}},{"html_id":"dist:Array(Int64)-instance-method","name":"dist","abstract":false,"location":{"filename":"src/nglib/graph/lca.cr","line_number":8,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/lca.cr#L8"},"def":{"name":"dist","return_type":"Array(Int64)","visibility":"Public","body":"@dist"}},{"html_id":"distance_between(u:Int,v:Int):Int64-instance-method","name":"distance_between","doc":"頂点 $u$ と頂点 $v$ の距離を返します。","summary":"<p>頂点 $u$ と頂点 $v$ の距離を返します。</p>","abstract":false,"args":[{"name":"u","external_name":"u","restriction":"Int"},{"name":"v","external_name":"v","restriction":"Int"}],"args_string":"(u : Int, v : Int) : Int64","args_html":"(u : <a href=\"../Int.html\">Int</a>, v : <a href=\"../Int.html\">Int</a>) : Int64","location":{"filename":"src/nglib/graph/lca.cr","line_number":52,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/lca.cr#L52"},"def":{"name":"distance_between","args":[{"name":"u","external_name":"u","restriction":"Int"},{"name":"v","external_name":"v","restriction":"Int"}],"return_type":"Int64","visibility":"Public","body":"(dist[u] + dist[v]) - (dist[ancestor(u, v)] * 2)"}},{"html_id":"on_path?(u:Int,v:Int,a:Int):Bool-instance-method","name":"on_path?","doc":"頂点 $u$ から頂点 $v$ までのパスに頂点 $a$ が含まれているか返します。","summary":"<p>頂点 $u$ から頂点 $v$ までのパスに頂点 $a$ が含まれているか返します。</p>","abstract":false,"args":[{"name":"u","external_name":"u","restriction":"Int"},{"name":"v","external_name":"v","restriction":"Int"},{"name":"a","external_name":"a","restriction":"Int"}],"args_string":"(u : Int, v : Int, a : Int) : Bool","args_html":"(u : <a href=\"../Int.html\">Int</a>, v : <a href=\"../Int.html\">Int</a>, a : <a href=\"../Int.html\">Int</a>) : Bool","location":{"filename":"src/nglib/graph/lca.cr","line_number":57,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/lca.cr#L57"},"def":{"name":"on_path?","args":[{"name":"u","external_name":"u","restriction":"Int"},{"name":"v","external_name":"v","restriction":"Int"},{"name":"a","external_name":"a","restriction":"Int"}],"return_type":"Bool","visibility":"Public","body":"((distance_between(u, a)) + (distance_between(a, v))) == (distance_between(u, v))"}},{"html_id":"parent:Array(Array(Int64))-instance-method","name":"parent","abstract":false,"location":{"filename":"src/nglib/graph/lca.cr","line_number":7,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/lca.cr#L7"},"def":{"name":"parent","return_type":"Array(Array(Int64))","visibility":"Public","body":"@parent"}}],"types":[{"html_id":"nglib/NgLib/LCA/Graph","path":"NgLib/LCA/Graph.html","kind":"alias","full_name":"NgLib::LCA::Graph","name":"Graph","abstract":false,"locations":[{"filename":"src/nglib/graph/lca.cr","line_number":6,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/lca.cr#L6"}],"repository_name":"nglib","program":false,"enum":false,"alias":true,"aliased":"Array(Array(Int64))","aliased_html":"Array(Array(Int64))","const":false,"namespace":{"html_id":"nglib/NgLib/LCA","kind":"class","full_name":"NgLib::LCA","name":"LCA"}}]},{"html_id":"nglib/NgLib/MaxFlowGraph","path":"NgLib/MaxFlowGraph.html","kind":"class","full_name":"NgLib::MaxFlowGraph(Cap)","name":"MaxFlowGraph","abstract":false,"superclass":{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"nglib/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/nglib/graph/max_flow.cr","line_number":2,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/max_flow.cr#L2"}],"repository_name":"nglib","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"nglib/NgLib","kind":"module","full_name":"NgLib","name":"NgLib"},"constructors":[{"html_id":"new(n:Int)-class-method","name":"new","doc":"$n$ 頂点 $0$ 辺のグラフを作ります。\n\n```\nn = 10\ngraph = MaxFlowGraph(Int64).new(n)\n```","summary":"<p>$n$ 頂点 $0$ 辺のグラフを作ります。</p>","abstract":false,"args":[{"name":"n","external_name":"n","restriction":"Int"}],"args_string":"(n : Int)","args_html":"(n : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/graph/max_flow.cr","line_number":33,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/max_flow.cr#L33"},"def":{"name":"new","args":[{"name":"n","external_name":"n","restriction":"Int"}],"visibility":"Public","body":"_ = MaxFlowGraph(Cap).allocate\n_.initialize(n)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"html_id":"new-class-method","name":"new","doc":"$0$ 頂点 $0$ 辺のグラフを作ります。\n\n```\ngraph = MaxFlowGraph(Int64).new\n```","summary":"<p>$0$ 頂点 $0$ 辺のグラフを作ります。</p>","abstract":false,"location":{"filename":"src/nglib/graph/max_flow.cr","line_number":21,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/max_flow.cr#L21"},"def":{"name":"new","visibility":"Public","body":"_ = MaxFlowGraph(Cap).allocate\n_.initialize\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"add_edge(from:Int,to:Int,cap:Cap):Int32-instance-method","name":"add_edge","doc":"頂点 `from` から頂点 `to` へ最大容量 `cap`、流量 $0$ の辺を追加します。\n\n何番目に追加された辺であるかを返します。\n\n```\nn = 10\ngraph = MaxFlowGraph(Int64).new(n)\ngraph.add_edge(0, 1, 1) # => 0\ngraph.add_edge(1, 3, 2) # => 1\ngraph.add_edge(5, 6, 8) # => 2\n```","summary":"<p>頂点 <code>from</code> から頂点 <code>to</code> へ最大容量 <code>cap</code>、流量 $0$ の辺を追加します。</p>","abstract":false,"args":[{"name":"from","external_name":"from","restriction":"Int"},{"name":"to","external_name":"to","restriction":"Int"},{"name":"cap","external_name":"cap","restriction":"Cap"}],"args_string":"(from : Int, to : Int, cap : Cap) : Int32","args_html":"(from : <a href=\"../Int.html\">Int</a>, to : <a href=\"../Int.html\">Int</a>, cap : Cap) : Int32","location":{"filename":"src/nglib/graph/max_flow.cr","line_number":50,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/max_flow.cr#L50"},"def":{"name":"add_edge","args":[{"name":"from","external_name":"from","restriction":"Int"},{"name":"to","external_name":"to","restriction":"Int"},{"name":"cap","external_name":"cap","restriction":"Cap"}],"return_type":"Int32","visibility":"Public","body":"m = @pos.size\n@pos << {from.to_i32, @graph[from].size}\nfrom_id = @graph[from].size\nto_id = @graph[to].size\nif from == to\n  to_id = to_id + 1\nend\n@graph[from] << (Edge(Cap).new(to.to_i32, to_id, cap))\n@graph[to] << (Edge(Cap).new(from.to_i32, from_id, Cap.zero))\nm\n"}},{"html_id":"change_edge(i:Int,new_cap:Cap,new_flow:Cap)-instance-method","name":"change_edge","doc":"$i$ 番目に変更された辺の容量、流量をそれぞれ `new_cap`, `new_flow` に変更します。\n\n他の辺の容量、流量は変更しません。","summary":"<p>$i$ 番目に変更された辺の容量、流量をそれぞれ <code>new_cap</code>, <code>new_flow</code> に変更します。</p>","abstract":false,"args":[{"name":"i","external_name":"i","restriction":"Int"},{"name":"new_cap","external_name":"new_cap","restriction":"Cap"},{"name":"new_flow","external_name":"new_flow","restriction":"Cap"}],"args_string":"(i : Int, new_cap : Cap, new_flow : Cap)","args_html":"(i : <a href=\"../Int.html\">Int</a>, new_cap : Cap, new_flow : Cap)","location":{"filename":"src/nglib/graph/max_flow.cr","line_number":80,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/max_flow.cr#L80"},"def":{"name":"change_edge","args":[{"name":"i","external_name":"i","restriction":"Int"},{"name":"new_cap","external_name":"new_cap","restriction":"Cap"},{"name":"new_flow","external_name":"new_flow","restriction":"Cap"}],"visibility":"Public","body":"@graph[@pos[i].first][@pos[i].second].cap = new_cap - new_flow\n@graph[_e.to][_e.rev].cap = new_flow\n"}},{"html_id":"edges-instance-method","name":"edges","doc":"今の内部の辺の状態を返します。\n\n辺の順番は `add_edge` での追加順と同じです。","summary":"<p>今の内部の辺の状態を返します。</p>","abstract":false,"location":{"filename":"src/nglib/graph/max_flow.cr","line_number":73,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/max_flow.cr#L73"},"def":{"name":"edges","visibility":"Public","body":"Array.new(@pos.size) do |i|\n  get_edge(i)\nend"}},{"html_id":"flow(s:Int,t:Int,flow_limit:Cap)-instance-method","name":"flow","doc":"頂点 $s$ から頂点 $t$ へ流せるだけ流し、流せた量を返します。\n\n複数回呼ぶことも可能ですが、同じ結果を返すわけではありません。\n挙動については以下を参考にしてください。\n- https://atcoder.github.io/ac-library/document_ja/appendix.html\n\n```\nn = 4\ngraph = MaxFlowGraph(Int64).new(n)\ngraph.add_edge(0, 1, 10) # => 0\ngraph.add_edge(1, 2, 2)  # => 1\ngraph.add_edge(0, 2, 5)  # => 2\ngraph.add_edge(1, 3, 6)  # => 3\ngraph.add_edge(2, 3, 3)  # => 4\n\ngraph.flow(0, 3, 6)   # => 6\ngraph.flow(0, 3, 100) # => 9  (本来の挙動であれば 3 を返します。)\n```\nameba:disable Metrics/CyclomaticComplexity","summary":"<p>頂点 $s$ から頂点 $t$ へ流せるだけ流し、流せた量を返します。</p>","abstract":false,"args":[{"name":"s","external_name":"s","restriction":"Int"},{"name":"t","external_name":"t","restriction":"Int"},{"name":"flow_limit","external_name":"flow_limit","restriction":"Cap"}],"args_string":"(s : Int, t : Int, flow_limit : Cap)","args_html":"(s : <a href=\"../Int.html\">Int</a>, t : <a href=\"../Int.html\">Int</a>, flow_limit : Cap)","location":{"filename":"src/nglib/graph/max_flow.cr","line_number":125,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/max_flow.cr#L125"},"def":{"name":"flow","args":[{"name":"s","external_name":"s","restriction":"Int"},{"name":"t","external_name":"t","restriction":"Int"},{"name":"flow_limit","external_name":"flow_limit","restriction":"Cap"}],"visibility":"Public","body":"level = [0] * @size\niter = [0] * @size\nbfs = -> do\n  level = [-1] * @size\n  level[s] = 0\n  que = Deque(Int32).new([s.to_i32])\n  while !que.empty?\n    v = que.shift\n    @graph[v].each do |e|\n      if (e.cap == 0) || level[e.to] >= 0\n        next\n      end\n      level[e.to] = level[v] + 1\n      if e.to == t\n        next\n      end\n      que << e.to\n    end\n  end\nend\ndfs = uninitialized (Int32, Cap -> Cap)\ndfs = ->(v : Int32, up : Cap) do\n  if v == s\n    return up\n  end\n  res = Cap.zero\n  level_v = level[v]\n  (iter[v]...@graph[v].size).each do |i|\n    e = @graph[v][i]\n    if level_v <= level[e.to] || (@graph[e.to][e.rev].cap == 0)\n      next\n    end\n    d = dfs.call(e.to, Math.min(up - res, @graph[e.to][e.rev].cap))\n    if d <= 0\n      next\n    end\n    __temp_70 = @graph[v][i]\n    __temp_70.cap = __temp_70.cap + d\n    __temp_71 = @graph[e.to][e.rev]\n    __temp_71.cap = __temp_71.cap - d\n    res = res + d\n    if res == up\n      return res\n    end\n  end\n  level[v] = @size\n  res\nend\nres = Cap.zero\nwhile res < flow_limit\n  bfs.call\n  if level[t] == -1\n    break\n  end\n  iter = [0] * @size\n  f = dfs.call(t.to_i32, flow_limit - res)\n  if f == 0\n    break\n  end\n  res = res + f\nend\nres\n"}},{"html_id":"flow(s:Int,t:Int)-instance-method","name":"flow","doc":"頂点 $s$ から頂点 $t$ へ流せるだけ流し、流せた量を返します。\n\n複数回呼ぶことも可能ですが、同じ結果を返すわけではありません。\n挙動については以下を参考にしてください。\n- https://atcoder.github.io/ac-library/document_ja/appendix.html\n\n```\nn = 4\ngraph = MaxFlowGraph(Int64).new(n)\ngraph.add_edge(0, 1, 10) # => 0\ngraph.add_edge(1, 2, 2)  # => 1\ngraph.add_edge(0, 2, 5)  # => 2\ngraph.add_edge(1, 3, 6)  # => 3\ngraph.add_edge(2, 3, 3)  # => 4\n\ngraph.flow(0, 3) # => 9\n```","summary":"<p>頂点 $s$ から頂点 $t$ へ流せるだけ流し、流せた量を返します。</p>","abstract":false,"args":[{"name":"s","external_name":"s","restriction":"Int"},{"name":"t","external_name":"t","restriction":"Int"}],"args_string":"(s : Int, t : Int)","args_html":"(s : <a href=\"../Int.html\">Int</a>, t : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/graph/max_flow.cr","line_number":102,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/max_flow.cr#L102"},"def":{"name":"flow","args":[{"name":"s","external_name":"s","restriction":"Int"},{"name":"t","external_name":"t","restriction":"Int"}],"visibility":"Public","body":"flow(s, t, Cap::MAX)"}},{"html_id":"get_edge(i:Int)-instance-method","name":"get_edge","doc":"今の内部の辺の状態を返します。\n\n辺の順番は `add_edge` での追加順と同じです。","summary":"<p>今の内部の辺の状態を返します。</p>","abstract":false,"args":[{"name":"i","external_name":"i","restriction":"Int"}],"args_string":"(i : Int)","args_html":"(i : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/graph/max_flow.cr","line_number":64,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/max_flow.cr#L64"},"def":{"name":"get_edge","args":[{"name":"i","external_name":"i","restriction":"Int"}],"visibility":"Public","body":"e = @graph[@pos[i][0]][@pos[i][1]]\nre = @graph[e.to][e.rev]\n{from: @pos[i][0], to: e.to, cap: e.cap + re.cap, flow: re.cap}\n"}},{"html_id":"min_cut(s:Int)-instance-method","name":"min_cut","doc":"長さ $n$ の配列を返します。\n$i$ 番目の要素には、頂点 $s$ から $i$ へ残余グラフで到達可能なとき、またその時のみ `true` を返します。\n\n`flow(s, t)` を `flow_limit` なしでちょうど一回呼んだ後に呼ぶと、\n返り値は $s, t$ 間の `mincut` に対応します。","summary":"<p>長さ $n$ の配列を返します。 $i$ 番目の要素には、頂点 $s$ から $i$ へ残余グラフで到達可能なとき、またその時のみ <code>true</code> を返します。</p>","abstract":false,"args":[{"name":"s","external_name":"s","restriction":"Int"}],"args_string":"(s : Int)","args_html":"(s : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/graph/max_flow.cr","line_number":181,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/max_flow.cr#L181"},"def":{"name":"min_cut","args":[{"name":"s","external_name":"s","restriction":"Int"}],"visibility":"Public","body":"closed = [false] * @size\nque = Deque(Int32).new([s.to_i32])\nif que.empty?\nelse\n  now = que.shift\n  closed[now] = true\n  @graph[now].each do |e|\n    if (e.cap != 0) && (!closed[e.to])\n      closed[e.to] = true\n      que << e.to\n    end\n  end\nend\nclosed\n"}},{"html_id":"size:Int32-instance-method","name":"size","abstract":false,"location":{"filename":"src/nglib/graph/max_flow.cr","line_number":12,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/max_flow.cr#L12"},"def":{"name":"size","return_type":"Int32","visibility":"Public","body":"@size"}}],"types":[{"html_id":"nglib/NgLib/MaxFlowGraph/Edge","path":"NgLib/MaxFlowGraph/Edge.html","kind":"class","full_name":"NgLib::MaxFlowGraph::Edge(T)","name":"Edge","abstract":false,"superclass":{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"nglib/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/nglib/graph/max_flow.cr","line_number":3,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/max_flow.cr#L3"}],"repository_name":"nglib","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"nglib/NgLib/MaxFlowGraph","kind":"class","full_name":"NgLib::MaxFlowGraph(Cap)","name":"MaxFlowGraph"},"constructors":[{"html_id":"new(to:Int32,rev:Int32,cap:T)-class-method","name":"new","abstract":false,"args":[{"name":"to","external_name":"to","restriction":"::Int32"},{"name":"rev","external_name":"rev","restriction":"::Int32"},{"name":"cap","external_name":"cap","restriction":"T"}],"args_string":"(to : Int32, rev : Int32, cap : T)","args_html":"(to : Int32, rev : Int32, cap : T)","location":{"filename":"src/nglib/graph/max_flow.cr","line_number":8,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/max_flow.cr#L8"},"def":{"name":"new","args":[{"name":"to","external_name":"to","restriction":"::Int32"},{"name":"rev","external_name":"rev","restriction":"::Int32"},{"name":"cap","external_name":"cap","restriction":"T"}],"visibility":"Public","body":"_ = Edge(T).allocate\n_.initialize(to, rev, cap)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"cap:T-instance-method","name":"cap","abstract":false,"location":{"filename":"src/nglib/graph/max_flow.cr","line_number":6,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/max_flow.cr#L6"},"def":{"name":"cap","return_type":"T","visibility":"Public","body":"@cap"}},{"html_id":"cap=(cap:T)-instance-method","name":"cap=","abstract":false,"args":[{"name":"cap","external_name":"cap","restriction":"T"}],"args_string":"(cap : T)","args_html":"(cap : T)","location":{"filename":"src/nglib/graph/max_flow.cr","line_number":6,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/max_flow.cr#L6"},"def":{"name":"cap=","args":[{"name":"cap","external_name":"cap","restriction":"T"}],"visibility":"Public","body":"@cap = cap"}},{"html_id":"rev:Int32-instance-method","name":"rev","abstract":false,"location":{"filename":"src/nglib/graph/max_flow.cr","line_number":5,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/max_flow.cr#L5"},"def":{"name":"rev","return_type":"Int32","visibility":"Public","body":"@rev"}},{"html_id":"to:Int32-instance-method","name":"to","abstract":false,"location":{"filename":"src/nglib/graph/max_flow.cr","line_number":4,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/max_flow.cr#L4"},"def":{"name":"to","return_type":"Int32","visibility":"Public","body":"@to"}}]}]},{"html_id":"nglib/NgLib/MexSet","path":"NgLib/MexSet.html","kind":"class","full_name":"NgLib::MexSet(T)","name":"MexSet","abstract":false,"superclass":{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"nglib/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/nglib/data_structure/mex_set.cr","line_number":5,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/mex_set.cr#L5"}],"repository_name":"nglib","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"nglib/NgLib","kind":"module","full_name":"NgLib","name":"NgLib"},"constructors":[{"html_id":"new(inf:T,sup:T)-class-method","name":"new","doc":"下限値 `inf` で、上限値が `sup` の `MexSet` を構築します。\n\nNOTE: 非推奨の API です。mex を求めるときに `inf` のみ指定する方法を推奨します。\n\n```\n# 非負整数に対する MexSet\nset = MexSet(Int64).new(0_i64, Int64::MAX)\n```","summary":"<p>下限値 <code>inf</code> で、上限値が <code>sup</code> の <code><a href=\"../NgLib/MexSet.html\">MexSet</a></code> を構築します。</p>","abstract":false,"args":[{"name":"inf","external_name":"inf","restriction":"T"},{"name":"sup","external_name":"sup","restriction":"T"}],"args_string":"(inf : T, sup : T)","args_html":"(inf : T, sup : T)","location":{"filename":"src/nglib/data_structure/mex_set.cr","line_number":25,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/mex_set.cr#L25"},"def":{"name":"new","args":[{"name":"inf","external_name":"inf","restriction":"T"},{"name":"sup","external_name":"sup","restriction":"T"}],"visibility":"Public","body":"_ = MexSet(T).allocate\n_.initialize(inf, sup)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"html_id":"new-class-method","name":"new","abstract":false,"location":{"filename":"src/nglib/data_structure/mex_set.cr","line_number":9,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/mex_set.cr#L9"},"def":{"name":"new","visibility":"Public","body":"_ = MexSet(T).allocate\n_.initialize\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"<<(x:T)-instance-method","name":"<<","doc":"`add` へのエイリアスです。","summary":"<p><code><a href=\"../NgLib/MexSet.html#add%28x%3AT%29-instance-method\">#add</a></code> へのエイリアスです。</p>","abstract":false,"args":[{"name":"x","external_name":"x","restriction":"T"}],"args_string":"(x : T)","args_html":"(x : T)","location":{"filename":"src/nglib/data_structure/mex_set.cr","line_number":173,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/mex_set.cr#L173"},"def":{"name":"<<","args":[{"name":"x","external_name":"x","restriction":"T"}],"visibility":"Public","body":"add(x)"}},{"html_id":"add(x:T)-instance-method","name":"add","doc":"集合に $x$ を追加します。","summary":"<p>集合に $x$ を追加します。</p>","abstract":false,"args":[{"name":"x","external_name":"x","restriction":"T"}],"args_string":"(x : T)","args_html":"(x : T)","location":{"filename":"src/nglib/data_structure/mex_set.cr","line_number":41,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/mex_set.cr#L41"},"def":{"name":"add","args":[{"name":"x","external_name":"x","restriction":"T"}],"visibility":"Public","body":"ni = (@set.greater_equal_index({x.succ, x.succ})).not_nil!\nnl, nu = @set[ni]\ni = ni - 1\nl, u = @set[i]\nif l <= x && x <= u\n  @mset << x\n  return self\nend\nif u == (x - 1)\n  if nl == (x + 1)\n    @set.delete({l, u})\n    @set.delete({nl, nu})\n    @set << {l, nu}\n  else\n    @set.delete({l, u})\n    @set << {l, x}\n  end\nelse\n  if nl == (x + 1)\n    @set.delete({nl, nu})\n    @set << {x, nu}\n  else\n    @set << {x, x}\n  end\nend\nself\n"}},{"html_id":"add?(x:T)-instance-method","name":"add?","doc":"集合に $x$ を追加します。\n\nmex の値に変更があったとき `true` を返します。","summary":"<p>集合に $x$ を追加します。</p>","abstract":false,"args":[{"name":"x","external_name":"x","restriction":"T"}],"args_string":"(x : T)","args_html":"(x : T)","location":{"filename":"src/nglib/data_structure/mex_set.cr","line_number":75,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/mex_set.cr#L75"},"def":{"name":"add?","args":[{"name":"x","external_name":"x","restriction":"T"}],"visibility":"Public","body":"ni = (@set.greater_equal_index({x.succ, x.succ})).not_nil!\nnl, nu = @set[ni]\ni = ni - 1\nl, u = @set[i]\nif l <= x && x <= u\n  @mset << x\n  return false\nend\nif u == (x - 1)\n  if nl == (x + 1)\n    @set.delete({l, u})\n    @set.delete({nl, nu})\n    @s << {l, nu}\n  else\n    @set.delete({l, u})\n    @set << {l, x}\n  end\nelse\n  if nl == (x + 1)\n    @set.delete({nl, nu})\n    @set << {x, nu}\n  else\n    @set << {x, x}\n  end\nend\ntrue\n"}},{"html_id":"delete(x:T)-instance-method","name":"delete","doc":"集合から $x$ を削除します。","summary":"<p>集合から $x$ を削除します。</p>","abstract":false,"args":[{"name":"x","external_name":"x","restriction":"T"}],"args_string":"(x : T)","args_html":"(x : T)","location":{"filename":"src/nglib/data_structure/mex_set.cr","line_number":107,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/mex_set.cr#L107"},"def":{"name":"delete","args":[{"name":"x","external_name":"x","restriction":"T"}],"visibility":"Public","body":"i0 = @mset.greater_equal_index(x)\nif (!i0.nil?) && (@mset[i0] == x)\n  @mset.delete_at(i0.not_nil!)\n  return self\nend\ni = (@set.greater_equal_index({x + 1, x + 1})).not_nil! - 1\nl, u = @set[i]\nif x < l || u < x\n  return self\nend\n@set.delete_at(i)\nif x == l\n  if l < u\n    @set << {l + 1, u}\n  end\nelse\n  if x == u\n    if l < u\n      @set << {l, u - 1}\n    end\n  else\n    @set << {l, x - 1}\n    @set << {x + 1, u}\n  end\nend\nself\n"}},{"html_id":"delete?(x:T)-instance-method","name":"delete?","doc":"集合から $x$ を削除します。\n\n実際に値が削除された場合 `true` を返します。","summary":"<p>集合から $x$ を削除します。</p>","abstract":false,"args":[{"name":"x","external_name":"x","restriction":"T"}],"args_string":"(x : T)","args_html":"(x : T)","location":{"filename":"src/nglib/data_structure/mex_set.cr","line_number":135,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/mex_set.cr#L135"},"def":{"name":"delete?","args":[{"name":"x","external_name":"x","restriction":"T"}],"visibility":"Public","body":"i0 = @mset.index(x)\nif i0.nil?\nelse\n  @mset.delete_at(i0.not_nil!)\n  return true\nend\ni = (@set.greater_equal_index({x + 1, x + 1})).not_nil! - 1\nl, u = @set[i]\nif x < l || u < x\n  return false\nend\n@set.delete_at(i)\nif x == l\n  if l < u\n    @set << {l + 1, u}\n  end\nelse\n  if x == u\n    if l < u\n      @set << {l, u - 1}\n    end\n  else\n    @set << {l, x - 1}\n    @set << {x + 1, u}\n  end\nend\ntrue\n"}},{"html_id":"includes?(x:T)-instance-method","name":"includes?","doc":"集合に $x$ が含まれるなら `true` を返します。","summary":"<p>集合に $x$ が含まれるなら <code>true</code> を返します。</p>","abstract":false,"args":[{"name":"x","external_name":"x","restriction":"T"}],"args_string":"(x : T)","args_html":"(x : T)","location":{"filename":"src/nglib/data_structure/mex_set.cr","line_number":34,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/mex_set.cr#L34"},"def":{"name":"includes?","args":[{"name":"x","external_name":"x","restriction":"T"}],"visibility":"Public","body":"i = (@set.greater_equal_index({x.succ, x.succ})).not_nil! - 1\nl, u = @set[i]\nl <= x && x <= u\n"}},{"html_id":"mex(inf:T=T.zero)-instance-method","name":"mex","doc":"`inf` を下限値として $\\mathrm{mex}$ を求めます。\n\n非負整数に対する $\\mathrm{mex}$ はデフォルト値の T.zero を使用すれば良いです。","summary":"<p><code>inf</code> を下限値として $\\mathrm{mex}$ を求めます。</p>","abstract":false,"args":[{"name":"inf","default_value":"T.zero","external_name":"inf","restriction":"T"}],"args_string":"(inf : T = T.zero)","args_html":"(inf : T = <span class=\"t\">T</span>.zero)","location":{"filename":"src/nglib/data_structure/mex_set.cr","line_number":163,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/mex_set.cr#L163"},"def":{"name":"mex","args":[{"name":"inf","default_value":"T.zero","external_name":"inf","restriction":"T"}],"visibility":"Public","body":"i = (@set.greater_equal_index({inf + 1, inf + 1})).not_nil! - 1\nl, u = @set[i]\nif l <= inf && inf <= u\n  return u + 1\nend\ninf\n"}}]},{"html_id":"nglib/NgLib/MSTGraph","path":"NgLib/MSTGraph.html","kind":"class","full_name":"NgLib::MSTGraph(T)","name":"MSTGraph","abstract":false,"superclass":{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"nglib/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/nglib/graph/mst.cr","line_number":7,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/mst.cr#L7"}],"repository_name":"nglib","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"nglib/NgLib","kind":"module","full_name":"NgLib","name":"NgLib"},"doc":"$n$ 頂点の重み付きグラフについて、最小/最大全域木を構築します。\n\nKruskal 法による実装です。","summary":"<p>$n$ 頂点の重み付きグラフについて、最小/最大全域木を構築します。</p>","class_methods":[{"html_id":"max(n)-class-method","name":"max","doc":"$n$ 頂点 $0$ 辺のグラフを生成します。\n\n最大全域木を構築します。","summary":"<p>$n$ 頂点 $0$ 辺のグラフを生成します。</p>","abstract":false,"args":[{"name":"n","external_name":"n","restriction":""}],"args_string":"(n)","args_html":"(n)","location":{"filename":"src/nglib/graph/mst.cr","line_number":32,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/mst.cr#L32"},"def":{"name":"max","args":[{"name":"n","external_name":"n","restriction":""}],"visibility":"Public","body":"new(n) do |lhs, rhs|\n  rhs <=> lhs\nend"}},{"html_id":"min(n)-class-method","name":"min","doc":"$n$ 頂点 $0$ 辺のグラフを生成します。\n\n最小全域木を構築します。","summary":"<p>$n$ 頂点 $0$ 辺のグラフを生成します。</p>","abstract":false,"args":[{"name":"n","external_name":"n","restriction":""}],"args_string":"(n)","args_html":"(n)","location":{"filename":"src/nglib/graph/mst.cr","line_number":25,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/mst.cr#L25"},"def":{"name":"min","args":[{"name":"n","external_name":"n","restriction":""}],"visibility":"Public","body":"new(n) do |lhs, rhs|\n  lhs <=> rhs\nend"}}],"constructors":[{"html_id":"new(n)-class-method","name":"new","abstract":false,"args":[{"name":"n","external_name":"n","restriction":""}],"args_string":"(n)","args_html":"(n)","location":{"filename":"src/nglib/graph/mst.cr","line_number":11,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/mst.cr#L11"},"def":{"name":"new","args":[{"name":"n","external_name":"n","restriction":""}],"visibility":"Public","body":"_ = MSTGraph(T).allocate\n_.initialize(n)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"html_id":"new(n,&cmp:T,T->Int32)-class-method","name":"new","abstract":false,"args":[{"name":"n","external_name":"n","restriction":""}],"args_string":"(n, &cmp : T, T -> Int32)","args_html":"(n, &cmp : T, T -> Int32)","location":{"filename":"src/nglib/graph/mst.cr","line_number":17,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/mst.cr#L17"},"def":{"name":"new","args":[{"name":"n","external_name":"n","restriction":""}],"yields":2,"block_arity":2,"block_arg":{"name":"cmp","external_name":"cmp","restriction":"(T, T -> Int32)"},"visibility":"Public","body":"_ = MSTGraph(T).allocate\n_.initialize(n, &cmp) do |_arg0, _arg1|\n  yield _arg0, _arg1\nend\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"add_edge(u:Int,v:Int,w:T)-instance-method","name":"add_edge","doc":"グラフに辺 $(u, v, w)$ を追加します。\n\n```\ngraph = MSTGraph(Int64).new(n) { |a, b| a < b }\nm.times { graph.add_edge(u, v, w) }\n```","summary":"<p>グラフに辺 $(u, v, w)$ を追加します。</p>","abstract":false,"args":[{"name":"u","external_name":"u","restriction":"Int"},{"name":"v","external_name":"v","restriction":"Int"},{"name":"w","external_name":"w","restriction":"T"}],"args_string":"(u : Int, v : Int, w : T)","args_html":"(u : <a href=\"../Int.html\">Int</a>, v : <a href=\"../Int.html\">Int</a>, w : T)","location":{"filename":"src/nglib/graph/mst.cr","line_number":42,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/mst.cr#L42"},"def":{"name":"add_edge","args":[{"name":"u","external_name":"u","restriction":"Int"},{"name":"v","external_name":"v","restriction":"Int"},{"name":"w","external_name":"w","restriction":"T"}],"visibility":"Public","body":"@edges << {u.to_i32, v.to_i32, w}"}},{"html_id":"size:Int64-instance-method","name":"size","abstract":false,"location":{"filename":"src/nglib/graph/mst.cr","line_number":8,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/mst.cr#L8"},"def":{"name":"size","return_type":"Int64","visibility":"Public","body":"@size"}},{"html_id":"sum-instance-method","name":"sum","doc":"最小全域木を構成したときの辺の重みの総和求めます。\n\n```\ngraph = MSTGraph(Int64).new(n) { |a, b| a < b }\nm.times { graph.add_edge(u, v, w) }\ngraph.sum\n```","summary":"<p>最小全域木を構成したときの辺の重みの総和求めます。</p>","abstract":false,"location":{"filename":"src/nglib/graph/mst.cr","line_number":53,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/mst.cr#L53"},"def":{"name":"sum","visibility":"Public","body":"@edges.sort! do |lhs, rhs|\n  @cmp.call(lhs[2], rhs[2])\nend\nut = AtCoder::DSU.new(@size)\nres = T.zero\n@edges.each do |__temp_72|\n  u, v, w = __temp_72\n  if ut.same?(u, v)\n    next\n  end\n  ut.merge(u, v)\n  res = res + w\nend\nres\n"}}]},{"html_id":"nglib/NgLib/PotentializedDisjointSet","path":"NgLib/PotentializedDisjointSet.html","kind":"class","full_name":"NgLib::PotentializedDisjointSet(Abel)","name":"PotentializedDisjointSet","abstract":false,"superclass":{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"nglib/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/nglib/data_structure/potentialized_disjoint_set.cr","line_number":8,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/potentialized_disjoint_set.cr#L8"}],"repository_name":"nglib","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"nglib/NgLib","kind":"module","full_name":"NgLib","name":"NgLib"},"doc":"重み付き DSU (Union-Find) などと呼ばれるデータ構造です。\n\nAbel 群を載せることができます。すなわち、次のメソッドが実装されているオブジェクトが載ります。\n- `#zero`\n- `+`\n- `-`","summary":"<p>重み付き DSU (Union-Find) などと呼ばれるデータ構造です。</p>","constructors":[{"html_id":"new(size:Int)-class-method","name":"new","doc":"n 頂点 0 辺の無向グラフを作ります。\n\n```\nn = int\nut = PotentializedDisjointSet(Abel).new(n)\n```","summary":"<p>n 頂点 0 辺の無向グラフを作ります。</p>","abstract":false,"args":[{"name":"size","external_name":"size","restriction":"Int"}],"args_string":"(size : Int)","args_html":"(size : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/data_structure/potentialized_disjoint_set.cr","line_number":30,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/potentialized_disjoint_set.cr#L30"},"def":{"name":"new","args":[{"name":"size","external_name":"size","restriction":"Int"}],"visibility":"Public","body":"_ = PotentializedDisjointSet(Abel).allocate\n_.initialize(size)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"html_id":"new-class-method","name":"new","doc":"0 頂点 0 辺の無向グラフを作ります。\n\n```\nut = PotentializedDisjointSet(Abel).new\n```","summary":"<p>0 頂点 0 辺の無向グラフを作ります。</p>","abstract":false,"location":{"filename":"src/nglib/data_structure/potentialized_disjoint_set.cr","line_number":18,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/potentialized_disjoint_set.cr#L18"},"def":{"name":"new","visibility":"Public","body":"_ = PotentializedDisjointSet(Abel).allocate\n_.initialize\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"diff(low:Int,high:Int):Abel-instance-method","name":"diff","doc":"w[high] - w[low] を返します。\n\nlow と high が同じ連結成分に属していない場合 Abel.zero を返します。\n\n```\nut = PotentializedDisjointSet(Abel).new(size: 10)\nut.unite(2, 1, 1)\nut.unite(2, 3, 5)\nut.unite(3, 4, 2)\nut.diff(1, 2) # => -1\nut.diff(2, 1) # => 1\nut.diff(2, 3) # => 5\nut.diff(2, 4) # => 7\nut.diff(0, 9) # => Abel.zero\n```","summary":"<p>w[high] - w[low] を返します。</p>","abstract":false,"args":[{"name":"low","external_name":"low","restriction":"Int"},{"name":"high","external_name":"high","restriction":"Int"}],"args_string":"(low : Int, high : Int) : Abel","args_html":"(low : <a href=\"../Int.html\">Int</a>, high : <a href=\"../Int.html\">Int</a>) : Abel","location":{"filename":"src/nglib/data_structure/potentialized_disjoint_set.cr","line_number":109,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/potentialized_disjoint_set.cr#L109"},"def":{"name":"diff","args":[{"name":"low","external_name":"low","restriction":"Int"},{"name":"high","external_name":"high","restriction":"Int"}],"return_type":"Abel","visibility":"Public","body":"(weight(high)) - (weight(low))"}},{"html_id":"diff?(low:Int,high:Int):Abel|Nil-instance-method","name":"diff?","doc":"w[high] - w[low] を返します。\n\nlow と high が同じ連結成分に属していない場合 nil を返します。\n\n```\nut = PotentializedDisjointSet(Abel).new(size: 10)\nut.unite(2, 1, 1)\nut.unite(2, 3, 5)\nut.unite(3, 4, 2)\nut.diff(1, 2) # => -1\nut.diff(2, 1) # => 1\nut.diff(2, 3) # => 5\nut.diff(2, 4) # => 7\nut.diff(0, 9) # => nil\n```","summary":"<p>w[high] - w[low] を返します。</p>","abstract":false,"args":[{"name":"low","external_name":"low","restriction":"Int"},{"name":"high","external_name":"high","restriction":"Int"}],"args_string":"(low : Int, high : Int) : Abel | Nil","args_html":"(low : <a href=\"../Int.html\">Int</a>, high : <a href=\"../Int.html\">Int</a>) : Abel | Nil","location":{"filename":"src/nglib/data_structure/potentialized_disjoint_set.cr","line_number":128,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/potentialized_disjoint_set.cr#L128"},"def":{"name":"diff?","args":[{"name":"low","external_name":"low","restriction":"Int"},{"name":"high","external_name":"high","restriction":"Int"}],"return_type":"Abel | ::Nil","visibility":"Public","body":"if equiv?(low, high)\nelse\n  return nil\nend\n(weight(high)) - (weight(low))\n"}},{"html_id":"equiv?(a:Int,b:Int):Bool-instance-method","name":"equiv?","doc":"頂点 a と頂点 b が同じ連結成分に属しているなら `true` を返します。\n\n```\nn = int\nut = PotentializedDisjointSet(Abel).new(n)\nut.equiv?(u, v) # => true\n```","summary":"<p>頂点 a と頂点 b が同じ連結成分に属しているなら <code>true</code> を返します。</p>","abstract":false,"args":[{"name":"a","external_name":"a","restriction":"Int"},{"name":"b","external_name":"b","restriction":"Int"}],"args_string":"(a : Int, b : Int) : Bool","args_html":"(a : <a href=\"../Int.html\">Int</a>, b : <a href=\"../Int.html\">Int</a>) : Bool","location":{"filename":"src/nglib/data_structure/potentialized_disjoint_set.cr","line_number":73,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/potentialized_disjoint_set.cr#L73"},"def":{"name":"equiv?","args":[{"name":"a","external_name":"a","restriction":"Int"},{"name":"b","external_name":"b","restriction":"Int"}],"return_type":"Bool","visibility":"Public","body":"(leader(a)) == (leader(b))"}},{"html_id":"groups:Array(Array(Int64))|Nil-instance-method","name":"groups","doc":"グラフを連結成分に分け、その情報を返します。\n\n返り値は「「一つの連結成分の頂点番号のリスト」のリスト」です。\n（内側外側限らず）Array 内でどの順番で頂点が格納されているかは未定義です。","summary":"<p>グラフを連結成分に分け、その情報を返します。</p>","abstract":false,"location":{"filename":"src/nglib/data_structure/potentialized_disjoint_set.cr","line_number":142,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/potentialized_disjoint_set.cr#L142"},"def":{"name":"groups","return_type":"Array(Array(Int64)) | Nil","visibility":"Public","body":"leader_buf = Array(Int64).new(@n, 0_i64)\ngroup_size = Array(Int64).new(@n, 0_i64)\n@n.times do |i|\n  leader_buf[i] = leader(i)\n  __temp_62 = leader_buf[i]\n  group_size[__temp_62] = group_size[__temp_62] + 1\nend\nres = Array.new(@n) do\n  Array(Int64).new\nend\n@n.times do |i|\n  res[leader_buf[i]] << i.to_i64\nend\nres.delete([] of Int64)\nres\n"}},{"html_id":"leader(a:Int):Int64-instance-method","name":"leader","doc":"頂点 a の属する連結成分のリーダーを返します。\n\n```\nn = int\nut = PotentializedDisjointSet(Abel).new(n)\nut.unite(2, 3, 0)\nut.leader(0) # => 0\nut.leader(3) # => 2  (3 の可能性もある)\n```","summary":"<p>頂点 a の属する連結成分のリーダーを返します。</p>","abstract":false,"args":[{"name":"a","external_name":"a","restriction":"Int"}],"args_string":"(a : Int) : Int64","args_html":"(a : <a href=\"../Int.html\">Int</a>) : Int64","location":{"filename":"src/nglib/data_structure/potentialized_disjoint_set.cr","line_number":86,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/potentialized_disjoint_set.cr#L86"},"def":{"name":"leader","args":[{"name":"a","external_name":"a","restriction":"Int"}],"return_type":"Int64","visibility":"Public","body":"if @parent_or_size[a] < 0\n  return a.to_i64\nend\nl = (leader(@parent_or_size[a])).to_i32\n__temp_60 = a\n@potentials[__temp_60] = @potentials[__temp_60] + @potentials[@parent_or_size[a]]\n@parent_or_size[a] = l\n@parent_or_size[a].to_i64\n"}},{"html_id":"size(a:Int):Int64-instance-method","name":"size","doc":"頂点 a が属する連結成分の大きさを返します。","summary":"<p>頂点 a が属する連結成分の大きさを返します。</p>","abstract":false,"args":[{"name":"a","external_name":"a","restriction":"Int"}],"args_string":"(a : Int) : Int64","args_html":"(a : <a href=\"../Int.html\">Int</a>) : Int64","location":{"filename":"src/nglib/data_structure/potentialized_disjoint_set.cr","line_number":134,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/potentialized_disjoint_set.cr#L134"},"def":{"name":"size","args":[{"name":"a","external_name":"a","restriction":"Int"}],"return_type":"Int64","visibility":"Public","body":"-@parent_or_size[leader(a)].to_i64"}},{"html_id":"unite(low:Int,high:Int,diff:Abel):Int64-instance-method","name":"unite","doc":"w[high] - w[low] = diff となるように、\n頂点 low と頂点 high を接続します。\n\n（w[low] + diff = w[high] と捉えても良いです。）\n\n接続後のリーダーを返します。\n\ndiff は符号付きであることに注意してください。\nまた、low と high がすでに接続されている場合の動作は未定義です。\n\n```\nn = int\nut = PotentializedDisjointSet(Abel).new(n)\nut.unite(low: a, high: b, diff: w) # => leader(a) or leader(b)\n```","summary":"<p>w[high] - w[low] = diff となるように、 頂点 low と頂点 high を接続します。</p>","abstract":false,"args":[{"name":"low","external_name":"low","restriction":"Int"},{"name":"high","external_name":"high","restriction":"Int"},{"name":"diff","external_name":"diff","restriction":"Abel"}],"args_string":"(low : Int, high : Int, diff : Abel) : Int64","args_html":"(low : <a href=\"../Int.html\">Int</a>, high : <a href=\"../Int.html\">Int</a>, diff : Abel) : Int64","location":{"filename":"src/nglib/data_structure/potentialized_disjoint_set.cr","line_number":51,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/potentialized_disjoint_set.cr#L51"},"def":{"name":"unite","args":[{"name":"low","external_name":"low","restriction":"Int"},{"name":"high","external_name":"high","restriction":"Int"},{"name":"diff","external_name":"diff","restriction":"Abel"}],"return_type":"Int64","visibility":"Public","body":"diff = diff + ((weight(low)) - (weight(high)))\nx = leader(low)\ny = leader(high)\nif x == y\n  return x.to_i64\nend\nif (-@parent_or_size[x]) < (-@parent_or_size[y])\n  x, y = y, x\n  diff = -diff\nend\n__temp_58 = x\n@parent_or_size[__temp_58] = @parent_or_size[__temp_58] + @parent_or_size[y]\n@parent_or_size[y] = x.to_i32\n@potentials[y] = diff\nx.to_i64\n"}}]},{"html_id":"nglib/NgLib/PrioritySum","path":"NgLib/PrioritySum.html","kind":"class","full_name":"NgLib::PrioritySum(T)","name":"PrioritySum","abstract":false,"superclass":{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"nglib/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/nglib/data_structure/priority_sum.cr","line_number":7,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/priority_sum.cr#L7"}],"repository_name":"nglib","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"nglib/NgLib","kind":"module","full_name":"NgLib","name":"NgLib"},"doc":"昇順（降順） $k$ 個の総和を効率良く求めるためのデータ構造です。\n\n値の追加、削除、$k$ の変更ができます。","summary":"<p>昇順（降順） $k$ 個の総和を効率良く求めるためのデータ構造です。</p>","class_methods":[{"html_id":"max(k:Int,initial:T=T.zero)-class-method","name":"max","doc":"上位 $k$ 要素の総和を求めるためのデータ構造を構築します。","summary":"<p>上位 $k$ 要素の総和を求めるためのデータ構造を構築します。</p>","abstract":false,"args":[{"name":"k","external_name":"k","restriction":"Int"},{"name":"initial","default_value":"T.zero","external_name":"initial","restriction":"T"}],"args_string":"(k : Int, initial : T = T.zero)","args_html":"(k : <a href=\"../Int.html\">Int</a>, initial : T = <span class=\"t\">T</span>.zero)","location":{"filename":"src/nglib/data_structure/priority_sum.cr","line_number":22,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/priority_sum.cr#L22"},"def":{"name":"max","args":[{"name":"k","external_name":"k","restriction":"Int"},{"name":"initial","default_value":"T.zero","external_name":"initial","restriction":"T"}],"visibility":"Public","body":"self.new(:max, k, initial)"}},{"html_id":"min(k:Int,initial:T=T.zero)-class-method","name":"min","doc":"下位 $k$ 要素の総和を求めるためのデータ構造を構築します。","summary":"<p>下位 $k$ 要素の総和を求めるためのデータ構造を構築します。</p>","abstract":false,"args":[{"name":"k","external_name":"k","restriction":"Int"},{"name":"initial","default_value":"T.zero","external_name":"initial","restriction":"T"}],"args_string":"(k : Int, initial : T = T.zero)","args_html":"(k : <a href=\"../Int.html\">Int</a>, initial : T = <span class=\"t\">T</span>.zero)","location":{"filename":"src/nglib/data_structure/priority_sum.cr","line_number":17,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/priority_sum.cr#L17"},"def":{"name":"min","args":[{"name":"k","external_name":"k","restriction":"Int"},{"name":"initial","default_value":"T.zero","external_name":"initial","restriction":"T"}],"visibility":"Public","body":"self.new(:min, k, initial)"}}],"constructors":[{"html_id":"new(tag:Symbol,k:Int,initial:T=T.zero)-class-method","name":"new","abstract":false,"args":[{"name":"tag","external_name":"tag","restriction":"Symbol"},{"name":"k","external_name":"k","restriction":"Int"},{"name":"initial","default_value":"T.zero","external_name":"initial","restriction":"T"}],"args_string":"(tag : Symbol, k : Int, initial : T = T.zero)","args_html":"(tag : Symbol, k : <a href=\"../Int.html\">Int</a>, initial : T = <span class=\"t\">T</span>.zero)","location":{"filename":"src/nglib/data_structure/priority_sum.cr","line_number":26,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/priority_sum.cr#L26"},"def":{"name":"new","args":[{"name":"tag","external_name":"tag","restriction":"Symbol"},{"name":"k","external_name":"k","restriction":"Int"},{"name":"initial","default_value":"T.zero","external_name":"initial","restriction":"T"}],"visibility":"Public","body":"_ = PrioritySum(T).allocate\n_.initialize(tag, k, initial)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"<<(x:T)-instance-method","name":"<<","doc":"Alias for `#add`","summary":"<p>Alias for <code><a href=\"../NgLib/PrioritySum.html#add%28x%3AT%29-instance-method\">#add</a></code></p>","abstract":false,"args":[{"name":"x","external_name":"x","restriction":"T"}],"args_string":"(x : T)","args_html":"(x : T)","location":{"filename":"src/nglib/data_structure/priority_sum.cr","line_number":46,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/priority_sum.cr#L46"},"def":{"name":"<<","args":[{"name":"x","external_name":"x","restriction":"T"}],"visibility":"Public","body":"add(x)"}},{"html_id":"add(x:T)-instance-method","name":"add","doc":"要素 $x$ をデータ構造に追加します。\n\n計算量は $O(\\log{n})$ です。","summary":"<p>要素 $x$ をデータ構造に追加します。</p>","abstract":false,"args":[{"name":"x","external_name":"x","restriction":"T"}],"args_string":"(x : T)","args_html":"(x : T)","location":{"filename":"src/nglib/data_structure/priority_sum.cr","line_number":35,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/priority_sum.cr#L35"},"def":{"name":"add","args":[{"name":"x","external_name":"x","restriction":"T"}],"visibility":"Public","body":"if size < @k\n  @sum = @sum + x\nelse\n  kth = @mset.at(kth_index(@k - 1))\n  if cmp(x, kth)\n    @sum = (@sum - kth) + x\n  end\nend\n@mset << x\n"}},{"html_id":"delete(x:T)-instance-method","name":"delete","doc":"要素 $x$ をデータ構造から削除します。\n\n計算量は $O(\\log{n})$ です。","summary":"<p>要素 $x$ をデータ構造から削除します。</p>","abstract":false,"args":[{"name":"x","external_name":"x","restriction":"T"}],"args_string":"(x : T)","args_html":"(x : T)","location":{"filename":"src/nglib/data_structure/priority_sum.cr","line_number":53,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/priority_sum.cr#L53"},"def":{"name":"delete","args":[{"name":"x","external_name":"x","restriction":"T"}],"visibility":"Public","body":"if size <= @k\n  @sum = @sum - x\n  @mset.delete(x)\nelse\n  kth = @mset.at(kth_index(@k))\n  if cmp(x, kth)\n    @sum = @sum - x\n  end\n  @mset.delete(x)\n  kth2 = @mset.at(kth_index(@k - 1))\n  if cmp(x, kth)\n    @sum = @sum + kth2\n  end\nend"}},{"html_id":"empty?(*args,**options)-instance-method","name":"empty?","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options)","args_html":"(*args, **options)","location":{"filename":"src/nglib/data_structure/priority_sum.cr","line_number":14,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/priority_sum.cr#L14"},"def":{"name":"empty?","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"visibility":"Public","body":"@mset.empty?(*args, **options)"}},{"html_id":"empty?(*args,**options,&)-instance-method","name":"empty?","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","args_html":"(*args, **options, &)","location":{"filename":"src/nglib/data_structure/priority_sum.cr","line_number":14,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/priority_sum.cr#L14"},"def":{"name":"empty?","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arity":1,"visibility":"Public","body":"@mset.empty?(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}},{"html_id":"k:Int32-instance-method","name":"k","abstract":false,"location":{"filename":"src/nglib/data_structure/priority_sum.cr","line_number":8,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/priority_sum.cr#L8"},"def":{"name":"k","return_type":"Int32","visibility":"Public","body":"@k"}},{"html_id":"k=(k:Int)-instance-method","name":"k=","doc":"$k$ の値を変更します。\n\n計算量は $\\Delta k \\log{\\Delta k}$","summary":"<p>$k$ の値を変更します。</p>","abstract":false,"args":[{"name":"k","external_name":"k","restriction":"Int"}],"args_string":"(k : Int)","args_html":"(k : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/data_structure/priority_sum.cr","line_number":70,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/priority_sum.cr#L70"},"def":{"name":"k=","args":[{"name":"k","external_name":"k","restriction":"Int"}],"visibility":"Public","body":"if @k < k\n  (k - @k).times do |i|\n    if (k + i) >= size\n      break\n    end\n    @sum = @sum + (@mset.at(kth_index(k + i)))\n  end\nelse\n  if @k > k\n    (@k - k).times do |i|\n      if ((@k - i) - 1) >= size\n        next\n      end\n      if (@k - i) < 1\n        break\n      end\n      @sum = @sum - (@mset.at(kth_index((@k - i) - 1)))\n    end\n  end\nend\n@k = k.to_i32\n"}},{"html_id":"size(*args,**options)-instance-method","name":"size","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options)","args_html":"(*args, **options)","location":{"filename":"src/nglib/data_structure/priority_sum.cr","line_number":13,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/priority_sum.cr#L13"},"def":{"name":"size","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"visibility":"Public","body":"@mset.size(*args, **options)"}},{"html_id":"size(*args,**options,&)-instance-method","name":"size","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","args_html":"(*args, **options, &)","location":{"filename":"src/nglib/data_structure/priority_sum.cr","line_number":13,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/priority_sum.cr#L13"},"def":{"name":"size","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arity":1,"visibility":"Public","body":"@mset.size(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}},{"html_id":"sum:T-instance-method","name":"sum","abstract":false,"location":{"filename":"src/nglib/data_structure/priority_sum.cr","line_number":9,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/priority_sum.cr#L9"},"def":{"name":"sum","return_type":"T","visibility":"Public","body":"@sum"}}]},{"html_id":"nglib/NgLib/RollingHash","path":"NgLib/RollingHash.html","kind":"class","full_name":"NgLib::RollingHash","name":"RollingHash","abstract":false,"superclass":{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"nglib/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/nglib/string/rolling_hash.cr","line_number":3,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/string/rolling_hash.cr#L3"}],"repository_name":"nglib","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"MOD","name":"MOD","value":"(1_u64 << 61) - 1"}],"namespace":{"html_id":"nglib/NgLib","kind":"module","full_name":"NgLib","name":"NgLib"},"doc":"文字列 $S$ に対して、上手なハッシュを作ることで、比較やLCPを高速に求めます。","summary":"<p>文字列 $S$ に対して、上手なハッシュを作ることで、比較やLCPを高速に求めます。</p>","class_methods":[{"html_id":"create_base-class-method","name":"create_base","doc":"ランダムに基底を生成します。\n\n```\nbase = RollingHash.create_base\nbase # => 1729\n```","summary":"<p>ランダムに基底を生成します。</p>","abstract":false,"location":{"filename":"src/nglib/string/rolling_hash.cr","line_number":63,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/string/rolling_hash.cr#L63"},"def":{"name":"create_base","visibility":"Public","body":"rand(628_u64..(MOD - 2))"}},{"html_id":"lcp(rh1:self,rh2:self,i:Int=0,j:Int=0):Int32-class-method","name":"lcp","doc":"`s[i...]` と `t[j...]` の最長共通接頭辞の長さを返します。\n\n$i, j$ はデフォルトで $0$ を渡しています。\n\n```\nrh1 = RollingHash.new(\"missisippi\", base: 628)\nrh2 = RollingHash.new(\"thisisapen\", base: 628)\nRollingHash.lcp(rh1, rh2)       # => 0\nRollingHash.lcp(rh1, rh2, 4, 2) # => 3\n```","summary":"<p><code>s[i...]</code> と <code>t[j...]</code> の最長共通接頭辞の長さを返します。</p>","abstract":false,"args":[{"name":"rh1","external_name":"rh1","restriction":"self"},{"name":"rh2","external_name":"rh2","restriction":"self"},{"name":"i","default_value":"0","external_name":"i","restriction":"Int"},{"name":"j","default_value":"0","external_name":"j","restriction":"Int"}],"args_string":"(rh1 : self, rh2 : self, i : Int = 0, j : Int = 0) : Int32","args_html":"(rh1 : <span class=\"k\">self</span>, rh2 : <span class=\"k\">self</span>, i : <a href=\"../Int.html\">Int</a> = <span class=\"n\">0</span>, j : <a href=\"../Int.html\">Int</a> = <span class=\"n\">0</span>) : Int32","location":{"filename":"src/nglib/string/rolling_hash.cr","line_number":190,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/string/rolling_hash.cr#L190"},"def":{"name":"lcp","args":[{"name":"rh1","external_name":"rh1","restriction":"self"},{"name":"rh2","external_name":"rh2","restriction":"self"},{"name":"i","default_value":"0","external_name":"i","restriction":"Int"},{"name":"j","default_value":"0","external_name":"j","restriction":"Int"}],"return_type":"Int32","visibility":"Public","body":"rh1.lcp(i, j, rh2)"}}],"constructors":[{"html_id":"new(a:Array(Int),base:UInt64|Nil=nil)-class-method","name":"new","doc":"配列 $a$ に対する、基数が `base` のロリハを構築します。\n\n`base` は指定しない場合、ランダムに生成されます。\n\n```\nrh = RollingHash.new([1, 2, 5, 1, 2])\n```","summary":"<p>配列 $a$ に対する、基数が <code>base</code> のロリハを構築します。</p>","abstract":false,"args":[{"name":"a","external_name":"a","restriction":"Array(Int)"},{"name":"base","default_value":"nil","external_name":"base","restriction":"UInt64 | ::Nil"}],"args_string":"(a : Array(Int), base : UInt64 | Nil = nil)","args_html":"(a : Array(<a href=\"../Int.html\">Int</a>), base : UInt64 | Nil = <span class=\"n\">nil</span>)","location":{"filename":"src/nglib/string/rolling_hash.cr","line_number":19,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/string/rolling_hash.cr#L19"},"def":{"name":"new","args":[{"name":"a","external_name":"a","restriction":"Array(Int)"},{"name":"base","default_value":"nil","external_name":"base","restriction":"UInt64 | ::Nil"}],"visibility":"Public","body":"_ = allocate\n_.initialize(a, base)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"html_id":"new(s:String,base:UInt64|Nil=nil)-class-method","name":"new","doc":"文字列 $s$ に対する、基数が `base` のロリハを構築します。\n\n`base` は指定しない場合、ランダムに生成されます。\n\n```\nrh = RollingHash.new(\"missisippi\")\n```","summary":"<p>文字列 $s$ に対する、基数が <code>base</code> のロリハを構築します。</p>","abstract":false,"args":[{"name":"s","external_name":"s","restriction":"String"},{"name":"base","default_value":"nil","external_name":"base","restriction":"UInt64 | ::Nil"}],"args_string":"(s : String, base : UInt64 | Nil = nil)","args_html":"(s : String, base : UInt64 | Nil = <span class=\"n\">nil</span>)","location":{"filename":"src/nglib/string/rolling_hash.cr","line_number":30,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/string/rolling_hash.cr#L30"},"def":{"name":"new","args":[{"name":"s","external_name":"s","restriction":"String"},{"name":"base","default_value":"nil","external_name":"base","restriction":"UInt64 | ::Nil"}],"visibility":"Public","body":"_ = allocate\n_.initialize(s, base)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"html_id":"new(size:Int32,a:Enumerable,base:UInt64|Nil=nil)-class-method","name":"new","doc":"Enumerable な列 $a$ に対する、基数が base のロリハを構築します。\n\n`base` は指定しない場合、ランダムに生成されます。\n\n```\nrh = RollingHash.new(5, [1, 2, 5, 1, 2])\n```","summary":"<p>Enumerable な列 $a$ に対する、基数が base のロリハを構築します。</p>","abstract":false,"args":[{"name":"size","external_name":"size","restriction":"::Int32"},{"name":"a","external_name":"a","restriction":"Enumerable"},{"name":"base","default_value":"nil","external_name":"base","restriction":"UInt64 | ::Nil"}],"args_string":"(size : Int32, a : Enumerable, base : UInt64 | Nil = nil)","args_html":"(size : Int32, a : Enumerable, base : UInt64 | Nil = <span class=\"n\">nil</span>)","location":{"filename":"src/nglib/string/rolling_hash.cr","line_number":41,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/string/rolling_hash.cr#L41"},"def":{"name":"new","args":[{"name":"size","external_name":"size","restriction":"::Int32"},{"name":"a","external_name":"a","restriction":"Enumerable"},{"name":"base","default_value":"nil","external_name":"base","restriction":"UInt64 | ::Nil"}],"visibility":"Public","body":"_ = allocate\n_.initialize(size, a, base)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"[](range:Range(Int|Nil,Int|Nil)):UInt64-instance-method","name":"[]","doc":"`range` で指定した範囲 `s[range]` のハッシュを返します。\n\n```\nrh = RollingHash.new(\"missisippi\")\nrh[4..5] # => 339225237399054811\nrh[5..6] # => 339225237399054811\n```","summary":"<p><code>range</code> で指定した範囲 <code>s[range]</code> のハッシュを返します。</p>","abstract":false,"args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"args_string":"(range : Range(Int | Nil, Int | Nil)) : UInt64","args_html":"(range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil)) : UInt64","location":{"filename":"src/nglib/string/rolling_hash.cr","line_number":139,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/string/rolling_hash.cr#L139"},"def":{"name":"[]","args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"return_type":"UInt64","visibility":"Public","body":"slice(range)"}},{"html_id":"concat(h1:UInt64,h2:UInt64,h2_len:Int):UInt64-instance-method","name":"concat","doc":"ハッシュ値 $h_1$ とハッシュ値 $h_2$ を結合したときのハッシュ値を返します。\n\nハッシュ値 $h_2$ の元々の長さを渡す必要があります。\n\n```\nrh = RollingHash.new(\"missisippi\")\nh1 = rh[1..2] # \"is\"\nh2 = rh[5..6] # \"si\"\nh = rh.concat(h1, h2, h2_len: 2)\nh == rh.[1..4] # => true\n```","summary":"<p>ハッシュ値 $h_1$ とハッシュ値 $h_2$ を結合したときのハッシュ値を返します。</p>","abstract":false,"args":[{"name":"h1","external_name":"h1","restriction":"UInt64"},{"name":"h2","external_name":"h2","restriction":"UInt64"},{"name":"h2_len","external_name":"h2_len","restriction":"Int"}],"args_string":"(h1 : UInt64, h2 : UInt64, h2_len : Int) : UInt64","args_html":"(h1 : UInt64, h2 : UInt64, h2_len : <a href=\"../Int.html\">Int</a>) : UInt64","location":{"filename":"src/nglib/string/rolling_hash.cr","line_number":154,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/string/rolling_hash.cr#L154"},"def":{"name":"concat","args":[{"name":"h1","external_name":"h1","restriction":"UInt64"},{"name":"h2","external_name":"h2","restriction":"UInt64"},{"name":"h2_len","external_name":"h2_len","restriction":"Int"}],"return_type":"UInt64","visibility":"Public","body":"res = (mul(h1, @power[h2_len])) + h2\nres < MOD ? res : res - MOD\n"}},{"html_id":"hash(s:String)-instance-method","name":"hash","doc":"文字列 $s$ のハッシュを返します。\n\n```\nrh = RollingHash.new(\"missisippi\")\nrh.hash(\"is\")  # => 339225237399054811\nrh.hash(\"abc\") # => 496222201481864933\n```","summary":"<p>文字列 $s$ のハッシュを返します。</p>","abstract":false,"args":[{"name":"s","external_name":"s","restriction":"String"}],"args_string":"(s : String)","args_html":"(s : String)","location":{"filename":"src/nglib/string/rolling_hash.cr","line_number":85,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/string/rolling_hash.cr#L85"},"def":{"name":"hash","args":[{"name":"s","external_name":"s","restriction":"String"}],"visibility":"Public","body":"hash(s.bytes)"}},{"html_id":"hash(s:Enumerable)-instance-method","name":"hash","doc":"列 $s$ のハッシュを返します。\n\n```\nrh = RollingHash.new(\"missisippi\")\nrh.hash(\"is\")  # => 339225237399054811\nrh.hash(\"abc\") # => 496222201481864933\n```","summary":"<p>列 $s$ のハッシュを返します。</p>","abstract":false,"args":[{"name":"s","external_name":"s","restriction":"Enumerable"}],"args_string":"(s : Enumerable)","args_html":"(s : Enumerable)","location":{"filename":"src/nglib/string/rolling_hash.cr","line_number":96,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/string/rolling_hash.cr#L96"},"def":{"name":"hash","args":[{"name":"s","external_name":"s","restriction":"Enumerable"}],"visibility":"Public","body":"s.reduce(0_u64) do |acc, elem|\n  (mul(acc, @base)) + elem.to_u64\nend"}},{"html_id":"hash:UInt64-instance-method","name":"hash","doc":"初期化時に使用した列に対するハッシュを返します。\n\n```\nrh = RollingHash.new(\"missisippi\")\nrh.hash               # => 339225237399054811\nrh.hash(\"missisippi\") # => 339225237399054811\n```","summary":"<p>初期化時に使用した列に対するハッシュを返します。</p>","abstract":false,"location":{"filename":"src/nglib/string/rolling_hash.cr","line_number":74,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/string/rolling_hash.cr#L74"},"def":{"name":"hash","return_type":"UInt64","visibility":"Public","body":"@selfhash"}},{"html_id":"index(t:String,offset:Int=0):Int32|Nil-instance-method","name":"index","doc":"文字列検索を行います。\n\n`s[offset..]` から `t` と一致する初めての添字を返します。\n添字は `s` が基準です。また、`offset` が加算された値が返ります。\n\n存在しない場合は `nil` を返します。\n\n```\nrh = RollingHash.new(\"missisippi\", base: 628)\nrh.index(\"is\")            # => 1\nrh.index(\"is\", offset: 4) # => 4\nrh.index(\"mid\")           # => nil\nrh.index(\"i\")             # => 1\nrh.index(\"pi\")            # => 8\n```","summary":"<p>文字列検索を行います。</p>","abstract":false,"args":[{"name":"t","external_name":"t","restriction":"String"},{"name":"offset","default_value":"0","external_name":"offset","restriction":"Int"}],"args_string":"(t : String, offset : Int = 0) : Int32 | Nil","args_html":"(t : String, offset : <a href=\"../Int.html\">Int</a> = <span class=\"n\">0</span>) : Int32 | Nil","location":{"filename":"src/nglib/string/rolling_hash.cr","line_number":209,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/string/rolling_hash.cr#L209"},"def":{"name":"index","args":[{"name":"t","external_name":"t","restriction":"String"},{"name":"offset","default_value":"0","external_name":"offset","restriction":"Int"}],"return_type":"Int32 | ::Nil","visibility":"Public","body":"index(t.bytes, offset)"}},{"html_id":"index(t:Enumerable,offset:Int=0):Int32|Nil-instance-method","name":"index","doc":"検索を行います。\n\n`s[offset..]` から `t` と一致する初めての添字を返します。\n添字は `s` が基準です。また、`offset` が加算された値が返ります。\n\n存在しない場合は `nil` を返します。\n\n```\nrh = RollingHash.new(\"missisippi\", base: 628)\nrh.index(\"is\")            # => 1\nrh.index(\"is\", offset: 4) # => 4\nrh.index(\"mid\")           # => nil\nrh.index(\"i\")             # => 1\nrh.index(\"pi\")            # => 8\n```","summary":"<p>検索を行います。</p>","abstract":false,"args":[{"name":"t","external_name":"t","restriction":"Enumerable"},{"name":"offset","default_value":"0","external_name":"offset","restriction":"Int"}],"args_string":"(t : Enumerable, offset : Int = 0) : Int32 | Nil","args_html":"(t : Enumerable, offset : <a href=\"../Int.html\">Int</a> = <span class=\"n\">0</span>) : Int32 | Nil","location":{"filename":"src/nglib/string/rolling_hash.cr","line_number":228,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/string/rolling_hash.cr#L228"},"def":{"name":"index","args":[{"name":"t","external_name":"t","restriction":"Enumerable"},{"name":"offset","default_value":"0","external_name":"offset","restriction":"Int"}],"return_type":"Int32 | ::Nil","visibility":"Public","body":"ths = hash(t)\nt_len = t.size\nres = (offset..(@size - t.size)).index do |i|\n  ths == (substr(i, t_len))\nend\nres ? res.not_nil! + offset : nil\n"}},{"html_id":"index!(t:String,offset:Int=0):Int32-instance-method","name":"index!","doc":"文字列検索を行います。\n\n`s[offset..]` から `t` と一致する初めての添字を返します。\n添字は `s` が基準です。また、`offset` が加算された値が返ります。\n\n存在しない場合は例外を投げます。\n\n```\nrh = RollingHash.new(\"missisippi\", base: 628)\nrh.index!(\"is\")            # => 1\nrh.index!(\"is\", offset: 4) # => 4\nrh.index!(\"mid\")           # => Enumerable::NotFoundError\nrh.index!(\"i\")             # => 1\nrh.index!(\"pi\")            # => 8\n```","summary":"<p>文字列検索を行います。</p>","abstract":false,"args":[{"name":"t","external_name":"t","restriction":"String"},{"name":"offset","default_value":"0","external_name":"offset","restriction":"Int"}],"args_string":"(t : String, offset : Int = 0) : Int32","args_html":"(t : String, offset : <a href=\"../Int.html\">Int</a> = <span class=\"n\">0</span>) : Int32","location":{"filename":"src/nglib/string/rolling_hash.cr","line_number":250,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/string/rolling_hash.cr#L250"},"def":{"name":"index!","args":[{"name":"t","external_name":"t","restriction":"String"},{"name":"offset","default_value":"0","external_name":"offset","restriction":"Int"}],"return_type":"Int32","visibility":"Public","body":"index!(t.bytes, offset)"}},{"html_id":"index!(t:Enumerable,offset:Int=0):Int32-instance-method","name":"index!","doc":"検索を行います。\n\n`s[offset..]` から `t` と一致する初めての添字を返します。\n添字は `s` が基準です。また、`offset` が加算された値が返ります。\n\n存在しない場合は例外を投げます。\n\n```\nrh = RollingHash.new(\"missisippi\", base: 628)\nrh.index!(\"is\")            # => 1\nrh.index!(\"is\", offset: 4) # => 4\nrh.index!(\"mid\")           # => Enumerable::NotFoundError\nrh.index!(\"i\")             # => 1\nrh.index!(\"pi\")            # => 8\n```","summary":"<p>検索を行います。</p>","abstract":false,"args":[{"name":"t","external_name":"t","restriction":"Enumerable"},{"name":"offset","default_value":"0","external_name":"offset","restriction":"Int"}],"args_string":"(t : Enumerable, offset : Int = 0) : Int32","args_html":"(t : Enumerable, offset : <a href=\"../Int.html\">Int</a> = <span class=\"n\">0</span>) : Int32","location":{"filename":"src/nglib/string/rolling_hash.cr","line_number":269,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/string/rolling_hash.cr#L269"},"def":{"name":"index!","args":[{"name":"t","external_name":"t","restriction":"Enumerable"},{"name":"offset","default_value":"0","external_name":"offset","restriction":"Int"}],"return_type":"Int32","visibility":"Public","body":"ths = 0_u64\nt.each do |elem|\n  ths = (mul(ths, @base)) + elem.to_u64\nend\nt_len = t.size\n(offset..(@size - t.size)).index! do |i|\n  ths == (substr(i, t_len))\nend + offset\n"}},{"html_id":"lcp(i:Int,j:Int,other=self):Int32-instance-method","name":"lcp","doc":"`s[i...]` と `other[j...]` の最長共通接頭辞の長さを返します。\n\n`other` はデフォルトで自分自身を渡しています。\n自分自身以外を渡す場合は $(mod, base)$ が一致している必要があります。\n\n```\nrh1 = RollingHash.new(\"missisippi\")\nrh1 = rh1.lcp(3, 5) # => 2\nrh1 = rh1.lcp(0, 1) # => 0\n```","summary":"<p><code>s[i...]</code> と <code>other[j...]</code> の最長共通接頭辞の長さを返します。</p>","abstract":false,"args":[{"name":"i","external_name":"i","restriction":"Int"},{"name":"j","external_name":"j","restriction":"Int"},{"name":"other","default_value":"self","external_name":"other","restriction":""}],"args_string":"(i : Int, j : Int, other = self) : Int32","args_html":"(i : <a href=\"../Int.html\">Int</a>, j : <a href=\"../Int.html\">Int</a>, other = <span class=\"k\">self</span>) : Int32","location":{"filename":"src/nglib/string/rolling_hash.cr","line_number":169,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/string/rolling_hash.cr#L169"},"def":{"name":"lcp","args":[{"name":"i","external_name":"i","restriction":"Int"},{"name":"j","external_name":"j","restriction":"Int"},{"name":"other","default_value":"self","external_name":"other","restriction":""}],"return_type":"Int32","visibility":"Public","body":"length = Math.min(@hash.size - i, @hash.size - j)\nok = length - (1..length).bsearch do |len|\n  l = length - len\n  self.substr(start: i, length: l) == other.substr(start: j, length: l)\nend.not_nil!\nok.to_i32\n"}},{"html_id":"size:Int32-instance-method","name":"size","abstract":false,"location":{"filename":"src/nglib/string/rolling_hash.cr","line_number":6,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/string/rolling_hash.cr#L6"},"def":{"name":"size","return_type":"Int32","visibility":"Public","body":"@size"}},{"html_id":"slice(range:Range(Int|Nil,Int|Nil)):UInt64-instance-method","name":"slice","doc":"`range` で指定した範囲 `s[range]` のハッシュを返します。\n\n```\nrh = RollingHash.new(\"missisippi\")\nrh.slice(4..5) # => 339225237399054811\nrh.slice(5..6) # => 339225237399054811\n```","summary":"<p><code>range</code> で指定した範囲 <code>s[range]</code> のハッシュを返します。</p>","abstract":false,"args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"args_string":"(range : Range(Int | Nil, Int | Nil)) : UInt64","args_html":"(range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil)) : UInt64","location":{"filename":"src/nglib/string/rolling_hash.cr","line_number":119,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/string/rolling_hash.cr#L119"},"def":{"name":"slice","args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"return_type":"UInt64","visibility":"Public","body":"left = (range.begin || 0)\nright = if range.end.nil?\n  @size\nelse\n  range.end.not_nil! + (range.exclusive? ? 0 : 1)\nend\nlength = right - left\nsubstr(start: left, length: length)\n"}},{"html_id":"substr(start:Int,length:Int):UInt64-instance-method","name":"substr","doc":"`s[start...start + length]` のハッシュを返します。\n\n```\nrh = RollingHash.new(\"missisippi\")\nrh.substr(4, length: 2) # => 339225237399054811\nrh.substr(5, length: 2) # => 339225237399054811\n```","summary":"<p><code>s[start...start + length]</code> のハッシュを返します。</p>","abstract":false,"args":[{"name":"start","external_name":"start","restriction":"Int"},{"name":"length","external_name":"length","restriction":"Int"}],"args_string":"(start : Int, length : Int) : UInt64","args_html":"(start : <a href=\"../Int.html\">Int</a>, length : <a href=\"../Int.html\">Int</a>) : UInt64","location":{"filename":"src/nglib/string/rolling_hash.cr","line_number":107,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/string/rolling_hash.cr#L107"},"def":{"name":"substr","args":[{"name":"start","external_name":"start","restriction":"Int"},{"name":"length","external_name":"length","restriction":"Int"}],"return_type":"UInt64","visibility":"Public","body":"res = (@hash[start + length] + MOD) - (mul(@hash[start], @power[length]))\nres < MOD ? res : res - MOD\n"}}]},{"html_id":"nglib/NgLib/SCC","path":"NgLib/SCC.html","kind":"class","full_name":"NgLib::SCC","name":"SCC","abstract":false,"superclass":{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"nglib/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/nglib/graph/scc.cr","line_number":2,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/scc.cr#L2"}],"repository_name":"nglib","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"nglib/NgLib","kind":"module","full_name":"NgLib","name":"NgLib"},"constructors":[{"html_id":"new(fwd:Graph)-class-method","name":"new","abstract":false,"args":[{"name":"fwd","external_name":"fwd","restriction":"Graph"}],"args_string":"(fwd : Graph)","args_html":"(fwd : <a href=\"../NgLib/SCC/Graph.html\">Graph</a>)","location":{"filename":"src/nglib/graph/scc.cr","line_number":15,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/scc.cr#L15"},"def":{"name":"new","args":[{"name":"fwd","external_name":"fwd","restriction":"Graph"}],"visibility":"Public","body":"_ = allocate\n_.initialize(fwd)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"cycles-instance-method","name":"cycles","doc":"各グループ `g` $\\in$ `#groups` に対して、\nサイクルに現れる頂点をDFSの訪問順に並べたものを返します。\n\nNOTE: 自己ループがある場合、サイズ 1 のサイクルが出現することに注意してください。","summary":"<p>各グループ <code>g</code> $\\in$ <code><a href=\"../NgLib/SCC.html#groups%3AArray%28Array%28Int64%29%29-instance-method\">#groups</a></code> に対して、 サイクルに現れる頂点をDFSの訪問順に並べたものを返します。</p>","abstract":false,"location":{"filename":"src/nglib/graph/scc.cr","line_number":61,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/scc.cr#L61"},"def":{"name":"cycles","visibility":"Public","body":"groups.each do |group|\n  root = group[0]\n  if group.size == 1\n    if @fwd[root].includes?(root)\n      cycles << [root.to_i64]\n    end\n    next\n  end\nend"}},{"html_id":"graph:Graph-instance-method","name":"graph","abstract":false,"location":{"filename":"src/nglib/graph/scc.cr","line_number":6,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/scc.cr#L6"},"def":{"name":"graph","return_type":"Graph","visibility":"Public","body":"@graph"}},{"html_id":"groups:Array(Array(Int64))-instance-method","name":"groups","abstract":false,"location":{"filename":"src/nglib/graph/scc.cr","line_number":7,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/scc.cr#L7"},"def":{"name":"groups","return_type":"Array(Array(Int64))","visibility":"Public","body":"@groups"}},{"html_id":"leader:Array(Int64)-instance-method","name":"leader","abstract":false,"location":{"filename":"src/nglib/graph/scc.cr","line_number":5,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/scc.cr#L5"},"def":{"name":"leader","return_type":"Array(Int64)","visibility":"Public","body":"@leader"}},{"html_id":"same(u:Int,v:Int)-instance-method","name":"same","abstract":false,"args":[{"name":"u","external_name":"u","restriction":"Int"},{"name":"v","external_name":"v","restriction":"Int"}],"args_string":"(u : Int, v : Int)","args_html":"(u : <a href=\"../Int.html\">Int</a>, v : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/graph/scc.cr","line_number":45,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/scc.cr#L45"},"def":{"name":"same","args":[{"name":"u","external_name":"u","restriction":"Int"},{"name":"v","external_name":"v","restriction":"Int"}],"visibility":"Public","body":"leader[u] == leader[v]"}},{"html_id":"size(v:Int)-instance-method","name":"size","abstract":false,"args":[{"name":"v","external_name":"v","restriction":"Int"}],"args_string":"(v : Int)","args_html":"(v : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/graph/scc.cr","line_number":53,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/scc.cr#L53"},"def":{"name":"size","args":[{"name":"v","external_name":"v","restriction":"Int"}],"visibility":"Public","body":"@groups[leader[v]].size"}},{"html_id":"size-instance-method","name":"size","abstract":false,"location":{"filename":"src/nglib/graph/scc.cr","line_number":49,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/scc.cr#L49"},"def":{"name":"size","visibility":"Public","body":"@groups.size"}}],"types":[{"html_id":"nglib/NgLib/SCC/Graph","path":"NgLib/SCC/Graph.html","kind":"alias","full_name":"NgLib::SCC::Graph","name":"Graph","abstract":false,"locations":[{"filename":"src/nglib/graph/scc.cr","line_number":3,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/scc.cr#L3"}],"repository_name":"nglib","program":false,"enum":false,"alias":true,"aliased":"Array(Array(Int64))","aliased_html":"Array(Array(Int64))","const":false,"namespace":{"html_id":"nglib/NgLib/SCC","kind":"class","full_name":"NgLib::SCC","name":"SCC"}}]},{"html_id":"nglib/NgLib/SlideMinmax","path":"NgLib/SlideMinmax.html","kind":"class","full_name":"NgLib::SlideMinmax(T)","name":"SlideMinmax","abstract":false,"superclass":{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"nglib/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/nglib/data_structure/slide_minmax.cr","line_number":16,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/slide_minmax.cr#L16"}],"repository_name":"nglib","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"nglib/NgLib","kind":"module","full_name":"NgLib","name":"NgLib"},"doc":"データ列 $a$ に対して、$\\min(a_i, a_{i + 1}, \\dots, a_{i + \\mathrm{length} - 1})$ を、\n前計算 $O(N)$ クエリが $O(1)$ 求めるためのデータ構造です。\n\nセグメント木やSparseTableと異なり、区間長が固定の範囲でしかクエリに答えられませんが高速です。\n\n`query(i)` で $[i, i + \\mathrm{length})$ が配列の範囲を超えたとき、$[i, \\mathrm{a.size})$ だと思って計算します。\n\nもし、`query(i)` で $[i - \\mathrm{length}, i)$ が求まってほしい場合は、`a = ([eins] * length) + a` としておけば良いです。\n範囲外の場合は $[0, i)$ だと思って計算されます。\n\nなお、$[0, 0)$ の場合は単位元が返ります。\n\nもし、query(i) で $[i - \\mathrm{length}, i]$ が求まってほしい場合は、`a = ([eins] * (length - 1)) + a` としておけば良いです。\n範囲外の場合は $[0, i]$ だと思って計算されます。","summary":"<p>データ列 $a$ に対して、$\\min(a_i, a_{i + 1}, \\dots, a_{i + \\mathrm{length} - 1})$ を、 前計算 $O(N)$ クエリが $O(1)$ 求めるためのデータ構造です。</p>","class_methods":[{"html_id":"max(a:Array(T),length:Int)-class-method","name":"max","doc":"データ列 $a$ に対して、$\\max(a_i, a_{i + 1}, \\dots, a_{i + \\mathrm{length} - 1})$ を求めるためのデータ構造を構築します。\n\n```\nrmq = SlideMinmax(Int32).max([2, 7, 3, 4, 6], 3)\n```","summary":"<p>データ列 $a$ に対して、$\\max(a_i, a_{i + 1}, \\dots, a_{i + \\mathrm{length} - 1})$ を求めるためのデータ構造を構築します。</p>","abstract":false,"args":[{"name":"a","external_name":"a","restriction":"Array(T)"},{"name":"length","external_name":"length","restriction":"Int"}],"args_string":"(a : Array(T), length : Int)","args_html":"(a : Array(T), length : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/data_structure/slide_minmax.cr","line_number":34,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/slide_minmax.cr#L34"},"def":{"name":"max","args":[{"name":"a","external_name":"a","restriction":"Array(T)"},{"name":"length","external_name":"length","restriction":"Int"}],"visibility":"Public","body":"new(a, length, T::MIN) do |lhs, rhs|\n  lhs >= rhs\nend"}},{"html_id":"min(a:Array(T),length:Int)-class-method","name":"min","doc":"データ列 $a$ に対して、$\\min(a_i, a_{i + 1}, \\dots, a_{i + \\mathrm{length} - 1})$ を求めるためのデータ構造を構築します。\n\n```\nrmq = SlideMinmax(Int32).min([2, 7, 3, 4, 6], 3)\n```","summary":"<p>データ列 $a$ に対して、$\\min(a_i, a_{i + 1}, \\dots, a_{i + \\mathrm{length} - 1})$ を求めるためのデータ構造を構築します。</p>","abstract":false,"args":[{"name":"a","external_name":"a","restriction":"Array(T)"},{"name":"length","external_name":"length","restriction":"Int"}],"args_string":"(a : Array(T), length : Int)","args_html":"(a : Array(T), length : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/data_structure/slide_minmax.cr","line_number":25,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/slide_minmax.cr#L25"},"def":{"name":"min","args":[{"name":"a","external_name":"a","restriction":"Array(T)"},{"name":"length","external_name":"length","restriction":"Int"}],"visibility":"Public","body":"new(a, length, T::MAX) do |lhs, rhs|\n  lhs <= rhs\nend"}}],"constructors":[{"html_id":"new(a:Array(T),length:Int,eins:T,&cmp:T,T->Bool)-class-method","name":"new","doc":"データ列 $a$ に対して、$cmp(a_i, a_{i + 1}, \\dots, a_{i + \\mathrm{length} - 1})$ を求めるためのデータ構造を構築します。\n\n`eins` には `@cmp` に対する単位元を渡してください。\n\nこの API は非推奨です。`self.min` または `self.max` を使用してください。\n\n```\nrmq = SlideMinmax(Int32).new([2, 7, 3, 4, 6], 3) { |a, b| a <= b } # => min query\n```","summary":"<p>データ列 $a$ に対して、$cmp(a_i, a_{i + 1}, \\dots, a_{i + \\mathrm{length} - 1})$ を求めるためのデータ構造を構築します。</p>","abstract":false,"args":[{"name":"a","external_name":"a","restriction":"Array(T)"},{"name":"length","external_name":"length","restriction":"Int"},{"name":"eins","external_name":"eins","restriction":"T"}],"args_string":"(a : Array(T), length : Int, eins : T, &cmp : T, T -> Bool)","args_html":"(a : Array(T), length : <a href=\"../Int.html\">Int</a>, eins : T, &cmp : T, T -> Bool)","location":{"filename":"src/nglib/data_structure/slide_minmax.cr","line_number":47,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/slide_minmax.cr#L47"},"def":{"name":"new","args":[{"name":"a","external_name":"a","restriction":"Array(T)"},{"name":"length","external_name":"length","restriction":"Int"},{"name":"eins","external_name":"eins","restriction":"T"}],"yields":2,"block_arity":2,"block_arg":{"name":"cmp","external_name":"cmp","restriction":"(T, T -> Bool)"},"visibility":"Public","body":"_ = SlideMinmax(T).allocate\n_.initialize(a, length, eins, &cmp) do |_arg0, _arg1|\n  yield _arg0, _arg1\nend\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"query(i:Int):T-instance-method","name":"query","doc":"$[i, i + \\mathrm{length})$ の範囲の総積 $cmp(a_i, a_{i + 1}, \\dots, a_{i + \\mathrm{length} - 1})$ を求めます。\n\n$i + \\mathrm{length}$ が $a$ のサイズを超える場合は、$[i, \\mathrm{a.size})$ で求めます。\n\n```\nrmq = SlideMinmax(Int32).min([2, 7, 3, 4, 6], 3)\nrmq.query(0) # => 2\nrmq.query(1) # => 3\nrmq.query(2) # => 3\nrmq.query(3) # => 4\nrmq.query(4) # => 6\n```","summary":"<p>$[i, i + \\mathrm{length})$ の範囲の総積 $cmp(a_i, a_{i + 1}, \\dots, a_{i + \\mathrm{length} - 1})$ を求めます。</p>","abstract":false,"args":[{"name":"i","external_name":"i","restriction":"Int"}],"args_string":"(i : Int) : T","args_html":"(i : <a href=\"../Int.html\">Int</a>) : T","location":{"filename":"src/nglib/data_structure/slide_minmax.cr","line_number":79,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/slide_minmax.cr#L79"},"def":{"name":"query","args":[{"name":"i","external_name":"i","restriction":"Int"}],"return_type":"T","visibility":"Public","body":"@data[i]"}},{"html_id":"query?(i:Int):T|Nil-instance-method","name":"query?","doc":"$[i, i + \\mathrm{length})$ の範囲の総積 $cmp(a_i, a_{i + 1}, \\dots, a_{i + \\mathrm{length} - 1})$ を求めます。\n\n$i + \\mathrm{length}$ が $a$ のサイズを超える場合は、$[i, \\mathrm{a.size})$ で求めます。\n\n配列外参照の場合は `nil` を返します。\n\n```\nrmq = SlideMinmax(Int32).min([2, 7, 3, 4, 6], 3)\nrmq.query?(0)   # => 2\nrmq.query?(1)   # => 3\nrmq.query?(2)   # => 3\nrmq.query?(3)   # => 4\nrmq.query?(4)   # => 6\nrmq.query?(100) # => nil\n```","summary":"<p>$[i, i + \\mathrm{length})$ の範囲の総積 $cmp(a_i, a_{i + 1}, \\dots, a_{i + \\mathrm{length} - 1})$ を求めます。</p>","abstract":false,"args":[{"name":"i","external_name":"i","restriction":"Int"}],"args_string":"(i : Int) : T | Nil","args_html":"(i : <a href=\"../Int.html\">Int</a>) : T | Nil","location":{"filename":"src/nglib/data_structure/slide_minmax.cr","line_number":98,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/slide_minmax.cr#L98"},"def":{"name":"query?","args":[{"name":"i","external_name":"i","restriction":"Int"}],"return_type":"T | ::Nil","visibility":"Public","body":"@data[i]?"}}]},{"html_id":"nglib/NgLib/SparseTable","path":"NgLib/SparseTable.html","kind":"class","full_name":"NgLib::SparseTable(T)","name":"SparseTable","abstract":false,"superclass":{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"nglib/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/nglib/data_structure/sparse_table.cr","line_number":7,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/sparse_table.cr#L7"}],"repository_name":"nglib","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"nglib/NgLib","kind":"module","full_name":"NgLib","name":"NgLib"},"doc":"不変な数列 $A$ について、以下の条件を満たす演算を、区間クエリとして処理します。\n- 結合則 : $(x \\oplus y) \\oplus z = x \\oplus (y \\oplus z)$\n- 冪等性 : $x \\oplus x = x$\n\n前計算は $O(N \\log{N})$ かかりますが、区間クエリには $O(1)$ で答えられます。","summary":"<p>不変な数列 $A$ について、以下の条件を満たす演算を、区間クエリとして処理します。 - 結合則 : $(x \\oplus y) \\oplus z = x \\oplus (y \\oplus z)$ - 冪等性 : $x \\oplus x = x$</p>","class_methods":[{"html_id":"bitwise_and(elems:Enumerable(T))-class-method","name":"bitwise_and","doc":"$\\oplus = \\mathrm{bitwise-and}$ としてデータ構造を構築します。","summary":"<p>$\\oplus = \\mathrm{bitwise-and}$ としてデータ構造を構築します。</p>","abstract":false,"args":[{"name":"elems","external_name":"elems","restriction":"Enumerable(T)"}],"args_string":"(elems : Enumerable(T))","args_html":"(elems : Enumerable(T))","location":{"filename":"src/nglib/data_structure/sparse_table.cr","line_number":30,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/sparse_table.cr#L30"},"def":{"name":"bitwise_and","args":[{"name":"elems","external_name":"elems","restriction":"Enumerable(T)"}],"visibility":"Public","body":"new(elems, ->(x : T, y : T) do\n  x & y\nend)"}},{"html_id":"bitwise_or(elems:Enumerable(T))-class-method","name":"bitwise_or","doc":"$\\oplus = \\mathrm{bitwise-or}$ としてデータ構造を構築します。","summary":"<p>$\\oplus = \\mathrm{bitwise-or}$ としてデータ構造を構築します。</p>","abstract":false,"args":[{"name":"elems","external_name":"elems","restriction":"Enumerable(T)"}],"args_string":"(elems : Enumerable(T))","args_html":"(elems : Enumerable(T))","location":{"filename":"src/nglib/data_structure/sparse_table.cr","line_number":25,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/sparse_table.cr#L25"},"def":{"name":"bitwise_or","args":[{"name":"elems","external_name":"elems","restriction":"Enumerable(T)"}],"visibility":"Public","body":"new(elems, ->(x : T, y : T) do\n  x | y\nend)"}},{"html_id":"gcd(elems:Enumerable(T))-class-method","name":"gcd","doc":"$\\oplus = \\mathrm{gcd}$ としてデータ構造を構築します。","summary":"<p>$\\oplus = \\mathrm{gcd}$ としてデータ構造を構築します。</p>","abstract":false,"args":[{"name":"elems","external_name":"elems","restriction":"Enumerable(T)"}],"args_string":"(elems : Enumerable(T))","args_html":"(elems : Enumerable(T))","location":{"filename":"src/nglib/data_structure/sparse_table.cr","line_number":35,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/sparse_table.cr#L35"},"def":{"name":"gcd","args":[{"name":"elems","external_name":"elems","restriction":"Enumerable(T)"}],"visibility":"Public","body":"new(elems, ->(x : T, y : T) do\n  x.gcd(y)\nend)"}},{"html_id":"max(elems:Enumerable(T))-class-method","name":"max","doc":"$\\oplus = \\max$ としてデータ構造を構築します。","summary":"<p>$\\oplus = \\max$ としてデータ構造を構築します。</p>","abstract":false,"args":[{"name":"elems","external_name":"elems","restriction":"Enumerable(T)"}],"args_string":"(elems : Enumerable(T))","args_html":"(elems : Enumerable(T))","location":{"filename":"src/nglib/data_structure/sparse_table.cr","line_number":15,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/sparse_table.cr#L15"},"def":{"name":"max","args":[{"name":"elems","external_name":"elems","restriction":"Enumerable(T)"}],"visibility":"Public","body":"new(elems, ->(x : T, y : T) do\n  x > y ? x : y\nend)"}},{"html_id":"min(elems:Enumerable(T))-class-method","name":"min","doc":"$\\oplus = \\min$ としてデータ構造を構築します。","summary":"<p>$\\oplus = \\min$ としてデータ構造を構築します。</p>","abstract":false,"args":[{"name":"elems","external_name":"elems","restriction":"Enumerable(T)"}],"args_string":"(elems : Enumerable(T))","args_html":"(elems : Enumerable(T))","location":{"filename":"src/nglib/data_structure/sparse_table.cr","line_number":20,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/sparse_table.cr#L20"},"def":{"name":"min","args":[{"name":"elems","external_name":"elems","restriction":"Enumerable(T)"}],"visibility":"Public","body":"new(elems, ->(x : T, y : T) do\n  x < y ? x : y\nend)"}}],"constructors":[{"html_id":"new(elems:Enumerable(T),op:T,T->T)-class-method","name":"new","doc":"$\\oplus = op$ としてデータ構造を構築します。","summary":"<p>$\\oplus = op$ としてデータ構造を構築します。</p>","abstract":false,"args":[{"name":"elems","external_name":"elems","restriction":"Enumerable(T)"},{"name":"op","external_name":"op","restriction":"(T, T -> T)"}],"args_string":"(elems : Enumerable(T), op : T, T -> T)","args_html":"(elems : Enumerable(T), op : T, T -> T)","location":{"filename":"src/nglib/data_structure/sparse_table.cr","line_number":40,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/sparse_table.cr#L40"},"def":{"name":"new","args":[{"name":"elems","external_name":"elems","restriction":"Enumerable(T)"},{"name":"op","external_name":"op","restriction":"(T, T -> T)"}],"visibility":"Public","body":"_ = SparseTable(T).allocate\n_.initialize(elems, op)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"[](range:Range(Int|Nil,Int|Nil))-instance-method","name":"[]","doc":"`prod` へのエイリアスです。","summary":"<p><code><a href=\"../NgLib/SparseTable.html#prod%28range%3ARange%28Int%7CNil%2CInt%7CNil%29%29-instance-method\">#prod</a></code> へのエイリアスです。</p>","abstract":false,"args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"args_string":"(range : Range(Int | Nil, Int | Nil))","args_html":"(range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil))","location":{"filename":"src/nglib/data_structure/sparse_table.cr","line_number":113,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/sparse_table.cr#L113"},"def":{"name":"[]","args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"visibility":"Public","body":"prod(range)"}},{"html_id":"[](i)-instance-method","name":"[]","doc":"$a_i$ を返します。","summary":"<p>$a_i$ を返します。</p>","abstract":false,"args":[{"name":"i","external_name":"i","restriction":""}],"args_string":"(i)","args_html":"(i)","location":{"filename":"src/nglib/data_structure/sparse_table.cr","line_number":101,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/sparse_table.cr#L101"},"def":{"name":"[]","args":[{"name":"i","external_name":"i","restriction":""}],"visibility":"Public","body":"@data[i]"}},{"html_id":"[]?(range:Range(Int|Nil,Int|Nil))-instance-method","name":"[]?","doc":"`prod?` へのエイリアスです。","summary":"<p><code><a href=\"../NgLib/SparseTable.html#prod%3F%28range%3ARange%28Int%7CNil%2CInt%7CNil%29%29-instance-method\">#prod?</a></code> へのエイリアスです。</p>","abstract":false,"args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"args_string":"(range : Range(Int | Nil, Int | Nil))","args_html":"(range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil))","location":{"filename":"src/nglib/data_structure/sparse_table.cr","line_number":118,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/sparse_table.cr#L118"},"def":{"name":"[]?","args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"visibility":"Public","body":"prod?(range)"}},{"html_id":"[]?(i)-instance-method","name":"[]?","doc":"$a_i$ を返します。\n\n添字が範囲外のとき、`nil` を返します。","summary":"<p>$a_i$ を返します。</p>","abstract":false,"args":[{"name":"i","external_name":"i","restriction":""}],"args_string":"(i)","args_html":"(i)","location":{"filename":"src/nglib/data_structure/sparse_table.cr","line_number":108,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/sparse_table.cr#L108"},"def":{"name":"[]?","args":[{"name":"i","external_name":"i","restriction":""}],"visibility":"Public","body":"@data[i]?"}},{"html_id":"prod(range:Range(Int|Nil,Int|Nil))-instance-method","name":"prod","doc":"`range` の表す範囲の要素の総積 $\\bigoplus_{i \\in range} a_i$ を返します。\n\n```\nrmq = SparseTable(Int32).min([2, 7, 1, 8, 1])\nrmq.prod(0...3) # => 1\n```","summary":"<p><code>range</code> の表す範囲の要素の総積 $\\bigoplus_{i \\in range} a_i$ を返します。</p>","abstract":false,"args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"args_string":"(range : Range(Int | Nil, Int | Nil))","args_html":"(range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil))","location":{"filename":"src/nglib/data_structure/sparse_table.cr","line_number":68,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/sparse_table.cr#L68"},"def":{"name":"prod","args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"visibility":"Public","body":"l = (range.begin || 0)\nr = if range.end.nil?\n  @size\nelse\n  range.end.not_nil! + (range.exclusive? ? 0 : 1)\nend\nb = @lookup[r - l]\n@op.call(@table[b][l], @table[b][r - (1 << b)])\n"}},{"html_id":"prod?(range:Range(Int|Nil,Int|Nil))-instance-method","name":"prod?","doc":"`range` の表す範囲の要素の総積 $\\bigoplus_{i \\in range} a_i$ を返します。\n\n$0 \\leq l \\leq r \\leq n$ を満たさないとき、`nil` を返します。\n\n```\nrmq = SparseTable(Int32).min([2, 7, 1, 8, 1])\nrmq.prod(0...3) # => 1\n```","summary":"<p><code>range</code> の表す範囲の要素の総積 $\\bigoplus_{i \\in range} a_i$ を返します。</p>","abstract":false,"args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"args_string":"(range : Range(Int | Nil, Int | Nil))","args_html":"(range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil))","location":{"filename":"src/nglib/data_structure/sparse_table.cr","line_number":88,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/sparse_table.cr#L88"},"def":{"name":"prod?","args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"visibility":"Public","body":"l = (range.begin || 0)\nr = if range.end.nil?\n  @size\nelse\n  range.end.not_nil! + (range.exclusive? ? 0 : 1)\nend\nif (0 <= l && l <= r) && r <= @size\nelse\n  return nil\nend\nprod(range)\n"}},{"html_id":"size:Int32-instance-method","name":"size","abstract":false,"location":{"filename":"src/nglib/data_structure/sparse_table.cr","line_number":8,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/sparse_table.cr#L8"},"def":{"name":"size","return_type":"Int32","visibility":"Public","body":"@size"}}]},{"html_id":"nglib/NgLib/StaticRangeFrequency","path":"NgLib/StaticRangeFrequency.html","kind":"class","full_name":"NgLib::StaticRangeFrequency(T)","name":"StaticRangeFrequency","abstract":false,"superclass":{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"nglib/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/nglib/data_structure/static_range_frequency.cr","line_number":4,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/static_range_frequency.cr#L4"}],"repository_name":"nglib","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"nglib/NgLib","kind":"module","full_name":"NgLib","name":"NgLib"},"doc":"長さ $n$ の整数列 $a_0, a_1, \\cdots, a_{n-1}$ について、\n$[l, r)$ に $x$ が何回現れるかを $O(\\log{N})$ で計算するクラスです。","summary":"<p>長さ $n$ の整数列 $a_0, a_1, \\cdots, a_{n-1}$ について、 $[l, r)$ に $x$ が何回現れるかを $O(\\log{N})$ で計算するクラスです。</p>","constructors":[{"html_id":"new(array:Array(T))-class-method","name":"new","abstract":false,"args":[{"name":"array","external_name":"array","restriction":"Array(T)"}],"args_string":"(array : Array(T))","args_html":"(array : Array(T))","location":{"filename":"src/nglib/data_structure/static_range_frequency.cr","line_number":8,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/static_range_frequency.cr#L8"},"def":{"name":"new","args":[{"name":"array","external_name":"array","restriction":"Array(T)"}],"visibility":"Public","body":"_ = StaticRangeFrequency(T).allocate\n_.initialize(array)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"query(range:Range(Int|Nil,Int|Nil),x:T)-instance-method","name":"query","abstract":false,"args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"x","external_name":"x","restriction":"T"}],"args_string":"(range : Range(Int | Nil, Int | Nil), x : T)","args_html":"(range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil), x : T)","location":{"filename":"src/nglib/data_structure/static_range_frequency.cr","line_number":17,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/static_range_frequency.cr#L17"},"def":{"name":"query","args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"x","external_name":"x","restriction":"T"}],"visibility":"Public","body":"left = (range.begin || 0).to_i32\nright = ((range.end || @size) + (range.exclusive? || range.end.nil? ? 0 : 1)).to_i32\nv = @map.fetch(x, [] of Int32)\n(lower_bound(v, right)) - (lower_bound(v, left))\n"}}]},{"html_id":"nglib/NgLib/StaticRangeSum","path":"NgLib/StaticRangeSum.html","kind":"class","full_name":"NgLib::StaticRangeSum(T)","name":"StaticRangeSum","abstract":false,"superclass":{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"nglib/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/nglib/data_structure/static_range_sum.cr","line_number":3,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/static_range_sum.cr#L3"}],"repository_name":"nglib","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"nglib/NgLib","kind":"module","full_name":"NgLib","name":"NgLib"},"doc":"不変な数列 $A$ に対して、$\\sum_{i=l}^{r-1} A_i$ を前計算 $O(N)$ クエリ $O(1)$ で求めます。","summary":"<p>不変な数列 $A$ に対して、$\\sum_{i=l}^{r-1} A_i$ を前計算 $O(N)$ クエリ $O(1)$ で求めます。</p>","constructors":[{"html_id":"new(array:Array(T))-class-method","name":"new","doc":"配列 `array` に対して累積和を構築します。\n\n```\narray = [1, 1, 2, 3, 5, 8, 13]\ncsum = StaticRangeSum(Int32).new(array)\n```","summary":"<p>配列 <code>array</code> に対して累積和を構築します。</p>","abstract":false,"args":[{"name":"array","external_name":"array","restriction":"Array(T)"}],"args_string":"(array : Array(T))","args_html":"(array : Array(T))","location":{"filename":"src/nglib/data_structure/static_range_sum.cr","line_number":13,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/static_range_sum.cr#L13"},"def":{"name":"new","args":[{"name":"array","external_name":"array","restriction":"Array(T)"}],"visibility":"Public","body":"_ = StaticRangeSum(T).allocate\n_.initialize(array)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"[](l,r):T-instance-method","name":"[]","doc":"`get(l : Int, r : Int)` へのエイリアスです。","summary":"<p><code><a href=\"../NgLib/StaticRangeSum.html#get%28l%2Cr%29%3AT-instance-method\">#get(l : Int, r : Int)</a></code> へのエイリアスです。</p>","abstract":false,"args":[{"name":"l","external_name":"l","restriction":""},{"name":"r","external_name":"r","restriction":""}],"args_string":"(l, r) : T","args_html":"(l, r) : T","location":{"filename":"src/nglib/data_structure/static_range_sum.cr","line_number":73,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/static_range_sum.cr#L73"},"def":{"name":"[]","args":[{"name":"l","external_name":"l","restriction":""},{"name":"r","external_name":"r","restriction":""}],"return_type":"T","visibility":"Public","body":"get(l, r)"}},{"html_id":"[](range:Range(Int|Nil,Int|Nil)):T-instance-method","name":"[]","doc":"`get(range : Range(Int?, Int?))` へのエイリアスです。","summary":"<p><code><a href=\"../NgLib/StaticRangeSum.html#get%28l%2Cr%29%3AT-instance-method\">#get(range : Range(Int?, Int?))</a></code> へのエイリアスです。</p>","abstract":false,"args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"args_string":"(range : Range(Int | Nil, Int | Nil)) : T","args_html":"(range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil)) : T","location":{"filename":"src/nglib/data_structure/static_range_sum.cr","line_number":78,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/static_range_sum.cr#L78"},"def":{"name":"[]","args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"return_type":"T","visibility":"Public","body":"get(range)"}},{"html_id":"[]?(l,r):T|Nil-instance-method","name":"[]?","doc":"`get(l : Int, r : Int)` へのエイリアスです。","summary":"<p><code><a href=\"../NgLib/StaticRangeSum.html#get%28l%2Cr%29%3AT-instance-method\">#get(l : Int, r : Int)</a></code> へのエイリアスです。</p>","abstract":false,"args":[{"name":"l","external_name":"l","restriction":""},{"name":"r","external_name":"r","restriction":""}],"args_string":"(l, r) : T | Nil","args_html":"(l, r) : T | Nil","location":{"filename":"src/nglib/data_structure/static_range_sum.cr","line_number":83,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/static_range_sum.cr#L83"},"def":{"name":"[]?","args":[{"name":"l","external_name":"l","restriction":""},{"name":"r","external_name":"r","restriction":""}],"return_type":"T | ::Nil","visibility":"Public","body":"get?(l, r)"}},{"html_id":"[]?(range:Range(Int|Nil,Int|Nil)):T|Nil-instance-method","name":"[]?","doc":"`get?(range : Range(Int?, Int?))` へのエイリアスです。","summary":"<p><code><a href=\"../NgLib/StaticRangeSum.html#get%3F%28l%2Cr%29%3AT%7CNil-instance-method\">#get?(range : Range(Int?, Int?))</a></code> へのエイリアスです。</p>","abstract":false,"args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"args_string":"(range : Range(Int | Nil, Int | Nil)) : T | Nil","args_html":"(range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil)) : T | Nil","location":{"filename":"src/nglib/data_structure/static_range_sum.cr","line_number":88,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/static_range_sum.cr#L88"},"def":{"name":"[]?","args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"return_type":"T | ::Nil","visibility":"Public","body":"get?(range)"}},{"html_id":"csum:Array(T)-instance-method","name":"csum","abstract":false,"location":{"filename":"src/nglib/data_structure/static_range_sum.cr","line_number":5,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/static_range_sum.cr#L5"},"def":{"name":"csum","return_type":"Array(T)","visibility":"Public","body":"@csum"}},{"html_id":"get(l,r):T-instance-method","name":"get","doc":"$[l, r)$ 番目までの要素の総和 $\\sum_{i=l}^{r-1} a_i$ を $O(1)$ で返します。\n\n```\narray = [1, 1, 2, 3, 5, 8, 13]\ncsum = StaticRangeSum(Int32).new(array)\ncsum.get(0...5) # => 1 + 1 + 2 + 3 + 5 = 12\n```","summary":"<p>$[l, r)$ 番目までの要素の総和 $\\sum_{i=l}^{r-1} a_i$ を $O(1)$ で返します。</p>","abstract":false,"args":[{"name":"l","external_name":"l","restriction":""},{"name":"r","external_name":"r","restriction":""}],"args_string":"(l, r) : T","args_html":"(l, r) : T","location":{"filename":"src/nglib/data_structure/static_range_sum.cr","line_number":26,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/static_range_sum.cr#L26"},"def":{"name":"get","args":[{"name":"l","external_name":"l","restriction":""},{"name":"r","external_name":"r","restriction":""}],"return_type":"T","visibility":"Public","body":"if l <= r\nelse\n  raise(IndexError.new(\"`l` must be less than or equal to `r` (#{l}, #{r})\"))\nend\n@csum[r] - @csum[l]\n"}},{"html_id":"get(range:Range(Int|Nil,Int|Nil)):T-instance-method","name":"get","doc":"$[l, r)$ 番目までの要素の総和 $\\sum_{i=l}^{r-1} a_i$ を $O(1)$ で返します。\n\n```\narray = [1, 1, 2, 3, 5, 8, 13]\ncsum = StaticRangeSum(Int32).new(array)\ncsum.get(0...5) # => 1 + 1 + 2 + 3 + 5 = 12\n```","summary":"<p>$[l, r)$ 番目までの要素の総和 $\\sum_{i=l}^{r-1} a_i$ を $O(1)$ で返します。</p>","abstract":false,"args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"args_string":"(range : Range(Int | Nil, Int | Nil)) : T","args_html":"(range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil)) : T","location":{"filename":"src/nglib/data_structure/static_range_sum.cr","line_number":32,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/static_range_sum.cr#L32"},"def":{"name":"get","args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"return_type":"T","visibility":"Public","body":"l = (range.begin || 0)\nr = (range.end || @size) + (range.exclusive? || range.end.nil? ? 0 : 1)\nget(l, r)\n"}},{"html_id":"get!(l,r):T-instance-method","name":"get!","doc":"$\\sum_{i=1}^{r - 1} a_i - \\sum_{i=1}^{l} a_i$ を $O(1)$ で返します。","summary":"<p>$\\sum_{i=1}^{r - 1} a_i - \\sum_{i=1}^{l} a_i$ を $O(1)$ で返します。</p>","abstract":false,"args":[{"name":"l","external_name":"l","restriction":""},{"name":"r","external_name":"r","restriction":""}],"args_string":"(l, r) : T","args_html":"(l, r) : T","location":{"filename":"src/nglib/data_structure/static_range_sum.cr","line_number":61,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/static_range_sum.cr#L61"},"def":{"name":"get!","args":[{"name":"l","external_name":"l","restriction":""},{"name":"r","external_name":"r","restriction":""}],"return_type":"T","visibility":"Public","body":"@csum[r] - @csum[l]"}},{"html_id":"get!(range:Range(Int|Nil,Int|Nil)):T-instance-method","name":"get!","doc":"$\\sum_{i=1}^{r - 1} a_i - \\sum_{i=1}^{l} a_i$ を $O(1)$ で返します。","summary":"<p>$\\sum_{i=1}^{r - 1} a_i - \\sum_{i=1}^{l} a_i$ を $O(1)$ で返します。</p>","abstract":false,"args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"args_string":"(range : Range(Int | Nil, Int | Nil)) : T","args_html":"(range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil)) : T","location":{"filename":"src/nglib/data_structure/static_range_sum.cr","line_number":66,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/static_range_sum.cr#L66"},"def":{"name":"get!","args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"return_type":"T","visibility":"Public","body":"l = (range.begin || 0)\nr = (range.end || @size) + (range.exclusive? || range.end.nil? ? 0 : 1)\nget!(l, r)\n"}},{"html_id":"get?(l,r):T|Nil-instance-method","name":"get?","doc":"$[l, r)$ 番目までの要素の総和 $\\sum_{i=l}^{r-1} a_i$ を $O(1)$ で返します。\n\n$l \\leq r$ を満たさないとき、`nil` を返します。\n\n```\narray = [1, 1, 2, 3, 5, 8, 13]\ncsum = StaticRangeSum(Int32).new(array)\ncsum.get?(0...5) # => 1 + 1 + 2 + 3 + 5 = 12\ncsum.get?(7...5) # => nil\n```","summary":"<p>$[l, r)$ 番目までの要素の総和 $\\sum_{i=l}^{r-1} a_i$ を $O(1)$ で返します。</p>","abstract":false,"args":[{"name":"l","external_name":"l","restriction":""},{"name":"r","external_name":"r","restriction":""}],"args_string":"(l, r) : T | Nil","args_html":"(l, r) : T | Nil","location":{"filename":"src/nglib/data_structure/static_range_sum.cr","line_number":48,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/static_range_sum.cr#L48"},"def":{"name":"get?","args":[{"name":"l","external_name":"l","restriction":""},{"name":"r","external_name":"r","restriction":""}],"return_type":"T | ::Nil","visibility":"Public","body":"if l <= r\nelse\n  return nil\nend\nget(l, r)\n"}},{"html_id":"get?(range:Range(Int|Nil,Int|Nil)):T|Nil-instance-method","name":"get?","doc":"$[l, r)$ 番目までの要素の総和 $\\sum_{i=l}^{r-1} a_i$ を $O(1)$ で返します。\n\n$l \\leq r$ を満たさないとき、`nil` を返します。\n\n```\narray = [1, 1, 2, 3, 5, 8, 13]\ncsum = StaticRangeSum(Int32).new(array)\ncsum.get?(0...5) # => 1 + 1 + 2 + 3 + 5 = 12\ncsum.get?(7...5) # => nil\n```","summary":"<p>$[l, r)$ 番目までの要素の総和 $\\sum_{i=l}^{r-1} a_i$ を $O(1)$ で返します。</p>","abstract":false,"args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"args_string":"(range : Range(Int | Nil, Int | Nil)) : T | Nil","args_html":"(range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil)) : T | Nil","location":{"filename":"src/nglib/data_structure/static_range_sum.cr","line_number":54,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/static_range_sum.cr#L54"},"def":{"name":"get?","args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"return_type":"T | ::Nil","visibility":"Public","body":"l = (range.begin || 0)\nr = (range.end || @size) + (range.exclusive? || range.end.nil? ? 0 : 1)\nget?(l, r)\n"}},{"html_id":"size:Int64-instance-method","name":"size","abstract":false,"location":{"filename":"src/nglib/data_structure/static_range_sum.cr","line_number":4,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/static_range_sum.cr#L4"},"def":{"name":"size","return_type":"Int64","visibility":"Public","body":"@size"}}]},{"html_id":"nglib/NgLib/StaticRectangleSum","path":"NgLib/StaticRectangleSum.html","kind":"class","full_name":"NgLib::StaticRectangleSum(T)","name":"StaticRectangleSum","abstract":false,"superclass":{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"nglib/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/nglib/data_structure/static_rectangle_sum.cr","line_number":3,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/static_rectangle_sum.cr#L3"}],"repository_name":"nglib","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"nglib/NgLib","kind":"module","full_name":"NgLib","name":"NgLib"},"doc":"不変な二次元配列 $A$ に対して、$\\sum_{i=l_i}^{r_i-1} \\sum_{j=l_j}^{r_j-1} A_i$ を前計算 $O(N)$ クエリ $O(1)$ で求めます。","summary":"<p>不変な二次元配列 $A$ に対して、$\\sum_{i=l_i}^{r_i-1} \\sum_{j=l_j}^{r_j-1} A_i$ を前計算 $O(N)$ クエリ $O(1)$ で求めます。</p>","constructors":[{"html_id":"new(grid:Array(Array(T)))-class-method","name":"new","abstract":false,"args":[{"name":"grid","external_name":"grid","restriction":"Array(Array(T))"}],"args_string":"(grid : Array(Array(T)))","args_html":"(grid : Array(Array(T)))","location":{"filename":"src/nglib/data_structure/static_rectangle_sum.cr","line_number":8,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/static_rectangle_sum.cr#L8"},"def":{"name":"new","args":[{"name":"grid","external_name":"grid","restriction":"Array(Array(T))"}],"visibility":"Public","body":"_ = StaticRectangleSum(T).allocate\n_.initialize(grid)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"[](y_range:Range(Int|Nil,Int|Nil),x_range:Range(Int|Nil,Int|Nil)):T-instance-method","name":"[]","abstract":false,"args":[{"name":"y_range","external_name":"y_range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"x_range","external_name":"x_range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"args_string":"(y_range : Range(Int | Nil, Int | Nil), x_range : Range(Int | Nil, Int | Nil)) : T","args_html":"(y_range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil), x_range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil)) : T","location":{"filename":"src/nglib/data_structure/static_rectangle_sum.cr","line_number":78,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/static_rectangle_sum.cr#L78"},"def":{"name":"[]","args":[{"name":"y_range","external_name":"y_range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"x_range","external_name":"x_range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"return_type":"T","visibility":"Public","body":"get(y_range, x_range)"}},{"html_id":"[]?(y_range:Range(Int|Nil,Int|Nil),x_range:Range(Int|Nil,Int|Nil)):T|Nil-instance-method","name":"[]?","abstract":false,"args":[{"name":"y_range","external_name":"y_range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"x_range","external_name":"x_range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"args_string":"(y_range : Range(Int | Nil, Int | Nil), x_range : Range(Int | Nil, Int | Nil)) : T | Nil","args_html":"(y_range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil), x_range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil)) : T | Nil","location":{"filename":"src/nglib/data_structure/static_rectangle_sum.cr","line_number":82,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/static_rectangle_sum.cr#L82"},"def":{"name":"[]?","args":[{"name":"y_range","external_name":"y_range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"x_range","external_name":"x_range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"return_type":"T | ::Nil","visibility":"Public","body":"get?(y_range, x_range)"}},{"html_id":"csum:Array(Array(T))-instance-method","name":"csum","abstract":false,"location":{"filename":"src/nglib/data_structure/static_rectangle_sum.cr","line_number":6,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/static_rectangle_sum.cr#L6"},"def":{"name":"csum","return_type":"Array(Array(T))","visibility":"Public","body":"@csum"}},{"html_id":"get(y_begin:Int,y_end:Int,x_begin:Int,x_end:Int):T-instance-method","name":"get","doc":"累積和を返します。\n\n[y_begin, y_end), [x_begin, x_end) で指定します。\n\nNOTE: このAPIは非推奨です。Rangeで指定することが推奨されます。","summary":"<p>累積和を返します。</p>","abstract":false,"args":[{"name":"y_begin","external_name":"y_begin","restriction":"Int"},{"name":"y_end","external_name":"y_end","restriction":"Int"},{"name":"x_begin","external_name":"x_begin","restriction":"Int"},{"name":"x_end","external_name":"x_end","restriction":"Int"}],"args_string":"(y_begin : Int, y_end : Int, x_begin : Int, x_end : Int) : T","args_html":"(y_begin : <a href=\"../Int.html\">Int</a>, y_end : <a href=\"../Int.html\">Int</a>, x_begin : <a href=\"../Int.html\">Int</a>, x_end : <a href=\"../Int.html\">Int</a>) : T","location":{"filename":"src/nglib/data_structure/static_rectangle_sum.cr","line_number":24,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/static_rectangle_sum.cr#L24"},"def":{"name":"get","args":[{"name":"y_begin","external_name":"y_begin","restriction":"Int"},{"name":"y_end","external_name":"y_end","restriction":"Int"},{"name":"x_begin","external_name":"x_begin","restriction":"Int"},{"name":"x_end","external_name":"x_end","restriction":"Int"}],"return_type":"T","visibility":"Public","body":"if y_begin <= y_end\nelse\n  raise(IndexError.new(\"`y_begin` must be less than or equal to `y_end` (#{y_begin}, #{y_end})\"))\nend\nif x_begin <= x_end\nelse\n  raise(IndexError.new(\"`x_begin` must be less than or equal to `x_end` (#{x_begin}, #{x_end})\"))\nend\n((@csum[y_end][x_end] - @csum[y_begin][x_end]) - @csum[y_end][x_begin]) + @csum[y_begin][x_begin]\n"}},{"html_id":"get(y_range:Range(Int|Nil,Int|Nil),x_range:Range(Int|Nil,Int|Nil)):T-instance-method","name":"get","doc":"累積和を取得します。\n\nRange(y_begin, y_end), Range(x_begin, x_end) で指定します。\n\n```\ncsum = StaticRectangleSum.new(a)\ncsum.get(0...h, j..j + 2) # => 28\n```","summary":"<p>累積和を取得します。</p>","abstract":false,"args":[{"name":"y_range","external_name":"y_range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"x_range","external_name":"x_range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"args_string":"(y_range : Range(Int | Nil, Int | Nil), x_range : Range(Int | Nil, Int | Nil)) : T","args_html":"(y_range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil), x_range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil)) : T","location":{"filename":"src/nglib/data_structure/static_rectangle_sum.cr","line_number":51,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/static_rectangle_sum.cr#L51"},"def":{"name":"get","args":[{"name":"y_range","external_name":"y_range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"x_range","external_name":"x_range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"return_type":"T","visibility":"Public","body":"y_begin = (y_range.begin || 0)\ny_end = (y_range.end || @height) + (y_range.exclusive? || y_range.end.nil? ? 0 : 1)\nx_begin = (x_range.begin || 0)\nx_end = (x_range.end || @height) + (x_range.exclusive? || x_range.end.nil? ? 0 : 1)\nget(y_begin, y_end, x_begin, x_end)\n"}},{"html_id":"get?(y_begin:Int,y_end:Int,x_begin:Int,x_end:Int):T|Nil-instance-method","name":"get?","doc":"累積和を返します。\n\n[y_begin, y_end), [x_begin, x_end) で指定します。\n\n範囲内に要素が存在しない場合 nil を返します。\n\nNOTE: このAPIは非推奨です。Rangeで指定することが推奨されます。","summary":"<p>累積和を返します。</p>","abstract":false,"args":[{"name":"y_begin","external_name":"y_begin","restriction":"Int"},{"name":"y_end","external_name":"y_end","restriction":"Int"},{"name":"x_begin","external_name":"x_begin","restriction":"Int"},{"name":"x_end","external_name":"x_end","restriction":"Int"}],"args_string":"(y_begin : Int, y_end : Int, x_begin : Int, x_end : Int) : T | Nil","args_html":"(y_begin : <a href=\"../Int.html\">Int</a>, y_end : <a href=\"../Int.html\">Int</a>, x_begin : <a href=\"../Int.html\">Int</a>, x_end : <a href=\"../Int.html\">Int</a>) : T | Nil","location":{"filename":"src/nglib/data_structure/static_rectangle_sum.cr","line_number":37,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/static_rectangle_sum.cr#L37"},"def":{"name":"get?","args":[{"name":"y_begin","external_name":"y_begin","restriction":"Int"},{"name":"y_end","external_name":"y_end","restriction":"Int"},{"name":"x_begin","external_name":"x_begin","restriction":"Int"},{"name":"x_end","external_name":"x_end","restriction":"Int"}],"return_type":"T | ::Nil","visibility":"Public","body":"if y_begin <= y_end\nelse\n  return nil\nend\nif x_begin <= x_end\nelse\n  return nil\nend\n((@csum[y_end][x_end] - @csum[y_begin][x_end]) - @csum[y_end][x_begin]) + @csum[y_begin][x_begin]\n"}},{"html_id":"get?(y_range:Range(Int|Nil,Int|Nil),x_range:Range(Int|Nil,Int|Nil)):T|Nil-instance-method","name":"get?","doc":"累積和を返します。\n\n[y_begin, y_end), [x_begin, x_end) で指定します。\n\n範囲内に要素が存在しない場合 nil を返します。\n\n```\ncsum = StaticRectangleSum.new(a)\ncsum.get?(0...h, j..j + 2)     # => 28\ncsum.get?(0...100*h, j..j + 2) # => nil\n```","summary":"<p>累積和を返します。</p>","abstract":false,"args":[{"name":"y_range","external_name":"y_range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"x_range","external_name":"x_range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"args_string":"(y_range : Range(Int | Nil, Int | Nil), x_range : Range(Int | Nil, Int | Nil)) : T | Nil","args_html":"(y_range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil), x_range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil)) : T | Nil","location":{"filename":"src/nglib/data_structure/static_rectangle_sum.cr","line_number":70,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/static_rectangle_sum.cr#L70"},"def":{"name":"get?","args":[{"name":"y_range","external_name":"y_range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"x_range","external_name":"x_range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"return_type":"T | ::Nil","visibility":"Public","body":"y_begin = (y_range.begin || 0)\ny_end = (y_range.end || @height) + (y_range.exclusive? || y_range.end.nil? ? 0 : 1)\nx_begin = (x_range.begin || 0)\nx_end = (x_range.end || @height) + (x_range.exclusive? || x_range.end.nil? ? 0 : 1)\nget?(y_begin, y_end, x_begin, x_end)\n"}},{"html_id":"height:Int32-instance-method","name":"height","abstract":false,"location":{"filename":"src/nglib/data_structure/static_rectangle_sum.cr","line_number":4,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/static_rectangle_sum.cr#L4"},"def":{"name":"height","return_type":"Int32","visibility":"Public","body":"@height"}},{"html_id":"width:Int32-instance-method","name":"width","abstract":false,"location":{"filename":"src/nglib/data_structure/static_rectangle_sum.cr","line_number":5,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/static_rectangle_sum.cr#L5"},"def":{"name":"width","return_type":"Int32","visibility":"Public","body":"@width"}}]},{"html_id":"nglib/NgLib/SuccinctBitVector","path":"NgLib/SuccinctBitVector.html","kind":"class","full_name":"NgLib::SuccinctBitVector","name":"SuccinctBitVector","abstract":false,"superclass":{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"nglib/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/nglib/data_structure/succinct_bit_vector.cr","line_number":11,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/succinct_bit_vector.cr#L11"}],"repository_name":"nglib","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"nglib/NgLib","kind":"module","full_name":"NgLib","name":"NgLib"},"doc":"`SuccinctBitVector` は簡易ビットベクトル（簡易辞書、Succinct Indexable Dictionary）を提供するクラスです。\n\n前計算 $O(n / 32)$ で次の操作が $O(1)$ くらいでできます。\n\n- `.[i]` # => $i$ 番目のビットにアクセスする （$O(1)$）\n- `.sum(r)` # =>  $[0, r)$ にある $1$ の個数を求める （$O(1)$）\n- `.kth_bit_index(k)` # => $k$ 番目に現れる $1$ の位置を求める （$O(\\log{n})$）\n\n例えばこの問題が解けます → [D - Sleep Log](https://atcoder.jp/contests/abc305/tasks/abc305_d)","summary":"<p><code><a href=\"../NgLib/SuccinctBitVector.html\">SuccinctBitVector</a></code> は簡易ビットベクトル（簡易辞書、Succinct Indexable Dictionary）を提供するクラスです。</p>","constructors":[{"html_id":"new(n:Int)-class-method","name":"new","doc":"長さ $n$ のビット列を構築します。\n\n計算量は $O(n / 32)$ です。","summary":"<p>長さ $n$ のビット列を構築します。</p>","abstract":false,"args":[{"name":"n","external_name":"n","restriction":"Int"}],"args_string":"(n : Int)","args_html":"(n : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/data_structure/succinct_bit_vector.cr","line_number":22,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/succinct_bit_vector.cr#L22"},"def":{"name":"new","args":[{"name":"n","external_name":"n","restriction":"Int"}],"visibility":"Public","body":"_ = allocate\n_.initialize(n)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"html_id":"new(n:Int,&)-class-method","name":"new","doc":"長さ $n$ のビット列を構築します。\n\nブロックでは $i$ 番目のビットの値を返してください。\n\n計算量は $O(n)$ です。","summary":"<p>長さ $n$ のビット列を構築します。</p>","abstract":false,"args":[{"name":"n","external_name":"n","restriction":"Int"}],"args_string":"(n : Int, &)","args_html":"(n : <a href=\"../Int.html\">Int</a>, &)","location":{"filename":"src/nglib/data_structure/succinct_bit_vector.cr","line_number":36,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/succinct_bit_vector.cr#L36"},"def":{"name":"new","args":[{"name":"n","external_name":"n","restriction":"Int"}],"yields":1,"block_arity":1,"visibility":"Public","body":"_ = allocate\n_.initialize(n) do |_arg0|\n  yield _arg0\nend\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"[](range:Range(Int|Nil,Int|Nil)):UInt32-instance-method","name":"[]","doc":"`range` の範囲の総和を返します。","summary":"<p><code>range</code> の範囲の総和を返します。</p>","abstract":false,"args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"args_string":"(range : Range(Int | Nil, Int | Nil)) : UInt32","args_html":"(range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil)) : UInt32","location":{"filename":"src/nglib/data_structure/succinct_bit_vector.cr","line_number":124,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/succinct_bit_vector.cr#L124"},"def":{"name":"[]","args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"return_type":"UInt32","visibility":"Public","body":"sum(range)"}},{"html_id":"[](i):UInt32-instance-method","name":"[]","doc":"$i$ 番目のビットを返します。","summary":"<p>$i$ 番目のビットを返します。</p>","abstract":false,"args":[{"name":"i","external_name":"i","restriction":""}],"args_string":"(i) : UInt32","args_html":"(i) : UInt32","location":{"filename":"src/nglib/data_structure/succinct_bit_vector.cr","line_number":119,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/succinct_bit_vector.cr#L119"},"def":{"name":"[]","args":[{"name":"i","external_name":"i","restriction":""}],"return_type":"UInt32","visibility":"Public","body":"((@bits[i >> 5] >> (i & 31)) & 1) > 0 ? 1_u32 : 0_u32"}},{"html_id":"build-instance-method","name":"build","doc":"総和が計算できるようにデータ構造を構築します。","summary":"<p>総和が計算できるようにデータ構造を構築します。</p>","abstract":false,"location":{"filename":"src/nglib/data_structure/succinct_bit_vector.cr","line_number":67,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/succinct_bit_vector.cr#L67"},"def":{"name":"build","visibility":"Public","body":"@sums[0] = 0\n(1...@blocks).each do |i|\n  @sums[i] = @sums[i - 1] + @bits[i - 1].popcount\nend\n@n_zeros = @size.to_i - sum\n@n_ones = @size.to_i - @n_zeros\n"}},{"html_id":"count_ones(range:Range(Int|Nil,Int|Nil)):Int32-instance-method","name":"count_ones","abstract":false,"args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"args_string":"(range : Range(Int | Nil, Int | Nil)) : Int32","args_html":"(range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil)) : Int32","location":{"filename":"src/nglib/data_structure/succinct_bit_vector.cr","line_number":112,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/succinct_bit_vector.cr#L112"},"def":{"name":"count_ones","args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"return_type":"Int32","visibility":"Public","body":"l = (range.begin || 0)\nr = (range.end || @size) + (range.exclusive? || range.end.nil? ? 0 : 1)\n(l...r).size.to_i - (count_zeros(range))\n"}},{"html_id":"count_ones:Int32-instance-method","name":"count_ones","abstract":false,"location":{"filename":"src/nglib/data_structure/succinct_bit_vector.cr","line_number":108,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/succinct_bit_vector.cr#L108"},"def":{"name":"count_ones","return_type":"Int32","visibility":"Public","body":"@n_ones"}},{"html_id":"count_zeros(range:Range(Int|Nil,Int|Nil)):Int32-instance-method","name":"count_zeros","abstract":false,"args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"args_string":"(range : Range(Int | Nil, Int | Nil)) : Int32","args_html":"(range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil)) : Int32","location":{"filename":"src/nglib/data_structure/succinct_bit_vector.cr","line_number":102,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/succinct_bit_vector.cr#L102"},"def":{"name":"count_zeros","args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"return_type":"Int32","visibility":"Public","body":"l = (range.begin || 0)\nr = (range.end || @size) + (range.exclusive? || range.end.nil? ? 0 : 1)\n(l...r).size.to_i - (sum(l, r)).to_i\n"}},{"html_id":"count_zeros:Int32-instance-method","name":"count_zeros","abstract":false,"location":{"filename":"src/nglib/data_structure/succinct_bit_vector.cr","line_number":98,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/succinct_bit_vector.cr#L98"},"def":{"name":"count_zeros","return_type":"Int32","visibility":"Public","body":"@n_zeros"}},{"html_id":"kth_bit_index(k):UInt32-instance-method","name":"kth_bit_index","doc":"$k$ 番目に出現する $1$ の位置を求めます。\n\n言い換えると、$sum(i) = k$ となるような最小の $i$ を返します。\n\n存在しない場合は `nil` を返します。\n\n本当は $O(1)$ にできるらしいですが、面倒なので $O(\\log{n})$ です。","summary":"<p>$k$ 番目に出現する $1$ の位置を求めます。</p>","abstract":false,"args":[{"name":"k","external_name":"k","restriction":""}],"args_string":"(k) : UInt32","args_html":"(k) : UInt32","location":{"filename":"src/nglib/data_structure/succinct_bit_vector.cr","line_number":135,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/succinct_bit_vector.cr#L135"},"def":{"name":"kth_bit_index","args":[{"name":"k","external_name":"k","restriction":""}],"return_type":"UInt32","visibility":"Public","body":"if k == 0\n  return 0_u32\nend\nif sum < k\n  return nil\nend\n(0..length).bsearch do |right|\n  (sum(right)) >= k\nend || (raise(\"Not found\"))\n"}},{"html_id":"reset(i:Int)-instance-method","name":"reset","doc":"左から $i$ 番目のビットを 0 にします。\n\n計算量は $O(1)$ です。","summary":"<p>左から $i$ 番目のビットを 0 にします。</p>","abstract":false,"args":[{"name":"i","external_name":"i","restriction":"Int"}],"args_string":"(i : Int)","args_html":"(i : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/data_structure/succinct_bit_vector.cr","line_number":62,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/succinct_bit_vector.cr#L62"},"def":{"name":"reset","args":[{"name":"i","external_name":"i","restriction":"Int"}],"visibility":"Public","body":"__temp_66 = i >> 5\n@bits[__temp_66] = @bits[__temp_66] & (~(1_u32 << (i & 31)))\n"}},{"html_id":"set(i:Int)-instance-method","name":"set","doc":"左から $i$ 番目のビットを 1 にします。\n\n計算量は $O(1)$ です。","summary":"<p>左から $i$ 番目のビットを 1 にします。</p>","abstract":false,"args":[{"name":"i","external_name":"i","restriction":"Int"}],"args_string":"(i : Int)","args_html":"(i : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/data_structure/succinct_bit_vector.cr","line_number":55,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/succinct_bit_vector.cr#L55"},"def":{"name":"set","args":[{"name":"i","external_name":"i","restriction":"Int"}],"visibility":"Public","body":"__temp_64 = i >> 5\n@bits[__temp_64] = @bits[__temp_64] | (1_u32 << (i & 31))\n"}},{"html_id":"size:UInt32-instance-method","name":"size","abstract":false,"location":{"filename":"src/nglib/data_structure/succinct_bit_vector.cr","line_number":12,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/succinct_bit_vector.cr#L12"},"def":{"name":"size","return_type":"UInt32","visibility":"Public","body":"@size"}},{"html_id":"sum(l,r):UInt32-instance-method","name":"sum","doc":"$[l, r)$ の総和を返します。","summary":"<p>$[l, r)$ の総和を返します。</p>","abstract":false,"args":[{"name":"l","external_name":"l","restriction":""},{"name":"r","external_name":"r","restriction":""}],"args_string":"(l, r) : UInt32","args_html":"(l, r) : UInt32","location":{"filename":"src/nglib/data_structure/succinct_bit_vector.cr","line_number":87,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/succinct_bit_vector.cr#L87"},"def":{"name":"sum","args":[{"name":"l","external_name":"l","restriction":""},{"name":"r","external_name":"r","restriction":""}],"return_type":"UInt32","visibility":"Public","body":"(sum(r)) - (sum(l))"}},{"html_id":"sum(range:Range(Int|Nil,Int|Nil))-instance-method","name":"sum","doc":"`range` の範囲で総和を返します。","summary":"<p><code>range</code> の範囲で総和を返します。</p>","abstract":false,"args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"args_string":"(range : Range(Int | Nil, Int | Nil))","args_html":"(range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil))","location":{"filename":"src/nglib/data_structure/succinct_bit_vector.cr","line_number":92,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/succinct_bit_vector.cr#L92"},"def":{"name":"sum","args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"}],"visibility":"Public","body":"l = (range.begin || 0)\nr = (range.end || @size) + (range.exclusive? || range.end.nil? ? 0 : 1)\nsum(l, r)\n"}},{"html_id":"sum(r):UInt32-instance-method","name":"sum","doc":"$[0, r)$ の総和を返します。","summary":"<p>$[0, r)$ の総和を返します。</p>","abstract":false,"args":[{"name":"r","external_name":"r","restriction":""}],"args_string":"(r) : UInt32","args_html":"(r) : UInt32","location":{"filename":"src/nglib/data_structure/succinct_bit_vector.cr","line_number":82,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/succinct_bit_vector.cr#L82"},"def":{"name":"sum","args":[{"name":"r","external_name":"r","restriction":""}],"return_type":"UInt32","visibility":"Public","body":"@sums[r >> 5] + (@bits[r >> 5] & ((1_u32 << (r & 31)) - 1)).popcount"}},{"html_id":"sum-instance-method","name":"sum","doc":"$[0, n)$ の総和を返します。","summary":"<p>$[0, n)$ の総和を返します。</p>","abstract":false,"location":{"filename":"src/nglib/data_structure/succinct_bit_vector.cr","line_number":77,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/succinct_bit_vector.cr#L77"},"def":{"name":"sum","visibility":"Public","body":"sum(size)"}}]},{"html_id":"nglib/NgLib/TSPGraph","path":"NgLib/TSPGraph.html","kind":"class","full_name":"NgLib::TSPGraph(T)","name":"TSPGraph","abstract":false,"superclass":{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"nglib/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/nglib/graph/tsp.cr","line_number":18,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/tsp.cr#L18"}],"repository_name":"nglib","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"nglib/NgLib","kind":"module","full_name":"NgLib","name":"NgLib"},"doc":"巡回セールスマン問題を解きます。\n\n内部では BitDP を用いているため、\n頂点数が大きいグラフには対応できません。\n\n通常の巡回セールスマン問題を解きたい場合は、\n`#shortest_route(should_back : Bool = true)` を利用してください。\n\n始点を指定したいという特殊な場合は、\n`#shortest_route(start : Int, should_back : Bool = true)` を利用してください。\n\nオリジナルの巡回セールスマン問題は各頂点に一度しか訪れることができません。\n同じ頂点に複数回訪れられる場合は、`NgLib::FloydWarshall` などで、全点対最短経路長を求め、\nそれを隣接行列として渡してください。\n\n計算量は $O(N^2 2^N)$ です。","summary":"<p>巡回セールスマン問題を解きます。</p>","constructors":[{"html_id":"new(matrix:Array(Array(T|Nil)|Array(T)))-class-method","name":"new","doc":"隣接行列に従ってグラフを作ります。\n\n`nil` は辺が存在しないことを表します。\n無限大の重みを持つ辺と捉えても良いです。\n\n```\nmat = [[0, 3, 1], [-2, 0, 4], [nil, nil, 0]]\nNgLib::TSPGraph(Int32).new(mat)\n```","summary":"<p>隣接行列に従ってグラフを作ります。</p>","abstract":false,"args":[{"name":"matrix","external_name":"matrix","restriction":"Array(Array(T | ::Nil) | Array(T))"}],"args_string":"(matrix : Array(Array(T | Nil) | Array(T)))","args_html":"(matrix : Array(Array(T | Nil) | Array(T)))","location":{"filename":"src/nglib/graph/tsp.cr","line_number":53,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/tsp.cr#L53"},"def":{"name":"new","args":[{"name":"matrix","external_name":"matrix","restriction":"Array(Array(T | ::Nil) | Array(T))"}],"visibility":"Public","body":"_ = TSPGraph(T).allocate\n_.initialize(matrix)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"html_id":"new(mat:Array(Array(T|Nil)))-class-method","name":"new","doc":"隣接行列に従ってグラフを作ります。\n\n`nil` は辺が存在しないことを表します。\n無限大の重みを持つ辺と捉えても良いです。\n\n```\nmat = [[0, 3, 1], [-2, 0, 4], [nil, nil, 0]]\nNgLib::TSPGraph(Int32).new(mat)\n```","summary":"<p>隣接行列に従ってグラフを作ります。</p>","abstract":false,"args":[{"name":"mat","external_name":"mat","restriction":"Array(Array(T | ::Nil))"}],"args_string":"(mat : Array(Array(T | Nil)))","args_html":"(mat : Array(Array(T | Nil)))","location":{"filename":"src/nglib/graph/tsp.cr","line_number":45,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/tsp.cr#L45"},"def":{"name":"new","args":[{"name":"mat","external_name":"mat","restriction":"Array(Array(T | ::Nil))"}],"visibility":"Public","body":"_ = TSPGraph(T).allocate\n_.initialize(mat)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"html_id":"new(n:Int)-class-method","name":"new","doc":"$n$ 頂点 $0$ 辺のグラフを作ります。\n\n```\nn = 10\nNgLib::TSPGraph(Int64).new(n)\n```","summary":"<p>$n$ 頂点 $0$ 辺のグラフを作ります。</p>","abstract":false,"args":[{"name":"n","external_name":"n","restriction":"Int"}],"args_string":"(n : Int)","args_html":"(n : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/graph/tsp.cr","line_number":28,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/tsp.cr#L28"},"def":{"name":"new","args":[{"name":"n","external_name":"n","restriction":"Int"}],"visibility":"Public","body":"_ = TSPGraph(T).allocate\n_.initialize(n)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"add_edge(u:Int,v:Int,w:T,directed:Bool=false)-instance-method","name":"add_edge","doc":"重みが $w$ の辺 $(u, v)$ を追加します。\n\n`directed` が `true` である場合、有向辺として追加します。\n\n```\nn, m = read_line.split.map &.to_i\ngraph = NgLib::TSPGraph.new(n)\nm.times do\n  u, v, w = read_line.split.map &.to_i64\n  u -= 1; v -= 1 # 0-index\n  graph.add_edge(u, v, w, directed: true)\nend\n```","summary":"<p>重みが $w$ の辺 $(u, v)$ を追加します。</p>","abstract":false,"args":[{"name":"u","external_name":"u","restriction":"Int"},{"name":"v","external_name":"v","restriction":"Int"},{"name":"w","external_name":"w","restriction":"T"},{"name":"directed","default_value":"false","external_name":"directed","restriction":"Bool"}],"args_string":"(u : Int, v : Int, w : T, directed : Bool = false)","args_html":"(u : <a href=\"../Int.html\">Int</a>, v : <a href=\"../Int.html\">Int</a>, w : T, directed : Bool = <span class=\"n\">false</span>)","location":{"filename":"src/nglib/graph/tsp.cr","line_number":74,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/tsp.cr#L74"},"def":{"name":"add_edge","args":[{"name":"u","external_name":"u","restriction":"Int"},{"name":"v","external_name":"v","restriction":"Int"},{"name":"w","external_name":"w","restriction":"T"},{"name":"directed","default_value":"false","external_name":"directed","restriction":"Bool"}],"visibility":"Public","body":"uv = @mat[u][v]\nif uv.nil?\n  @mat[u][v] = w\nelse\n  @mat[u][v] = {uv, w}.min\nend\nif directed\nelse\n  vu = @mat[v][u]\n  if vu.nil?\n    @mat[v][u] = w\n  else\n    @mat[v][u] = {vu, w}.min\n  end\nend\n"}},{"html_id":"mat:Array(Array(T|Nil))-instance-method","name":"mat","abstract":false,"location":{"filename":"src/nglib/graph/tsp.cr","line_number":20,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/tsp.cr#L20"},"def":{"name":"mat","return_type":"Array(Array(T | ::Nil))","visibility":"Public","body":"@mat"}},{"html_id":"shortest_route(should_back:Bool=true)-instance-method","name":"shortest_route","doc":"`dp[S][i] := 今まで訪問した頂点の集合が S で、最後に訪れた頂点が i であるときの最小経路長` を\n返します。\n\n`should_back` が `true` なら、始点の頂点に戻ってこない場合の最小経路長を計算します。\nまた、任意の始点に対しての答えを求める点に注意してください。\n\n`should_back` が `false` なら通常の巡回セールスマン問題の答えです。\n始点が頂点 $0$ であることに注意してください。\nつまり、`dp[(1 << n) - 1][0]` が答えです。\n\nどのような順でも到達できない場合は `nil` が格納されます。\n\n```\ngraph = TSPGraph(Int64).new(n)\ndist = graph.shortest_route\ndist[(1 << n) - 1][0] # => ans\ndist.last.first       # => ans\n```","summary":"<p><code>dp[S][i] := 今まで訪問した頂点の集合が S で、最後に訪れた頂点が i であるときの最小経路長</code> を 返します。</p>","abstract":false,"args":[{"name":"should_back","default_value":"true","external_name":"should_back","restriction":"Bool"}],"args_string":"(should_back : Bool = true)","args_html":"(should_back : Bool = <span class=\"n\">true</span>)","location":{"filename":"src/nglib/graph/tsp.cr","line_number":110,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/tsp.cr#L110"},"def":{"name":"shortest_route","args":[{"name":"should_back","default_value":"true","external_name":"should_back","restriction":"Bool"}],"visibility":"Public","body":"dp = Array.new(1 << @size) do\n  Array.new(@size) do\n    nil.as(T | ::Nil)\n  end\nend\nif should_back\n  dp[0][0] = T.zero\nelse\n  @size.times do |i|\n    dp[1 << i][i] = T.zero\n  end\nend\ncalc(dp)\n"}},{"html_id":"shortest_route(start:Int,should_back:Bool=true)-instance-method","name":"shortest_route","doc":"`dp[S][i] := 今まで訪問した頂点の集合が S で、最後に訪れた頂点が i であるときの最小経路長` を\n返します。\n\n`should_back` が `true` なら、始点の頂点に戻ってこない場合の最小経路長を計算します。\nまた、始点が `start` であることに注意してください。\n\n`should_back` が `false` なら通常の巡回セールスマン問題の答えです。\n始点が頂点 `start` であることに注意してください。\nつまり、`dp[(1 << n) - 1][start]` が答えです。\n\nどのような順でも到達できない場合は `nil` が格納されます。\n\n```\ngraph = TSPGraph(Int64).new(n)\ndist = graph.shortest_route(start: 2)\ndist[(1 << n) - 1][2]\n```","summary":"<p><code>dp[S][i] := 今まで訪問した頂点の集合が S で、最後に訪れた頂点が i であるときの最小経路長</code> を 返します。</p>","abstract":false,"args":[{"name":"start","external_name":"start","restriction":"Int"},{"name":"should_back","default_value":"true","external_name":"should_back","restriction":"Bool"}],"args_string":"(start : Int, should_back : Bool = true)","args_html":"(start : <a href=\"../Int.html\">Int</a>, should_back : Bool = <span class=\"n\">true</span>)","location":{"filename":"src/nglib/graph/tsp.cr","line_number":141,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/tsp.cr#L141"},"def":{"name":"shortest_route","args":[{"name":"start","external_name":"start","restriction":"Int"},{"name":"should_back","default_value":"true","external_name":"should_back","restriction":"Bool"}],"visibility":"Public","body":"dp = Array.new(1 << @size) do\n  Array.new(@size) do\n    nil.as(T | ::Nil)\n  end\nend\nif should_back\n  dp[0][start] = T.zero\nelse\n  dp[1 << start][start] = T.zero\nend\ncalc(dp)\n"}},{"html_id":"size:Int32-instance-method","name":"size","abstract":false,"location":{"filename":"src/nglib/graph/tsp.cr","line_number":19,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/tsp.cr#L19"},"def":{"name":"size","return_type":"Int32","visibility":"Public","body":"@size"}}]},{"html_id":"nglib/NgLib/WaveletMatrix","path":"NgLib/WaveletMatrix.html","kind":"class","full_name":"NgLib::WaveletMatrix(T)","name":"WaveletMatrix","abstract":false,"superclass":{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"nglib/Indexable","kind":"module","full_name":"Indexable","name":"Indexable"},{"html_id":"nglib/Enumerable","kind":"module","full_name":"Enumerable","name":"Enumerable"},{"html_id":"nglib/Iterable","kind":"module","full_name":"Iterable","name":"Iterable"},{"html_id":"nglib/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"nglib/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/nglib/data_structure/wavelet_matrix.cr","line_number":10,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/wavelet_matrix.cr#L10"}],"repository_name":"nglib","program":false,"enum":false,"alias":false,"const":false,"included_modules":[{"html_id":"nglib/Indexable","kind":"module","full_name":"Indexable","name":"Indexable"}],"namespace":{"html_id":"nglib/NgLib","kind":"module","full_name":"NgLib","name":"NgLib"},"doc":"**非負整数列** $A$ に対して、順序に関する様々なクエリに答えます。\n\nジェネリクス T は `#[]` などでの返却値の型を指定するものであって、\n数列の値は非負整数でなければならないことに注意してください。\n\n基本的には `CompressedWaveletMatrix` の方が高速です。","summary":"<p><strong>非負整数列</strong> $A$ に対して、順序に関する様々なクエリに答えます。</p>","constructors":[{"html_id":"new(values:Array(T))-class-method","name":"new","doc":"非負整数列 $A$ を `values` によって構築します。\n\n```\nWaveletMatrix.new([1, 3, 2, 5])\n```","summary":"<p>非負整数列 $A$ を <code>values</code> によって構築します。</p>","abstract":false,"args":[{"name":"values","external_name":"values","restriction":"Array(T)"}],"args_string":"(values : Array(T))","args_html":"(values : Array(T))","location":{"filename":"src/nglib/data_structure/wavelet_matrix.cr","line_number":24,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/wavelet_matrix.cr#L24"},"def":{"name":"new","args":[{"name":"values","external_name":"values","restriction":"Array(T)"}],"visibility":"Public","body":"_ = WaveletMatrix(T).allocate\n_.initialize(values)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"html_id":"new(n:Int,&:Int32->T)-class-method","name":"new","doc":"長さ $n$ の非負整数列 $A$ を構築します。\n\n```\nWaveletMatrix.new(10) { |i| (5 - i) ** 2 }\n```","summary":"<p>長さ $n$ の非負整数列 $A$ を構築します。</p>","abstract":false,"args":[{"name":"n","external_name":"n","restriction":"Int"}],"args_string":"(n : Int, & : Int32 -> T)","args_html":"(n : <a href=\"../Int.html\">Int</a>, & : Int32 -> T)","location":{"filename":"src/nglib/data_structure/wavelet_matrix.cr","line_number":55,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/wavelet_matrix.cr#L55"},"def":{"name":"new","args":[{"name":"n","external_name":"n","restriction":"Int"}],"yields":1,"block_arity":1,"block_arg":{"name":"","external_name":"","restriction":"(Int32 -> T)"},"visibility":"Public","body":"WaveletMatrix.new(Array.new(n) do |i|\n  yield i\nend)"}}],"instance_methods":[{"html_id":"count(range:Range(Int|Nil,Int|Nil),bound:Range(T|Nil,T|Nil)):Int32-instance-method","name":"count","doc":"`range` の表す区間に含まれる要素の中で `bound` が表す範囲の値の個数を返します。","summary":"<p><code>range</code> の表す区間に含まれる要素の中で <code>bound</code> が表す範囲の値の個数を返します。</p>","abstract":false,"args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"bound","external_name":"bound","restriction":"Range(T | ::Nil, T | ::Nil)"}],"args_string":"(range : Range(Int | Nil, Int | Nil), bound : Range(T | Nil, T | Nil)) : Int32","args_html":"(range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil), bound : Range(T | Nil, T | Nil)) : Int32","location":{"filename":"src/nglib/data_structure/wavelet_matrix.cr","line_number":150,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/wavelet_matrix.cr#L150"},"def":{"name":"count","args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"bound","external_name":"bound","restriction":"Range(T | ::Nil, T | ::Nil)"}],"return_type":"Int32","visibility":"Public","body":"lower_bound = (bound.begin || 0)\nupper_bound = (bound.end || T::MAX) + (bound.exclusive? || bound.end.nil? ? 0 : 1)\n(count_less_eq(range, upper_bound)) - (count_less_eq(range, lower_bound))\n"}},{"html_id":"count(range:Range(Int|Nil,Int|Nil),item:T)-instance-method","name":"count","doc":"`range` の表す区間に含まれる要素の中で `item` の個数を返します。","summary":"<p><code>range</code> の表す区間に含まれる要素の中で <code>item</code> の個数を返します。</p>","abstract":false,"args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"item","external_name":"item","restriction":"T"}],"args_string":"(range : Range(Int | Nil, Int | Nil), item : T)","args_html":"(range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil), item : T)","location":{"filename":"src/nglib/data_structure/wavelet_matrix.cr","line_number":145,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/wavelet_matrix.cr#L145"},"def":{"name":"count","args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"item","external_name":"item","restriction":"T"}],"visibility":"Public","body":"count(range, item..item)"}},{"html_id":"count(item:T)-instance-method","name":"count","doc":"`item` の個数を返します。\n\n計算量は対数オーダーです。","summary":"<p><code>item</code> の個数を返します。</p>","abstract":false,"args":[{"name":"item","external_name":"item","restriction":"T"}],"args_string":"(item : T)","args_html":"(item : T)","location":{"filename":"src/nglib/data_structure/wavelet_matrix.cr","line_number":140,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/wavelet_matrix.cr#L140"},"def":{"name":"count","args":[{"name":"item","external_name":"item","restriction":"T"}],"visibility":"Public","body":"count(.., item)"}},{"html_id":"count_less_eq(range:Range(Int|Nil,Int|Nil),upper_bound):Int32-instance-method","name":"count_less_eq","doc":"`range` の表す区間に含まれる要素のうち、`upper_bound` **未満** の値の個数を返します。\n\n存在しない場合は `nil` を返します。","summary":"<p><code>range</code> の表す区間に含まれる要素のうち、<code>upper_bound</code> <strong>未満</strong> の値の個数を返します。</p>","abstract":false,"args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"upper_bound","external_name":"upper_bound","restriction":""}],"args_string":"(range : Range(Int | Nil, Int | Nil), upper_bound) : Int32","args_html":"(range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil), upper_bound) : Int32","location":{"filename":"src/nglib/data_structure/wavelet_matrix.cr","line_number":177,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/wavelet_matrix.cr#L177"},"def":{"name":"count_less_eq","args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"upper_bound","external_name":"upper_bound","restriction":""}],"return_type":"Int32","visibility":"Public","body":"l = (range.begin || 0)\nr = (range.end || size) + (range.exclusive? || range.end.nil? ? 0 : 1)\nif upper_bound >= (T.zero.succ << @n_nodes)\n  return (l...r).size.to_i\nend\nret = 0\n(@n_nodes - 1).downto(0) do |height|\n  lzeros, rzeros = succ0(l, r, height)\n  if (upper_bound.bit(height)) == 1\n    ret = ret + (rzeros - lzeros)\n    l = l + (@bit_vectors[height].count_zeros - lzeros)\n    r = r + (@bit_vectors[height].count_zeros - rzeros)\n  else\n    l, r = lzeros, rzeros\n  end\nend\nret\n"}},{"html_id":"kth_largest(range:Range(Int|Nil,Int|Nil),kth:Int)-instance-method","name":"kth_largest","doc":"`range` の表す区間に含まれる要素のうち、`kth` 番目に大きい値を返します。\n\n```\nwm = WaveletMatrix.new([1, 3, 2, 5])\nwm.kth_largest(1..2, 0) # => 3\nwm.kth_largest(1..2, 1) # => 2\n```","summary":"<p><code>range</code> の表す区間に含まれる要素のうち、<code>kth</code> 番目に大きい値を返します。</p>","abstract":false,"args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"kth","external_name":"kth","restriction":"Int"}],"args_string":"(range : Range(Int | Nil, Int | Nil), kth : Int)","args_html":"(range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil), kth : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/data_structure/wavelet_matrix.cr","line_number":133,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/wavelet_matrix.cr#L133"},"def":{"name":"kth_largest","args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"kth","external_name":"kth","restriction":"Int"}],"visibility":"Public","body":"kth_smallest(range, (range.size - kth) - 1)"}},{"html_id":"kth_largest(kth:Int32)-instance-method","name":"kth_largest","doc":"`kth` 番目に大きい値を返します。\n\n```\nwm = WaveletMatrix.new([1, 3, 2, 5])\nwm.kth_smallest(0) # => 5\nwm.kth_smallest(1) # => 3\nwm.kth_smallest(2) # => 2\nwm.kth_smallest(3) # => 1\n```","summary":"<p><code>kth</code> 番目に大きい値を返します。</p>","abstract":false,"args":[{"name":"kth","external_name":"kth","restriction":"Int32"}],"args_string":"(kth : Int32)","args_html":"(kth : Int32)","location":{"filename":"src/nglib/data_structure/wavelet_matrix.cr","line_number":122,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/wavelet_matrix.cr#L122"},"def":{"name":"kth_largest","args":[{"name":"kth","external_name":"kth","restriction":"Int32"}],"visibility":"Public","body":"kth_largest(.., kth)"}},{"html_id":"kth_smallest(range:Range(Int|Nil,Int|Nil),kth:Int)-instance-method","name":"kth_smallest","doc":"`range` の表す区間に含まれる要素のうち、`kth` 番目に小さい値を返します。\n\n```\nwm = WaveletMatrix.new([1, 3, 2, 5])\nwm.kth_smallest(1..2, 0) # => 2\nwm.kth_smallest(1..2, 1) # => 3\n```","summary":"<p><code>range</code> の表す区間に含まれる要素のうち、<code>kth</code> 番目に小さい値を返します。</p>","abstract":false,"args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"kth","external_name":"kth","restriction":"Int"}],"args_string":"(range : Range(Int | Nil, Int | Nil), kth : Int)","args_html":"(range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil), kth : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/data_structure/wavelet_matrix.cr","line_number":92,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/wavelet_matrix.cr#L92"},"def":{"name":"kth_smallest","args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"kth","external_name":"kth","restriction":"Int"}],"visibility":"Public","body":"l = (range.begin || 0)\nr = (range.end || size) + (range.exclusive? || range.end.nil? ? 0 : 1)\nret = T.zero\n(@n_nodes - 1).downto(0) do |height|\n  lzeros, rzeros = succ0(l, r, height)\n  if kth < (rzeros - lzeros)\n    l, r = lzeros, rzeros\n  else\n    kth = kth - (rzeros - lzeros)\n    ret = ret | (T.zero.succ << height)\n    l = l + (@bit_vectors[height].count_zeros - lzeros)\n    r = r + (@bit_vectors[height].count_zeros - rzeros)\n  end\nend\nret\n"}},{"html_id":"kth_smallest(kth:Int32)-instance-method","name":"kth_smallest","doc":"`kth` 番目に小さい値を返します。\n\n```\nwm = WaveletMatrix.new([1, 3, 2, 5])\nwm.kth_smallest(0) # => 1\nwm.kth_smallest(1) # => 2\nwm.kth_smallest(2) # => 3\nwm.kth_smallest(3) # => 5\n```","summary":"<p><code>kth</code> 番目に小さい値を返します。</p>","abstract":false,"args":[{"name":"kth","external_name":"kth","restriction":"Int32"}],"args_string":"(kth : Int32)","args_html":"(kth : Int32)","location":{"filename":"src/nglib/data_structure/wavelet_matrix.cr","line_number":81,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/wavelet_matrix.cr#L81"},"def":{"name":"kth_smallest","args":[{"name":"kth","external_name":"kth","restriction":"Int32"}],"visibility":"Public","body":"kth_smallest(.., kth)"}},{"html_id":"next_value(range:Range(Int|Nil,Int|Nil),lower_bound):T|Nil-instance-method","name":"next_value","doc":"`range` の表す区間に含まれる要素のうち、`lower_bound` **以上** の値の最小値を返します。\n\n存在しない場合は `nil` を返します。","summary":"<p><code>range</code> の表す区間に含まれる要素のうち、<code>lower_bound</code> <strong>以上</strong> の値の最小値を返します。</p>","abstract":false,"args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"lower_bound","external_name":"lower_bound","restriction":""}],"args_string":"(range : Range(Int | Nil, Int | Nil), lower_bound) : T | Nil","args_html":"(range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil), lower_bound) : T | Nil","location":{"filename":"src/nglib/data_structure/wavelet_matrix.cr","line_number":167,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/wavelet_matrix.cr#L167"},"def":{"name":"next_value","args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"lower_bound","external_name":"lower_bound","restriction":""}],"return_type":"T | ::Nil","visibility":"Public","body":"l = (range.begin || 0)\nr = (range.end || size) + (range.exclusive? || range.end.nil? ? 0 : 1)\ncnt = count_less_eq(range, lower_bound)\ncnt == (l...r).size ? nil : kth_smallest(range, cnt)\n"}},{"html_id":"prev_value(range:Range(Int|Nil,Int|Nil),upper_bound):T|Nil-instance-method","name":"prev_value","doc":"`range` の表す区間に含まれる要素のうち、`upper_bound` **未満** の値の最大値を返します。\n\n存在しない場合は `nil` を返します。","summary":"<p><code>range</code> の表す区間に含まれる要素のうち、<code>upper_bound</code> <strong>未満</strong> の値の最大値を返します。</p>","abstract":false,"args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"upper_bound","external_name":"upper_bound","restriction":""}],"args_string":"(range : Range(Int | Nil, Int | Nil), upper_bound) : T | Nil","args_html":"(range : Range(<a href=\"../Int.html\">Int</a> | Nil, <a href=\"../Int.html\">Int</a> | Nil), upper_bound) : T | Nil","location":{"filename":"src/nglib/data_structure/wavelet_matrix.cr","line_number":159,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/wavelet_matrix.cr#L159"},"def":{"name":"prev_value","args":[{"name":"range","external_name":"range","restriction":"Range(Int | ::Nil, Int | ::Nil)"},{"name":"upper_bound","external_name":"upper_bound","restriction":""}],"return_type":"T | ::Nil","visibility":"Public","body":"cnt = count_less_eq(range, upper_bound)\ncnt == 0 ? nil : kth_smallest(range, cnt - 1)\n"}},{"html_id":"size(*args,**options)-instance-method","name":"size","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options)","args_html":"(*args, **options)","location":{"filename":"src/nglib/data_structure/wavelet_matrix.cr","line_number":17,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/wavelet_matrix.cr#L17"},"def":{"name":"size","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"visibility":"Public","body":"@values.size(*args, **options)"}},{"html_id":"size(*args,**options,&)-instance-method","name":"size","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","args_html":"(*args, **options, &)","location":{"filename":"src/nglib/data_structure/wavelet_matrix.cr","line_number":17,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/wavelet_matrix.cr#L17"},"def":{"name":"size","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arity":1,"visibility":"Public","body":"@values.size(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}},{"html_id":"unsafe_fetch(index:Int)-instance-method","name":"unsafe_fetch","doc":"$A$ の `index` 番目の要素を取得します。\n\n```\nwm = WaveletMatrix.new([1, 3, 2, 5])\nwm.unsafe_fetch(0) # => 1\nwm.unsafe_fetch(1) # => 3\nwm.unsafe_fetch(2) # => 2\nwm.unsafe_fetch(3) # => 5\n```","summary":"<p>$A$ の <code>index</code> 番目の要素を取得します。</p>","abstract":false,"args":[{"name":"index","external_name":"index","restriction":"Int"}],"args_string":"(index : Int)","args_html":"(index : <a href=\"../Int.html\">Int</a>)","location":{"filename":"src/nglib/data_structure/wavelet_matrix.cr","line_number":68,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/data_structure/wavelet_matrix.cr#L68"},"def":{"name":"unsafe_fetch","args":[{"name":"index","external_name":"index","restriction":"Int"}],"visibility":"Public","body":"@values.unsafe_fetch(index)"}}]},{"html_id":"nglib/NgLib/Weight","path":"NgLib/Weight.html","kind":"struct","full_name":"NgLib::Weight","name":"Weight","abstract":true,"superclass":{"html_id":"nglib/Struct","kind":"struct","full_name":"Struct","name":"Struct"},"ancestors":[{"html_id":"nglib/Comparable","kind":"module","full_name":"Comparable","name":"Comparable"},{"html_id":"nglib/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"nglib/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"nglib/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/nglib/graph/dijkstra.cr","line_number":4,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/dijkstra.cr#L4"}],"repository_name":"nglib","program":false,"enum":false,"alias":false,"const":false,"included_modules":[{"html_id":"nglib/Comparable","kind":"module","full_name":"Comparable","name":"Comparable"}],"namespace":{"html_id":"nglib/NgLib","kind":"module","full_name":"NgLib","name":"NgLib"},"constructors":[{"html_id":"inf:self-class-method","name":"inf","abstract":false,"location":{"filename":"src/nglib/graph/dijkstra.cr","line_number":10,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/dijkstra.cr#L10"},"def":{"name":"inf","return_type":"self","visibility":"Public","body":""}},{"html_id":"new-class-method","name":"new","abstract":false,"location":{"filename":"src/nglib/graph/dijkstra.cr","line_number":4,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/dijkstra.cr#L4"},"def":{"name":"new","visibility":"Public","body":"x = allocate\nif x.responds_to?(:finalize)\n  ::GC.add_finalizer(x)\nend\nx\n"}},{"html_id":"zero:self-class-method","name":"zero","abstract":false,"location":{"filename":"src/nglib/graph/dijkstra.cr","line_number":7,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/dijkstra.cr#L7"},"def":{"name":"zero","return_type":"self","visibility":"Public","body":""}}],"instance_methods":[{"html_id":"+(other:self)-instance-method","name":"+","abstract":false,"args":[{"name":"other","external_name":"other","restriction":"self"}],"args_string":"(other : self)","args_html":"(other : <span class=\"k\">self</span>)","location":{"filename":"src/nglib/graph/dijkstra.cr","line_number":13,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/dijkstra.cr#L13"},"def":{"name":"+","args":[{"name":"other","external_name":"other","restriction":"self"}],"visibility":"Public","body":""}},{"html_id":"<=>(other:self)-instance-method","name":"<=>","abstract":false,"args":[{"name":"other","external_name":"other","restriction":"self"}],"args_string":"(other : self)","args_html":"(other : <span class=\"k\">self</span>)","location":{"filename":"src/nglib/graph/dijkstra.cr","line_number":16,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/dijkstra.cr#L16"},"def":{"name":"<=>","args":[{"name":"other","external_name":"other","restriction":"self"}],"visibility":"Public","body":""}},{"html_id":"initialize-instance-method","name":"initialize","abstract":false,"location":{"filename":"src/nglib/graph/dijkstra.cr","line_number":4,"url":"https://github.com/ngng628/compe-library.cr/blob/7062ccf2012c30f6949c23e8c192d42abbb317fc/src/nglib/graph/dijkstra.cr#L4"},"def":{"name":"initialize","visibility":"Public","body":""}}]}]}]}}